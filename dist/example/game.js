!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=493)}([function(t,e,i){var n=i(2),r=i(29),o=i(15),s=i(16),a=i(30),l=function(t,e,i){var u,h,c,p,f=t&l.F,m=t&l.G,d=t&l.S,_=t&l.P,y=t&l.B,v=m?n:d?n[e]||(n[e]={}):(n[e]||{}).prototype,x=m?r:r[e]||(r[e]={}),b=x.prototype||(x.prototype={});m&&(i=e);for(u in i)h=!f&&v&&void 0!==v[u],c=(h?v:i)[u],p=y&&h?a(c,n):_&&"function"==typeof c?a(Function.call,c):c,v&&s(v,u,c,t&l.U),x[u]!=c&&o(x,u,p),_&&b[u]!=c&&(b[u]=c)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){var n=i(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(65)("wks"),r=i(45),o=i(2).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var o=i(9);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=i(24);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var a=i(36);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return r(a).default}});var l=i(140);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return r(l).default}});var u=i(355);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return r(u).default}});var h=i(96);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r(h).default}});var c=i(356);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return r(c).default}});var p=i(357);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return r(p).default}});var f=i(141);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return r(f).default}});var m=i(145);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return r(m).default}});var d=i(432);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(d).default}});var _=i(146);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return r(_).default}});var y=i(434);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return r(y).default}});var v=i(436);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return r(v).default}});var x=i(367);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return r(x).default}});var b=i(404);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return r(b).default}});var g=i(358);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return r(g).default}});var w=i(407);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return r(w).default}});var S=i(405);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(S).default}});var C=i(437);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return r(C).default}});var T=i(68);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return r(T).default}});var A=i(99);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return r(A).default}});var M=i(147);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return r(M).default}});var E=i(368);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return r(E).default}});var D=i(370);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return r(D).default}});var P=i(369);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return r(P).default}});var I=i(362);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(I).default}});var O=i(95);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return r(O).default}});var R=i(98);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return r(R).default}});var B=i(105);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return r(B).default}});var L=i(106);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return r(L).default}});var F=i(366);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return r(F).default}});var V=i(365);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(V).default}});var k=i(364);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r(k).default}});var N=i(403);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return r(N).default}});var G=i(354);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var j=i(12),U=n(j),J=i(148),X=n(J),W=i(28),z=r(W),H=i(97),Y=r(H),q=i(104),K=r(q);e.settings=z.default,e.utils=U,e.ticker=X,e.CanvasRenderer=Y.default,e.WebGLRenderer=K.default},function(t,e,i){t.exports=!i(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(1),r=i(116),o=i(27),s=Object.defineProperty;e.f=i(7)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.4.3",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},function(t,e,i){var n=i(35),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(22);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(){return++I}function s(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function a(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function l(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function u(t,e){var i=w.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}function h(t){var e=b.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function c(t){var e=b.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function p(t){var e=b.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}function f(){O=!0}function m(t){if(!O){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+b.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+b.VERSION+" - "+t+" - http://www.pixijs.com/");O=!0}}function d(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}function _(t){return 0===t?0:t<0?-1:1}function y(t,e,i){var n=t.length;if(!(e>=n||0===i)){i=e+i>n?n-e:i;for(var r=n-i,o=e;o<r;++o)t[o]=t[o+i];t.length=r}}function v(){var t=void 0;for(t in R)R[t].destroy();for(t in B)B[t].destroy()}function x(){var t=void 0;for(t in R)delete R[t];for(t in B)delete B[t]}e.__esModule=!0,e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=e.isMobile=void 0,e.uid=o,e.hex2rgb=s,e.hex2string=a,e.rgb2hex=l,e.getResolutionOfUrl=u,e.decomposeDataUri=h,e.getUrlFileExtension=c,e.getSvgSize=p,e.skipHello=f,e.sayHello=m,e.isWebGLSupported=d,e.sign=_,e.removeItems=y,e.destroyTextureCache=v,e.clearTextureCache=x;var b=i(9),g=i(28),w=r(g),S=i(55),C=r(S),T=i(443),A=r(T),M=i(442),E=n(M),D=i(138),P=n(D),I=0,O=!1;e.isMobile=P,e.EventEmitter=C.default,e.pluginTarget=A.default,e.mixins=E;var R=e.TextureCache={},B=e.BaseTextureCache={}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(8),r=i(34);t.exports=i(7)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(2),r=i(15),o=i(13),s=i(45)("src"),a=Function.toString,l=(""+a).split("toString");i(29).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var u="function"==typeof i;u&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(u&&(o(i,s)||r(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,i){var n=i(0),r=i(3),o=i(22),s=function(t,e,i,n){var r=String(o(t)),s="<"+e;return""!==i&&(s+=" "+i+'="'+String(n).replace(/"/g,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(s),n(n.P+n.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},function(t,e,i){var n=i(53),r=i(22);t.exports=function(t){return n(r(t))}},function(t,e,i){var n=i(54),r=i(34),o=i(18),s=i(27),a=i(13),l=i(116),u=Object.getOwnPropertyDescriptor;e.f=i(7)?u:function(t,e){if(t=o(t),e=s(e,!0),l)try{return u(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(13),r=i(11),o=i(84)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(3);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(143);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return n(r).default}});var o=i(360);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var s=i(142);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var a=i(359);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var l=i(414);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return n(l).default}});var u=i(415);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return n(u).default}});var h=i(416);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return n(h).default}});var c=i(144);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var p=i(417);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return n(p).default}})},function(t,e,i){var n=i(30),r=i(53),o=i(11),s=i(10),a=i(158);t.exports=function(t,e){var i=1==t,l=2==t,u=3==t,h=4==t,c=6==t,p=5==t||c,f=e||a;return function(e,a,m){for(var d,_,y=o(e),v=r(y),x=n(a,m,3),b=s(v.length),g=0,w=i?f(e,b):l?f(e,0):void 0;b>g;g++)if((p||g in v)&&(d=v[g],_=x(d,g,y),t))if(i)w[g]=_;else if(_)switch(t){case 3:return!0;case 5:return d;case 6:return g;case 2:w.push(d)}else if(h)return!1;return c?-1:u||h?h:w}}},function(t,e,i){var n=i(0),r=i(29),o=i(3);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",s)}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(441),o=n(r),s=i(439),a=n(s);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},function(t,e){var i=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(14);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(132),r=i(0),o=i(65)("metadata"),s=o.store||(o.store=new(i(135))),a=function(t,e,i){var r=s.get(t);if(!r){if(!i)return;s.set(t,r=new n)}var o=r.get(e);if(!o){if(!i)return;r.set(e,o=new n)}return o},l=function(t,e,i){var n=a(e,i,!1);return void 0!==n&&n.has(t)},u=function(t,e,i){var n=a(e,i,!1);return void 0===n?void 0:n.get(t)},h=function(t,e,i,n){a(i,n,!0).set(t,e)},c=function(t,e){var i=a(t,e,!1),n=[];return i&&i.forEach(function(t,e){n.push(e)}),n},p=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},f=function(t){r(r.S,"Reflect",t)};t.exports={store:s,map:a,has:l,get:u,set:h,keys:c,key:p,exp:f}},function(t,e,i){"use strict";if(i(7)){var n=i(38),r=i(2),o=i(3),s=i(0),a=i(66),l=i(91),u=i(30),h=i(37),c=i(34),p=i(15),f=i(42),m=i(35),d=i(10),_=i(44),y=i(27),v=i(13),x=i(129),b=i(52),g=i(4),w=i(11),S=i(76),C=i(39),T=i(20),A=i(40).f,M=i(93),E=i(45),D=i(5),P=i(25),I=i(56),O=i(85),R=i(94),B=i(49),L=i(62),F=i(43),V=i(69),k=i(109),N=i(8),G=i(19),j=N.f,U=G.f,J=r.RangeError,X=r.TypeError,W=r.Uint8Array,z=Array.prototype,H=l.ArrayBuffer,Y=l.DataView,q=P(0),K=P(2),Z=P(3),Q=P(4),$=P(5),tt=P(6),et=I(!0),it=I(!1),nt=R.values,rt=R.keys,ot=R.entries,st=z.lastIndexOf,at=z.reduce,lt=z.reduceRight,ut=z.join,ht=z.sort,ct=z.slice,pt=z.toString,ft=z.toLocaleString,mt=D("iterator"),dt=D("toStringTag"),_t=E("typed_constructor"),yt=E("def_constructor"),vt=a.CONSTR,xt=a.TYPED,bt=a.VIEW,gt=P(1,function(t,e){return Mt(O(t,t[yt]),e)}),wt=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),St=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),Ct=function(t,e){if(void 0===t)throw X("Wrong length!");var i=+t,n=d(t);if(e&&!x(i,n))throw J("Wrong length!");return n},Tt=function(t,e){var i=m(t);if(i<0||i%e)throw J("Wrong offset!");return i},At=function(t){if(g(t)&&xt in t)return t;throw X(t+" is not a typed array!")},Mt=function(t,e){if(!(g(t)&&_t in t))throw X("It is not a typed array constructor!");return new t(e)},Et=function(t,e){return Dt(O(t,t[yt]),e)},Dt=function(t,e){for(var i=0,n=e.length,r=Mt(t,n);n>i;)r[i]=e[i++];return r},Pt=function(t,e,i){j(t,e,{get:function(){return this._d[i]}})},It=function(t){var e,i,n,r,o,s,a=w(t),l=arguments.length,h=l>1?arguments[1]:void 0,c=void 0!==h,p=M(a);if(void 0!=p&&!S(p)){for(s=p.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(c&&l>2&&(h=u(h,arguments[2],2)),e=0,i=d(a.length),r=Mt(this,i);i>e;e++)r[e]=c?h(a[e],e):a[e];return r},Ot=function(){for(var t=0,e=arguments.length,i=Mt(this,e);e>t;)i[t]=arguments[t++];return i},Rt=!!W&&o(function(){ft.call(new W(1))}),Bt=function(){return ft.apply(Rt?ct.call(At(this)):At(this),arguments)},Lt={copyWithin:function(t,e){return k.call(At(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(At(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return V.apply(At(this),arguments)},filter:function(t){return Et(this,K(At(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(At(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(At(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(At(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(At(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(At(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return gt(At(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(At(this),arguments)},reduceRight:function(t){return lt.apply(At(this),arguments)},reverse:function(){for(var t,e=this,i=At(e).length,n=Math.floor(i/2),r=0;r<n;)t=e[r],e[r++]=e[--i],e[i]=t;return e},some:function(t){return Z(At(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ht.call(At(this),t)},subarray:function(t,e){var i=At(this),n=i.length,r=_(t,n);return new(O(i,i[yt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,d((void 0===e?n:_(e,n))-r))}},Ft=function(t,e){return Et(this,ct.call(At(this),t,e))},Vt=function(t){At(this);var e=Tt(arguments[1],1),i=this.length,n=w(t),r=d(n.length),o=0;if(r+e>i)throw J("Wrong length!");for(;o<r;)this[e+o]=n[o++]},kt={entries:function(){return ot.call(At(this))},keys:function(){return rt.call(At(this))},values:function(){return nt.call(At(this))}},Nt=function(t,e){return g(t)&&t[xt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Gt=function(t,e){return Nt(t,e=y(e,!0))?c(2,t[e]):U(t,e)},jt=function(t,e,i){return!(Nt(t,e=y(e,!0))&&g(i)&&v(i,"value"))||v(i,"get")||v(i,"set")||i.configurable||v(i,"writable")&&!i.writable||v(i,"enumerable")&&!i.enumerable?j(t,e,i):(t[e]=i.value,t)};vt||(G.f=Gt,N.f=jt),s(s.S+s.F*!vt,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:jt}),o(function(){pt.call({})})&&(pt=ft=function(){return ut.call(this)});var Ut=f({},Lt);f(Ut,kt),p(Ut,mt,kt.values),f(Ut,{slice:Ft,set:Vt,constructor:function(){},toString:pt,toLocaleString:Bt}),Pt(Ut,"buffer","b"),Pt(Ut,"byteOffset","o"),Pt(Ut,"byteLength","l"),Pt(Ut,"length","e"),j(Ut,dt,{get:function(){return this[xt]}}),t.exports=function(t,e,i,l){l=!!l;var u=t+(l?"Clamped":"")+"Array",c="Uint8Array"!=u,f="get"+t,m="set"+t,_=r[u],y=_||{},v=_&&T(_),x=!_||!a.ABV,w={},S=_&&_.prototype,M=function(t,i){var n=t._d;return n.v[f](i*e+n.o,wt)},E=function(t,i,n){var r=t._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[m](i*e+r.o,n,wt)},D=function(t,e){j(t,e,{get:function(){return M(this,e)},set:function(t){return E(this,e,t)},enumerable:!0})};x?(_=i(function(t,i,n,r){h(t,_,u,"_d");var o,s,a,l,c=0,f=0;if(g(i)){if(!(i instanceof H||"ArrayBuffer"==(l=b(i))||"SharedArrayBuffer"==l))return xt in i?Dt(_,i):It.call(_,i);o=i,f=Tt(n,e);var m=i.byteLength;if(void 0===r){if(m%e)throw J("Wrong length!");if((s=m-f)<0)throw J("Wrong length!")}else if((s=d(r)*e)+f>m)throw J("Wrong length!");a=s/e}else a=Ct(i,!0),s=a*e,o=new H(s);for(p(t,"_d",{b:o,o:f,l:s,e:a,v:new Y(o)});c<a;)D(t,c++)}),S=_.prototype=C(Ut),p(S,"constructor",_)):L(function(t){new _(null),new _(t)},!0)||(_=i(function(t,i,n,r){h(t,_,u);var o;return g(i)?i instanceof H||"ArrayBuffer"==(o=b(i))||"SharedArrayBuffer"==o?void 0!==r?new y(i,Tt(n,e),r):void 0!==n?new y(i,Tt(n,e)):new y(i):xt in i?Dt(_,i):It.call(_,i):new y(Ct(i,c))}),q(v!==Function.prototype?A(y).concat(A(v)):A(y),function(t){t in _||p(_,t,y[t])}),_.prototype=S,n||(S.constructor=_));var P=S[mt],I=!!P&&("values"==P.name||void 0==P.name),O=kt.values;p(_,_t,!0),p(S,xt,u),p(S,bt,!0),p(S,yt,_),(l?new _(1)[dt]==u:dt in S)||j(S,dt,{get:function(){return u}}),w[u]=_,s(s.G+s.W+s.F*(_!=y),w),s(s.S,u,{BYTES_PER_ELEMENT:e,from:It,of:Ot}),"BYTES_PER_ELEMENT"in S||p(S,"BYTES_PER_ELEMENT",e),s(s.P,u,Lt),F(u),s(s.P+s.F*St,u,{set:Vt}),s(s.P+s.F*!I,u,kt),s(s.P+s.F*(S.toString!=pt),u,{toString:pt}),s(s.P+s.F*o(function(){new _(1).slice()}),u,{slice:Ft}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),u,{toLocaleString:Bt}),B[u]=I?P:O,n||I||p(S,mt,O)}}else t.exports=function(){}},function(t,e,i){var n=i(45)("meta"),r=i(4),o=i(13),s=i(8).f,a=0,l=Object.isExtensible||function(){return!0},u=!i(3)(function(){return l(Object.preventExtensions({}))}),h=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},c=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!l(t))return"F";if(!e)return"E";h(t)}return t[n].i},p=function(t,e){if(!o(t,n)){if(!l(t))return!0;if(!e)return!1;h(t)}return t[n].w},f=function(t){return u&&m.NEED&&l(t)&&!o(t,n)&&h(t),t},m=t.exports={KEY:n,NEED:!1,fastKey:c,getWeak:p,onFreeze:f}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n={createContext:i(399),setVertexAttribArrays:i(345),GLBuffer:i(395),GLFramebuffer:i(396),GLShader:i(397),GLTexture:i(344),VertexArrayObject:i(398),shader:i(400)};void 0!==t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e){t.exports=!1},function(t,e,i){var n=i(1),r=i(122),o=i(72),s=i(84)("IE_PROTO"),a=function(){},l=function(){var t,e=i(71)("iframe"),n=o.length;for(e.style.display="none",i(74).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(124),r=i(72).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(124),r=i(72);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(16);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(2),r=i(8),o=i(7),s=i(5)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(35),r=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?r(t+e,0):o(t,e)}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=i(n(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===s(t,-1);return t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,l=0;l<s;l++)if(r[l]!==o[l]){a=l;break}for(var u=[],l=a;l<r.length;l++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=o(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(102))},function(t,e,i){var n=i(5)("unscopables"),r=Array.prototype;void 0==r[n]&&i(15)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e,i){var n=i(30),r=i(118),o=i(76),s=i(1),a=i(10),l=i(93),u={},h={},e=t.exports=function(t,e,i,c,p){var f,m,d,_,y=p?function(){return t}:l(t),v=n(i,c,e?2:1),x=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(f=a(t.length);f>x;x++)if((_=e?v(s(m=t[x])[0],m[1]):v(t[x]))===u||_===h)return _}else for(d=y.call(t);!(m=d.next()).done;)if((_=r(d,v,m.value,e))===u||_===h)return _};e.BREAK=u,e.RETURN=h},function(t,e){t.exports={}},function(t,e,i){var n=i(8).f,r=i(13),o=i(5)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){var n=i(0),r=i(22),o=i(3),s=i(89),a="["+s+"]",l="​",u=RegExp("^"+a+a+"*"),h=RegExp(a+a+"*$"),c=function(t,e,i){var r={},a=o(function(){return!!s[t]()||l[t]()!=l}),u=r[t]=a?e(p):s[t];i&&(r[i]=u),n(n.P+n.F*a,"String",r)},p=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(h,"")),t};t.exports=c},function(t,e,i){var n=i(21),r=i(5)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=s(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var n=i(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)s.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},o.prototype.emit=function(t,e,i,n,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var l,u,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,r),!0;case 6:return h.fn.call(h.context,e,i,n,r,o),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var p,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,n);break;default:if(!l)for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(t,e,i){var n=new r(e,i||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,u=[],h=s.length;l<h;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,t.exports=o},function(t,e,i){var n=i(18),r=i(10),o=i(44);t.exports=function(t){return function(e,i,s){var a,l=n(e),u=r(l.length),h=o(s,u);if(t&&i!=i){for(;u>h;)if((a=l[h++])!=a)return!0}else for(;u>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(16),s=i(42),a=i(33),l=i(48),u=i(37),h=i(4),c=i(3),p=i(62),f=i(50),m=i(75);t.exports=function(t,e,i,d,_,y){var v=n[t],x=v,b=_?"set":"add",g=x&&x.prototype,w={},S=function(t){var e=g[t];o(g,t,"delete"==t?function(t){return!(y&&!h(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof x&&(y||g.forEach&&!c(function(){(new x).entries().next()}))){var C=new x,T=C[b](y?{}:-0,1)!=C,A=c(function(){C.has(1)}),M=p(function(t){new x(t)}),E=!y&&c(function(){for(var t=new x,e=5;e--;)t[b](e,e);return!t.has(-0)});M||(x=e(function(e,i){u(e,x,t);var n=m(new v,e,x);return void 0!=i&&l(i,_,n[b],n),n}),x.prototype=g,g.constructor=x),(A||E)&&(S("delete"),S("has"),_&&S("get")),(E||T)&&S(b),y&&g.clear&&delete g.clear}else x=d.getConstructor(e,t,_,b),s(x.prototype,i),a.NEED=!0;return f(x,t),w[t]=x,r(r.G+r.W+r.F*(x!=v),w),y||d.setStrong(x,t,_),x}},function(t,e,i){"use strict";var n=i(15),r=i(16),o=i(3),s=i(22),a=i(5);t.exports=function(t,e,i){var l=a(t),u=i(s,l,""[t]),h=u[0],c=u[1];o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,h),n(RegExp.prototype,l,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e,i){"use strict";var n=i(1);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(4),r=i(21),o=i(5)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(5)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){t.exports=i(38)||!i(3)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i(2)[t]})},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(2),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){for(var n,r=i(2),o=i(15),s=i(45),a=s("typed_array"),l=s("view"),u=!(!r.ArrayBuffer||!r.DataView),h=u,c=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(n=r[p[c++]])?(o(n.prototype,a,!0),o(n.prototype,l,!0)):h=!1;t.exports={ABV:u,CONSTR:h,TYPED:a,VIEW:l}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(99),h=n(u),c=i(370),p=n(c),f=i(369),m=n(f),d=i(55),_=n(d),y=i(24),v=i(12),x=function(t){function e(i,n,s,a,l){r(this,e);var u=o(this,t.call(this));if(u.noFrame=!1,n||(u.noFrame=!0,n=new y.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=n,u.trim=a,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=s||n,u._rotate=Number(l||0),l===!0)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(u.noFrame&&(n=new y.Rectangle(0,0,i.width,i.height),i.on("update",u.onBaseTextureUpdated,u)),u.frame=n):i.once("loaded",u.onBaseTextureLoaded,u),u._updateID=0,u.transform=null,u}return s(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new y.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(v.TextureCache[this.baseTexture.imageUrl]&&delete v.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new m.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var o=v.TextureCache[t];return o||(o=new e(h.default.fromImage(t,i,n,r)),v.TextureCache[t]=o),o},e.fromFrame=function(t){var e=v.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){return new e(h.default.fromCanvas(t,i))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(p.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(p.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=v.TextureCache[t];if(!i){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return i}return t instanceof HTMLImageElement?new e(h.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof h.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new h.default(t,void 0,(0,v.getResolutionOfUrl)(i)),o=new e(r);return r.imageUrl=i,n||(n=i),v.BaseTextureCache[n]=r,v.TextureCache[n]=o,n!==i&&(v.BaseTextureCache[i]=r,v.TextureCache[i]=o),o},e.addTextureToCache=function(t,e){v.TextureCache[e]=t},e.removeTextureFromCache=function(t){var e=v.TextureCache[t];return delete v.TextureCache[t],delete v.BaseTextureCache[t],e},l(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(_.default);e.default=x,x.EMPTY=new x(new h.default),a(x.EMPTY),x.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new x(new h.default(t))}(),a(x.WHITE)},function(t,e,i){"use strict";var n=i(11),r=i(44),o=i(10);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,u=void 0===l?i:r(l,i);u>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(8),r=i(34);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(4),r=i(2).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){t.exports=i(2).document&&document.documentElement},function(t,e,i){var n=i(4),r=i(83).set;t.exports=function(t,e,i){var o,s=e.constructor;return s!==i&&"function"==typeof s&&(o=s.prototype)!==i.prototype&&n(o)&&r&&r(t,o),t}},function(t,e,i){var n=i(49),r=i(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){var n=i(21);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";var n=i(39),r=i(34),o=i(50),s={};i(15)(s,i(5)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(38),r=i(0),o=i(16),s=i(15),a=i(13),l=i(49),u=i(78),h=i(50),c=i(20),p=i(5)("iterator"),f=!([].keys&&"next"in[].keys()),m=function(){return this};t.exports=function(t,e,i,d,_,y,v){u(i,e,d);var x,b,g,w=function(t){if(!f&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",C="values"==_,T=!1,A=t.prototype,M=A[p]||A["@@iterator"]||_&&A[_],E=M||w(_),D=_?C?w("entries"):E:void 0,P="Array"==e?A.entries||M:M;if(P&&(g=c(P.call(new t)))!==Object.prototype&&(h(g,S,!0),n||a(g,p)||s(g,p,m)),C&&M&&"values"!==M.name&&(T=!0,E=function(){return M.call(this)}),n&&!v||!f&&!T&&A[p]||s(A,p,E),l[e]=E,l[S]=m,_)if(x={values:C?E:w("values"),keys:y?E:w("keys"),entries:D},v)for(b in x)b in A||o(A,b,x[b]);else r(r.P+r.F*(f||T),e,x);return x}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||i(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){var n=i(2),r=i(90).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,l="process"==i(21)(s);t.exports=function(){var t,e,i,u=function(){var n,r;for(l&&(n=s.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){s.nextTick(u)};else if(o){var h=!0,c=document.createTextNode("");new o(u).observe(c,{characterData:!0}),i=function(){c.data=h=!h}}else if(a&&a.resolve){var p=a.resolve();i=function(){p.then(u)}}else i=function(){r.call(n,u)};return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){var n=i(4),r=i(1),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(30)(Function.call,i(19).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){var n=i(65)("keys"),r=i(45);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(1),r=i(14),o=i(5)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||void 0==(i=n(s)[o])?e:r(i)}},function(t,e,i){var n=i(35),r=i(22);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),l=n(i),u=a.length;return l<0||l>=u?t?"":void 0:(o=a.charCodeAt(l),o<55296||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,i){var n=i(61),r=i(22);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){"use strict";var n=i(35),r=i(22);t.exports=function(t){var e=String(r(this)),i="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n,r,o,s=i(30),a=i(60),l=i(74),u=i(71),h=i(2),c=h.process,p=h.setImmediate,f=h.clearImmediate,m=h.MessageChannel,d=0,_={},y=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},v=function(t){y.call(t.data)};p&&f||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return _[++d]=function(){a("function"==typeof t?t:Function(t),e)},n(d),d},f=function(t){delete _[t]},"process"==i(21)(c)?n=function(t){c.nextTick(s(y,t,1))}:m?(r=new m,o=r.port2,r.port1.onmessage=v,n=s(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(n=function(t){h.postMessage(t+"","*")},h.addEventListener("message",v,!1)):n="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:p,clear:f}},function(t,e,i){"use strict";var n=i(2),r=i(7),o=i(38),s=i(66),a=i(15),l=i(42),u=i(3),h=i(37),c=i(35),p=i(10),f=i(40).f,m=i(8).f,d=i(69),_=i(50),y=n.ArrayBuffer,v=n.DataView,x=n.Math,b=n.RangeError,g=n.Infinity,w=y,S=x.abs,C=x.pow,T=x.floor,A=x.log,M=x.LN2,E=r?"_b":"buffer",D=r?"_l":"byteLength",P=r?"_o":"byteOffset",I=function(t,e,i){var n,r,o,s=Array(i),a=8*i-e-1,l=(1<<a)-1,u=l>>1,h=23===e?C(2,-24)-C(2,-77):0,c=0,p=t<0||0===t&&1/t<0?1:0;for(t=S(t),t!=t||t===g?(r=t!=t?1:0,n=l):(n=T(A(t)/M),t*(o=C(2,-n))<1&&(n--,o*=2),t+=n+u>=1?h/o:h*C(2,1-u),t*o>=2&&(n++,o/=2),n+u>=l?(r=0,n=l):n+u>=1?(r=(t*o-1)*C(2,e),n+=u):(r=t*C(2,u-1)*C(2,e),n=0));e>=8;s[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[c++]=255&n,n/=256,a-=8);return s[--c]|=128*p,s},O=function(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,l=i-1,u=t[l--],h=127&u;for(u>>=7;a>0;h=256*h+t[l],l--,a-=8);for(n=h&(1<<-a)-1,h>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===h)h=1-s;else{if(h===o)return n?NaN:u?-g:g;n+=C(2,e),h-=s}return(u?-1:1)*n*C(2,h-e)},R=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},L=function(t){return[255&t,t>>8&255]},F=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},V=function(t){return I(t,52,8)},k=function(t){return I(t,23,4)},N=function(t,e,i){m(t.prototype,e,{get:function(){return this[i]}})},G=function(t,e,i,n){var r=+i,o=c(r);if(r!=o||o<0||o+e>t[D])throw b("Wrong index!");var s=t[E]._b,a=o+t[P],l=s.slice(a,a+e);return n?l:l.reverse()},j=function(t,e,i,n,r,o){var s=+i,a=c(s);if(s!=a||a<0||a+e>t[D])throw b("Wrong index!");for(var l=t[E]._b,u=a+t[P],h=n(+r),p=0;p<e;p++)l[u+p]=h[o?p:e-p-1]},U=function(t,e){h(t,y,"ArrayBuffer");var i=+e,n=p(i);if(i!=n)throw b("Wrong length!");return n};if(s.ABV){if(!u(function(){new y})||!u(function(){new y(.5)})){y=function(t){return new w(U(this,t))};for(var J,X=y.prototype=w.prototype,W=f(w),z=0;W.length>z;)(J=W[z++])in y||a(y,J,w[J]);o||(X.constructor=y)}var H=new v(new y(2)),Y=v.prototype.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||l(v.prototype,{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},!0)}else y=function(t){var e=U(this,t);this._b=d.call(Array(e),0),this[D]=e},v=function(t,e,i){h(this,v,"DataView"),h(t,y,"DataView");var n=t[D],r=c(e);if(r<0||r>n)throw b("Wrong offset!");if(i=void 0===i?n-r:p(i),r+i>n)throw b("Wrong length!");this[E]=t,this[P]=r,this[D]=i},r&&(N(y,"byteLength","_l"),N(v,"buffer","_b"),N(v,"byteLength","_l"),N(v,"byteOffset","_o")),l(v.prototype,{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return R(G(this,4,t,arguments[1]))},getUint32:function(t){return R(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return O(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return O(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){j(this,1,t,B,e)},setUint8:function(t,e){j(this,1,t,B,e)},setInt16:function(t,e){j(this,2,t,L,e,arguments[2])},setUint16:function(t,e){j(this,2,t,L,e,arguments[2])},setInt32:function(t,e){j(this,4,t,F,e,arguments[2])},setUint32:function(t,e){j(this,4,t,F,e,arguments[2])},setFloat32:function(t,e){j(this,4,t,k,e,arguments[2])},setFloat64:function(t,e){j(this,8,t,V,e,arguments[2])}});_(y,"ArrayBuffer"),_(v,"DataView"),a(v.prototype,s.VIEW,!0),e.ArrayBuffer=y,e.DataView=v},function(t,e,i){var n=i(2),r=i(29),o=i(38),s=i(131),a=i(8).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(52),r=i(5)("iterator"),o=i(49);t.exports=i(29).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){"use strict";var n=i(47),r=i(119),o=i(49),s=i(18);t.exports=i(79)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,i):"values"==e?r(0,t[i]):r(0,[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var a=i(36),l=i(28),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(i,o,a){return n(this,e),r(this,t.call(this,i,s(o,u.default.PRECISION_VERTEX),s(a,u.default.PRECISION_FRAGMENT)))}return o(e,t),e}(a.GLShader);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(12),l=i(355),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.children=[],i}return o(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);(0,a.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,(0,a.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,a.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,o=void 0;if(r>0&&r<=n){o=this.children.splice(i,r);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,o=this.children.length;r<o;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},s(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(u.default);e.default=h,h.prototype.containerUpdateTransform=h.prototype.updateTransform},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(361),l=n(a),u=i(418),h=n(u),c=i(362),p=n(c),f=i(419),m=n(f),d=i(12),_=i(9),y=i(28),v=n(y),x=function(t){function e(i,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var a=o(this,t.call(this,"Canvas",i,n,s));return a.type=_.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.refresh=!0,a.maskManager=new h.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,m.default)(),a._activeBlendMode=null,a.context=null,a.renderingToScreen=!1,a.resize(i,n),a}return s(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new p.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,s.globalCompositeOperation=this.blendModes[_.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=s,t.renderCanvas(this),this.context=u,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=v.default.SCALE_MODE===_.SCALE_MODES.LINEAR)},e}(l.default);e.default=x,d.pluginTarget.mixin(x)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(12),l=i(28),u=n(l),h=i(55),c=n(h),p=i(440),f=n(p),m=i(137),d=n(m),_=function(t){function e(i,n,s){r(this,e);var l=o(this,t.call(this));return l.uid=(0,a.uid)(),l.touched=0,l.resolution=s||u.default.RESOLUTION,l.width=100,l.height=100,l.realWidth=100,l.realHeight=100,l.scaleMode=void 0!==n?n:u.default.SCALE_MODE,l.hasLoaded=!1,l.isLoading=!1,l.source=null,l.origSource=null,l.imageType=null,l.sourceScale=1,l.premultipliedAlpha=!0,l.imageUrl=null,l.isPowerOfTwo=!1,l.mipmap=u.default.MIPMAP_TEXTURES,l.wrapMode=u.default.WRAP_MODE,l._glTextures={},l._enabled=0,l._virtalBoundId=-1,i&&l.loadSource(i),l._destroyed=!1,l}return s(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=d.default.isPow2(this.realWidth)&&d.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,a.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var e=(0,a.getSvgSize)(t),i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(i*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var r=document.createElement("canvas");r.width=this.realWidth,r.height=this.realHeight,r._pixiId="canvas_"+(0,a.uid)(),r.getContext("2d").drawImage(this.source,0,0,i,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=r,a.BaseTextureCache[r._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete a.BaseTextureCache[this.imageUrl],delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete a.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose(),this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,r){var o=a.BaseTextureCache[t];if(!o){var s=new Image;void 0===i&&0!==t.indexOf("data:")&&(s.crossOrigin=(0,f.default)(t)),o=new e(s,n),o.imageUrl=t,r&&(o.sourceScale=r),o.resolution=(0,a.getResolutionOfUrl)(t),s.src=t,a.BaseTextureCache[t]=o}return o},e.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+(0,a.uid)());var n=a.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),a.BaseTextureCache[t._pixiId]=n),n},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var r=t.src,o=a.BaseTextureCache[r];return o||(o=new e(t,i),o.imageUrl=r,n&&(o.sourceScale=n),o.resolution=(0,a.getResolutionOfUrl)(r),a.BaseTextureCache[r]=o),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e}(c.default);e.default=_},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=new l.Point,h=new l.Polygon,c=function(t){function e(i,o,s,a,u){n(this,e);var h=r(this,t.call(this));return h._texture=null,h.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),h.vertices=o||new Float32Array([0,0,100,0,100,100,0,100]),h.indices=a||new Uint16Array([0,1,3,2]),h.dirty=0,h.indexDirty=0,h.blendMode=l.BLEND_MODES.NORMAL,h.canvasPadding=0,h.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,h.texture=i,h.shader=null,h.tintRgb=new Float32Array([1,1,1]),h._glDatas={},h.pluginName="mesh",h}return o(e,t),e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,u);for(var i=this.vertices,n=h.points,r=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var l=2*r[a],c=2*r[a+1],p=2*r[a+2];if(n[0]=i[l],n[1]=i[l+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[p],n[5]=i[p+1],h.contains(u.x,u.y))return!0}return!1},s(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return l.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=l.utils.hex2rgb(t,this.tintRgb)}}]),e}(l.Container);e.default=c,c.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(486),s=r(o),a=i(152),l=r(a),u=i(391),h=n(u),c=i(392),p=n(c);s.default.Resource=l.default,s.default.async=h,s.default.base64=p,t.exports=s.default,e.default=s.default},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function s(){d&&f&&(d=!1,f.length?m=f.concat(m):_=-1,m.length&&a())}function a(){if(!d){var t=r(s);d=!0;for(var e=m.length;e;){for(f=m,m=[];++_<e;)f&&f[_].run();_=-1,e=m.length}f=null,d=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var h,c,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var f,m=[],d=!1,_=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new l(t,e)),1!==m.length||d||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,i){"use strict";function n(t,e){var i=t.points;if(0!==i.length){var n=new o.Point(i[0],i[1]),r=new o.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){i=i.slice(),i.pop(),i.pop(),r=new o.Point(i[i.length-2],i[i.length-1]);var a=r.x+.5*(n.x-r.x),l=r.y+.5*(n.y-r.y);i.unshift(a,l),i.push(a,l)}var u=e.points,h=e.indices,c=i.length/2,p=i.length,f=u.length/6,m=t.lineWidth/2,d=(0,s.hex2rgb)(t.lineColor),_=t.lineAlpha,y=d[0]*_,v=d[1]*_,x=d[2]*_,b=i[0],g=i[1],w=i[2],S=i[3],C=0,T=0,A=-(g-S),M=b-w,E=0,D=0,P=0,I=0,O=Math.sqrt(A*A+M*M);A/=O,M/=O,A*=m,M*=m,u.push(b-A,g-M,y,v,x,_),u.push(b+A,g+M,y,v,x,_);for(var R=1;R<c-1;++R){b=i[2*(R-1)],g=i[2*(R-1)+1],w=i[2*R],S=i[2*R+1],C=i[2*(R+1)],T=i[2*(R+1)+1],A=-(g-S),M=b-w,O=Math.sqrt(A*A+M*M),A/=O,M/=O,A*=m,M*=m,E=-(S-T),D=w-C,O=Math.sqrt(E*E+D*D),E/=O,D/=O,E*=m,D*=m;var B=-M+g-(-M+S),L=-A+w-(-A+b),F=(-A+b)*(-M+S)-(-A+w)*(-M+g),V=-D+T-(-D+S),k=-E+w-(-E+C),N=(-E+C)*(-D+S)-(-E+w)*(-D+T),G=B*k-V*L;if(Math.abs(G)<.1)G+=10.1,u.push(w-A,S-M,y,v,x,_),u.push(w+A,S+M,y,v,x,_);else{var j=(L*N-k*F)/G,U=(V*F-B*N)/G;(j-w)*(j-w)+(U-S)*(U-S)>196*m*m?(P=A-E,I=M-D,O=Math.sqrt(P*P+I*I),P/=O,I/=O,P*=m,I*=m,u.push(w-P,S-I),u.push(y,v,x,_),u.push(w+P,S+I),u.push(y,v,x,_),u.push(w-P,S-I),u.push(y,v,x,_),p++):(u.push(j,U),u.push(y,v,x,_),u.push(w-(j-w),S-(U-S)),u.push(y,v,x,_))}}b=i[2*(c-2)],g=i[2*(c-2)+1],w=i[2*(c-1)],S=i[2*(c-1)+1],A=-(g-S),M=b-w,O=Math.sqrt(A*A+M*M),A/=O,M/=O,A*=m,M*=m,u.push(w-A,S-M),u.push(y,v,x,_),u.push(w+A,S+M),u.push(y,v,x,_),h.push(f);for(var J=0;J<p;++J)h.push(f++);h.push(f-1)}}function r(t,e){var i=0,n=t.points;if(0!==n.length){var r=e.points,o=n.length/2,a=(0,s.hex2rgb)(t.lineColor),l=t.lineAlpha,u=a[0]*l,h=a[1]*l,c=a[2]*l;for(i=1;i<o;i++){var p=n[2*(i-1)],f=n[2*(i-1)+1],m=n[2*i],d=n[2*i+1];r.push(p,f),r.push(u,h,c,l),r.push(m,d),r.push(u,h,c,l)}}}e.__esModule=!0,e.default=function(t,e){t.nativeLines?r(t,e):n(t,e)};var o=i(24),s=i(12)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(361),l=n(a),u=i(426),h=n(u),c=i(427),p=n(c),f=i(425),m=n(f),d=i(106),_=n(d),y=i(105),v=n(y),x=i(421),b=n(x),g=i(99),w=n(g),S=i(420),C=n(S),T=i(422),A=n(T),M=i(430),E=n(M),D=i(431),P=n(D),I=i(12),O=i(36),R=n(O),B=i(9),L=0,F=function(t){function e(i,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var a=o(this,t.call(this,"WebGL",i,n,s));return a.legacy=!!s.legacy,a.legacy&&(R.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=B.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:s.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:s.preserveDrawingBuffer},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new h.default(a),a.stencilManager=new p.default(a),a.emptyRenderer=new v.default(a),a.currentRenderer=a.emptyRenderer,a.initPlugins(),s.context&&(0,P.default)(s.context),a.gl=s.context||R.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=L++,a.state=new A.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.filterManager=new m.default(a),a.drawModes=(0,E.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return s(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new b.default(this),this.textureGC=new C.default(this),this.state.resetToDefault(),this.rootRenderTarget=new _.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new R.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var o=new w.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=o,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){l.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture,n=i._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),i=n._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),e!==!1&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new R.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(l.default);e.default=F,I.pluginTarget.mixin(F)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(98),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(a.default);e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(24),o=i(9),s=i(28),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=i(36),u=function(){function t(e,i,s,u,h,c){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=h||a.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==u?u:a.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,s)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=u},function(t,e){var i={utf8:{stringToBytes:function(t){return i.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(i.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};t.exports=i},function(t,e,i){var n=i(21);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){"use strict";var n=i(11),r=i(44),o=i(10);t.exports=[].copyWithin||function(t,e){var i=n(this),s=o(i.length),a=r(t,s),l=r(e,s),u=arguments.length>2?arguments[2]:void 0,h=Math.min((void 0===u?s:r(u,s))-l,s-a),c=1;for(l<a&&a<l+h&&(c=-1,l+=h-1,a+=h-1);h-- >0;)l in i?i[a]=i[l]:delete i[a],a+=c,l+=c;return i}},function(t,e,i){var n=i(48);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){var n=i(14),r=i(11),o=i(53),s=i(10);t.exports=function(t,e,i,a,l){n(e);var u=r(t),h=o(u),c=s(u.length),p=l?c-1:0,f=l?-1:1;if(i<2)for(;;){if(p in h){a=h[p],p+=f;break}if(p+=f,l?p<0:c<=p)throw TypeError("Reduce of empty array with no initial value")}for(;l?p>=0:c>p;p+=f)p in h&&(a=e(a,h[p],p,u));return a}},function(t,e,i){"use strict";var n=i(14),r=i(4),o=i(60),s=[].slice,a={},l=function(t,e,i){if(!(e in a)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=s.call(arguments,1),a=function(){var n=i.concat(s.call(arguments));return this instanceof a?l(e,n.length,n):o(e,n,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,i){"use strict";var n=i(8).f,r=i(39),o=i(42),s=i(30),a=i(37),l=i(22),u=i(48),h=i(79),c=i(119),p=i(43),f=i(7),m=i(33).fastKey,d=f?"_s":"size",_=function(t,e){var i,n=m(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,h){var c=t(function(t,n){a(t,c,e,"_i"),t._i=r(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=n&&u(n,i,t[h],t)});return o(c.prototype,{clear:function(){for(var t=this,e=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete e[i.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var e=this,i=_(e,t);if(i){var n=i.n,r=i.p;delete e._i[i.i],i.r=!0,r&&(r.n=n),n&&(n.p=r),e._f==i&&(e._f=n),e._l==i&&(e._l=r),e[d]--}return!!i},forEach:function(t){a(this,c,"forEach");for(var e,i=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(i(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!_(this,t)}}),f&&n(c.prototype,"size",{get:function(){return l(this[d])}}),c},def:function(t,e,i){var n,r,o=_(t,e);return o?o.v=i:(t._l=o={i:r=m(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[d]++,"F"!==r&&(t._i[r]=o)),t},getEntry:_,setStrong:function(t,e,i){h(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?"keys"==e?c(0,i.k):"values"==e?c(0,i.v):c(0,[i.k,i.v]):(t._t=void 0,c(1))},i?"entries":"values",!i,!0),p(e)}}},function(t,e,i){var n=i(52),r=i(110);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){"use strict";var n=i(42),r=i(33).getWeak,o=i(1),s=i(4),a=i(37),l=i(48),u=i(25),h=i(13),c=u(5),p=u(6),f=0,m=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},_=function(t,e){return c(t.a,function(t){return t[0]===e})};d.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var i=_(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,o){var u=t(function(t,n){a(t,u,e,"_i"),t._i=f++,t._l=void 0,void 0!=n&&l(n,i,t[o],t)});return n(u.prototype,{delete:function(t){if(!s(t))return!1;var e=r(t);return e===!0?m(this).delete(t):e&&h(e,this._i)&&delete e[this._i]},has:function(t){if(!s(t))return!1;var e=r(t);return e===!0?m(this).has(t):e&&h(e,this._i)}}),u},def:function(t,e,i){var n=r(o(e),!0);return n===!0?m(t).set(e,i):n[t._i]=i,t},ufstore:m}},function(t,e,i){t.exports=!i(7)&&!i(3)(function(){return 7!=Object.defineProperty(i(71)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(4),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(t,e,i){var n=i(1);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){"use strict";var n=i(41),r=i(64),o=i(54),s=i(11),a=i(53),l=Object.assign;t.exports=!l||i(3)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var i=s(t),l=arguments.length,u=1,h=r.f,c=o.f;l>u;)for(var p,f=a(arguments[u++]),m=h?n(f).concat(h(f)):n(f),d=m.length,_=0;d>_;)c.call(f,p=m[_++])&&(i[p]=f[p]);return i}:l},function(t,e,i){var n=i(8),r=i(1),o=i(41);t.exports=i(7)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){var n=i(18),r=i(40).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(n(t))}},function(t,e,i){var n=i(13),r=i(18),o=i(56)(!1),s=i(84)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,u=[];for(i in a)i!=s&&n(a,i)&&u.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){var n=i(41),r=i(18),o=i(54).f;t.exports=function(t){return function(e){for(var i,s=r(e),a=n(s),l=a.length,u=0,h=[];l>u;)o.call(s,i=a[u++])&&h.push(t?[i,s[i]]:s[i]);return h}}},function(t,e,i){var n=i(40),r=i(64),o=i(1),s=i(2).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(o(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(2).parseFloat,r=i(51).trim;t.exports=1/n(i(89)+"-0")!=-(1/0)?function(t){var e=r(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(2).parseInt,r=i(51).trim,o=i(89),s=/^[\-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var i=r(String(t),3);return n(i,e>>>0||(s.test(i)?16:10))}:n},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){var n=i(10),r=i(88),o=i(22);t.exports=function(t,e,i,s){var a=String(o(t)),l=a.length,u=void 0===i?" ":String(i),h=n(e);if(h<=l||""==u)return a;var c=h-l,p=r.call(u,Math.ceil(c/u.length));return p.length>c&&(p=p.slice(0,c)),s?p+a:a+p}},function(t,e,i){e.f=i(5)},function(t,e,i){"use strict";var n=i(113);t.exports=i(57)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},function(t,e,i){i(7)&&"g"!=/./g.flags&&i(8).f(RegExp.prototype,"flags",{configurable:!0,get:i(59)})},function(t,e,i){"use strict";var n=i(113);t.exports=i(57)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,r=i(25)(0),o=i(16),s=i(33),a=i(121),l=i(115),u=i(4),h=s.getWeak,c=Object.isExtensible,p=l.ufstore,f={},m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(u(t)){var e=h(t);return e===!0?p(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(this,t,e)}},_=t.exports=i(57)("WeakMap",m,d,l,!0,!0);7!=(new _).set((Object.freeze||Object)(f),7).get(f)&&(n=l.getConstructor(m),a(n.prototype,d),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=_.prototype,i=e[t];o(e,t,function(e,r){if(u(e)&&!c(e)){this._f||(this._f=new n);var o=this._f[t](e,r);return"set"==t?this:o}return i.call(this,e,r)})}))},function(t,e,i){"use strict";(function(t){function e(t,e,i){t[e]||Object[n](t,e,{writable:!0,configurable:!0,value:i})}if(i(336),i(390),i(156),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var n="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,i(67))},function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,i){var n,r,o;!function(i){var s=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,u=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),h=function(t,e){return t.test(e)},c=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),i=e.split("Twitter"),void 0!==i[1]&&(e=i[0]),this.apple={phone:h(/iPhone/i,e),ipod:h(/iPod/i,e),tablet:!h(/iPhone/i,e)&&h(/iPad/i,e),device:h(/iPhone/i,e)||h(/iPod/i,e)||h(/iPad/i,e)},this.amazon={phone:h(a,e),tablet:!h(a,e)&&h(l,e),device:h(a,e)||h(l,e)},this.android={phone:h(a,e)||h(s,e),tablet:!h(a,e)&&!h(s,e)&&(h(l,e)||h(/Android/i,e)),device:h(a,e)||h(l,e)||h(s,e)||h(/Android/i,e)},this.windows={phone:h(/Windows Phone/i,e),tablet:h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,e),device:h(/Windows Phone/i,e)||h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,e)},this.other={blackberry:h(/BlackBerry/i,e),blackberry10:h(/BB10/i,e),opera:h(/Opera Mini/i,e),firefox:h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,e),chrome:h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,e),device:h(/BlackBerry/i,e)||h(/BB10/i,e)||h(/Opera Mini/i,e)||h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,e)||h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,e)},this.seven_inch=h(u,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},p=function(){var t=new c;return t.Class=c,t};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=c:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=p():(r=[],n=i.isMobile=p(),void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.exports=o))}(this)},function(t,e){var i=function(t,e){if(!n){var i=Object.keys(r);n={};for(var o=0;o<i.length;++o){var s=i[o];n[t[s]]=r[s]}}return n[e]},n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=i},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(24),o=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[2],s=t[3],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[4],s=t[5],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,o=t[6],s=t[7],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var o=t.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,h=o.tx,c=o.ty,p=this.minX,f=this.minY,m=this.maxX,d=this.maxY,_=s*e+l*i+h,y=a*e+u*i+c;p=_<p?_:p,f=y<f?y:f,m=_>m?_:m,d=y>d?y:d,_=s*n+l*i+h,y=a*n+u*i+c,p=_<p?_:p,f=y<f?y:f,m=_>m?_:m,d=y>d?y:d,_=s*e+l*r+h,y=a*e+u*r+c,p=_<p?_:p,f=y<f?y:f,m=_>m?_:m,d=y>d?y:d,_=s*n+l*r+h,y=a*n+u*r+c,p=_<p?_:p,f=y<f?y:f,m=_>m?_:m,d=y>d?y:d,this.minX=p,this.minY=f,this.maxX=m,this.maxY=d},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,u=r.tx,h=r.ty,c=this.minX,p=this.minY,f=this.maxX,m=this.maxY,d=i;d<n;d+=2){var _=e[d],y=e[d+1],v=o*_+a*y+u,x=l*y+s*_+h;c=v<c?v:c,p=x<p?x:p,f=v>f?v:f,m=x>m?x:m}this.minX=c,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>u?o:u}},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(24),o=function(){function t(){n(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();e.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(143),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=i,this.c=r,this.d=o,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new s.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,o,s,a,l){var u=Math.sin(s),h=Math.cos(s),c=Math.cos(l),p=Math.sin(l),f=-Math.sin(a),m=Math.cos(a),d=h*r,_=u*r,y=-u*o,v=h*o;return this.a=c*d+p*y,this.b=c*_+p*v,this.c=f*d+m*y,this.d=f*_+m*v,this.tx=t+(i*d+n*y),this.ty=e+(i*_+n*v),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),s=Math.atan2(i,e);return Math.abs(o+s)<1e-5?(t.rotation=s,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(9),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=s,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(24),u=i(12),h=i(9),c=i(68),p=n(c),f=i(96),m=n(f),d=new l.Point,_=function(t){function e(i){r(this,e);var n=o(this,t.call(this));return n._anchor=new l.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=h.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||p.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return s(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this.texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,h=t.orig,c=this._anchor,p=0,f=0,m=0,d=0;u?(f=u.x-c._x*h.width,p=f+u.width,d=u.y-c._y*h.height,m=d+u.height):(f=-c._x*h.width,p=f+h.width,d=-c._y*h.height,m=d+h.height),l[0]=i*f+r*d+s,l[1]=o*d+n*f+a,l[2]=i*p+r*d+s,l[3]=o*d+n*p+a,l[4]=i*p+r*m+s,l[5]=o*m+n*p+a,l[6]=i*f+r*m+s,l[7]=o*m+n*f+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,u=r.tx,h=r.ty,c=-n._x*i.width,p=c+i.width,f=-n._y*i.height,m=f+i.height;e[0]=o*c+a*f+u,e[1]=l*f+s*c+h,e[2]=o*p+a*f+u,e[3]=l*f+s*p+h,e[4]=o*p+a*m+u,e[5]=l*m+s*p+h,e[6]=o*c+a*m+u,e[7]=l*m+s*c+h},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,d);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return d.x>n&&d.x<n+e&&(r=-i*this.anchor.y,d.y>r&&d.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(p.default.from(t))},e.fromFrame=function(t){var i=u.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(p.default.fromImage(t,i,n))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(m.default);e.default=_},function(t,e,i){"use strict";e.__esModule=!0;var n=i(12),r=i(363),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s={getTintedTexture:function(t,e){var i=t.texture;e=s.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var r=s.canvas||document.createElement("canvas");if(s.tintMethod(i,e,r),s.convertTintToImage){var o=new Image;o.src=r.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=r,s.canvas=null;return r},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=(0,n.hex2rgb)(e),l=a[0],u=a[1],h=a[2],c=r.getImageData(0,0,o.width,o.height),p=c.data,f=0;f<p.length;f+=4)p[f+0]*=l,p[f+1]*=u,p[f+2]*=h;r.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(368),l=n(a),u=i(68),h=n(u),c=function(t){function e(i,n){r(this,e);var s=null;if(!(i instanceof l.default)){var a=arguments[1],u=arguments[2],h=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+u+") instead of the ctor directly."),s=arguments[0],n=null,i=new l.default(a,u,h,c)}var p=o(this,t.call(this,i,n));return p.legacyRenderer=s,p.valid=!0,p._updateUvs(),p}return s(e,t),e.prototype.resize=function(t,e,i){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,r){return new e(new l.default(t,i,n,r))},e}(h.default);e.default=c},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var n=i(438),r=function(t){return t&&t.__esModule?t:{default:t}}(n),o=new r.default;o.autoStart=!0,e.shared=o,e.Ticker=r.default},function(t,e,i){"use strict";function n(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=e.TextureTransform=void 0;var r=i(371);Object.defineProperty(e,"TextureTransform",{enumerable:!0,get:function(){return n(r).default}});var o=i(449);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return n(o).default}});var s=i(451);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return n(s).default}});var a=i(455);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(a).default}});var l=i(450);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return n(l).default}}),i(452),i(453),i(454)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return e instanceof u.Text&&(e.updateText(!0),!0)}function o(t,e){if(e instanceof u.TextStyle){var i=u.Text.getFontStyle(e);return u.Text.fontPropertiesCache[i]||u.Text.calculateFontProperties(i),!0}return!1}function s(t,e){if(t instanceof u.Text){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}function a(t,e){return t instanceof u.TextStyle&&(e.indexOf(t)===-1&&e.push(t),!0)}e.__esModule=!0;var l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(389),c=function(t){return t&&t.__esModule?t:{default:t}}(h),p=u.ticker.shared;u.settings.UPLOADS_PER_FRAME=4;var f=function(){function t(e){var i=this;n(this,t),this.limiter=new c.default(u.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.register(s,r),this.register(a,o)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var o=0,s=r.length;o<s;o++)r[o]()}},t.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof u.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function a(t){return t.toString().replace("object ","")}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(343),h=n(u),c=i(342),p=n(c),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),m=null,d=function(){function t(e,i,n){if(r(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new p.default,this.onProgress=new p.default,this.onComplete=new p.default,this.onAfterMiddleware=new p.default}return t.setExtensionLoadType=function(e,i){s(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){s(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(a(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(a(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&i.length>0?n=200:1223===n&&(n=204),2!=(n/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,m||(m=document.createElement("a")),m.href=t,t=(0,h.default)(m.href,{strictMode:!0});var i=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");n!==-1&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},l(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e.default=d,d.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},d.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,svg:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE,mp3:d.LOAD_TYPE.AUDIO,ogg:d.LOAD_TYPE.AUDIO,wav:d.LOAD_TYPE.AUDIO,mp4:d.LOAD_TYPE.VIDEO,webm:d.LOAD_TYPE.VIDEO},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT,ttf:d.XHR_RESPONSE_TYPE.BUFFER,otf:d.XHR_RESPONSE_TYPE.BUFFER},d.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(){function o(t,e){if(e>0)return d.atan(t/e);if(e<0)return t>=0?d.atan(t/e)+Math.PI:d.atan(t/e)-Math.PI;if(0===e){if(0===t)return;if(t>0)return v;if(t<0)return-v}}function s(){return m(l()).slice(0,7)}function a(t,e){return Math.sqrt(t*t+e*e)}function l(){return Math.floor(1001*Math.random())/1e3}var u=i(154),h=u.Physics,c=u.Body,p=u.b2Vec2,f=i(339),m=i(341),d=new f,_=void 0!==e?e.nextTick.bind(e):setTimeout,y="undefined"!=typeof performance?performance.now.bind(performance):Date.now.bind(Date),v=Math.PI/2,x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;n(this,t),this.levels=[],this.interval=e,this.now=y()}return r(t,[{key:"loop",value:function(){var t=this;_(this.tick.bind(this)),this.onUpdate&&_(this.onUpdate.bind(this)),setTimeout(function(){return _(t.loop.bind(t))},this.interval)}},{key:"tick",value:function(){var t=this,e=y();this.delta=(e-this.now)/1e3,this.now=e,this.levels.forEach(function(e){_(e.tick.bind(e,t.delta))})}}]),t}(),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var i={};e.gravity&&(i.gravity=e.gravity),this.physics=new h(i),this.heros=e.heros||{},this.blocks=e.blocks||{},this.accuracy=10}return r(t,[{key:"spawn",value:function(t){var e=t.body;e.x=l()*this.width,e.y=0}},{key:"eachHero",value:function(t){for(var e in this.heros)this.heros.hasOwnProperty(e)&&t(this.heros[e])}},{key:"tick",value:function(t){this.physics.step(t)}},{key:"toArray",value:function(){var t=[[]];return this.eachHero(function(e){return t[0].push(e.toArray())}),t}},{key:"fromArray",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;this.eachHero(function(i){e[0].find(function(t){return t[0]===i.id})||(t.onRemoveHero&&t.onRemoveHero(i),delete t.heros[i.id])}),e[0].forEach(function(e){var n=e[0];t.heros[n]?t.updateHero(n,e):t.addHero(e,{},i)}),this.fromArrayExtension&&this.fromArrayExtension(e)}},{key:"updateHero",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.heros[t].fromArray(e),this.onUpdateHero&&this.onUpdateHero(this.heros[t])}},{key:"addHero",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,n=t[0]||s();return t[1]=t[1]||this.width*l(),t[2]=t[2]||0,this.heros[n]=new i({id:n}),this.heros[n].addBody(this.physics,Object.assign({shape:"circle",x:t[1],y:t[2],radius:.5},e)),this.heros[n].fromArray(t),this.onCreateHero&&this.onCreateHero(this.heros[n]),this.heros[n]}},{key:"fromTiled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.width=t.width,this.height=t.height,this.blocks={},this.stops={},this.tileset={tilewidth:t.tilesets[0].tilewidth,imagewidth:t.tilesets[0].imagewidth},this.accuracy=this.tileset.tilewidth;for(var e=0;e<this.height;e++)for(var i=0;i<this.width;i++){var n=e*this.width+i,r=i+":"+e;this.blocks[r]=[t.layers[0].data[n],t.layers[1].data[n]],this.stops[r]=t.layers[2].data[n],this.stops[r]&&new c(this.physics,{type:"static",x:i,y:e,width:1,height:1})}new c(this.physics,{type:"static",x:-1,y:this.height/2,height:this.height,width:1}),new c(this.physics,{type:"static",x:this.width,y:this.height/2,height:this.height,width:1}),new c(this.physics,{type:"static",x:this.width/2,y:-1,height:1,width:this.width}),new c(this.physics,{type:"static",x:this.width/2,y:this.height,height:1,width:this.width})}}]),t}(),g=function(){function t(e){var i=e.id,r=void 0===i?s():i,o=e.maxSpeed,a=void 0===o?10:o,l=e.jumpHeight,u=void 0===l?25:l,h=e.jumpInterval,c=void 0===h?1e3:h,p=e.sprite,f=void 0===p?null:p;n(this,t),this.id=r,this.maxSpeed=a,this.jumpHeight=u,this.jumpInterval=c,this.sprite=f,this.lastJump=0}return r(t,[{key:"addBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.body=new c(t,e),this.body.SetFixedRotation(!0),this.gravity=!!t.gravity.y}},{key:"toArray",value:function(){return[this.id,this.x,this.y]}},{key:"fromArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(this.id=t[0]),(e||this.id===t[0])&&this.move(t[1],t[2])}},{key:"move",value:function(t,e){this.body&&this.body.SetPosition(new p(t,e))}},{key:"speedLimit",value:function(t){return t<0?Math.max(t,-this.maxSpeed):Math.min(t,this.maxSpeed)}},{key:"goto",value:function(t){var e=t.x,i=t.y,n=this.maxSpeed/a(e,i),r=0,o=0;this.gravity?r=this.speedLimit(e):(this.body.m_force.SetZero(),r=e*n,o=i*n),this.body.ApplyImpulse({x:r,y:o},this.body.GetWorldCenter(),!0)}},{key:"jump",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=y();this.gravity&&e>this.lastJump+this.jumpInterval?(this.lastJump=e,this.body.ApplyImpulse({x:t?this.gravity?this.speedLimit(t):t:0,y:-this.jumpHeight},this.body.GetWorldCenter(),!0)):this.goto({x:t,y:0})}},{key:"x",get:function(){return this.body?this.body.GetPosition().x:void 0}},{key:"y",get:function(){return this.body?this.body.GetPosition().y:void 0}}]),t}();t.exports={DEFER:_,Game:x,Level:b,Hero:g,atan2:o,randomId:s,distance:a,random:l}}()}).call(e,i(102))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(){var e=i(155),o=e.Common.Math.b2Vec2,s=e.Dynamics.b2BodyDef,a=e.Dynamics.b2Body,l=e.Dynamics.b2FixtureDef,u=(e.Dynamics.b2Fixture,e.Dynamics.b2World),h=(e.Collision.Shapes.b2MassData,e.Collision.Shapes.b2PolygonShape),c=e.Collision.Shapes.b2CircleShape,p=e.Dynamics.b2DebugDraw,f=9.8,m=!0,d=function(){function t(e){var i=e.scale,r=void 0===i?30:i,s=e.gravity,a=void 0===s?f:s;n(this,t),this.gravity=new o(0,a),this.world=new u(this.gravity,m),this.scale=r,this.dtRemaining=0,this.stepAmount=1/60}return r(t,[{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;for(this.dtRemaining+=t;this.dtRemaining>this.stepAmount;)this.dtRemaining-=this.stepAmount,this.world.Step(this.stepAmount,8,3);this.debugDraw&&this.world.DrawDebugData()}},{key:"debug",value:function(t){t&&(this.debugDraw=new p,this.debugDraw.SetSprite(t),this.debugDraw.SetDrawScale(this.scale),this.debugDraw.SetFillAlpha(.3),this.debugDraw.SetLineThickness(1),this.debugDraw.SetFlags(p.e_shapeBit|p.e_jointBit),this.world.SetDebugDraw(this.debugDraw))}}]),t}(),_={shape:"block",width:1,height:1,radius:.5},y={density:2,friction:1,restitution:.2},v={active:!0,allowSleep:!0,angle:0,angularVelocity:0,awake:!0,bullet:!1,fixedRotation:!1},x=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var r=new s;for(var u in v)r[u]=i[u]||v[u];r.position=new o(i.x||0,i.y||0),r.linearVelocity=new o(i.vx||0,i.vy||0),r.userData={},r.type="static"==i.type?a.b2_staticBody:a.b2_dynamicBody;var p=e.world.CreateBody(r),f=new l;for(var m in y)f[m]=i[m]||y[m];switch(i.shape=i.shape||_.shape,i.shape){case"circle":i.radius=i.radius||_.radius,f.shape=new c(i.radius);break;case"polygon":f.shape=new h,f.shape.SetAsArray(i.points,i.points.length);break;case"block":default:i.width=i.width||_.width,i.height=i.height||_.height,f.shape=new h,f.shape.SetAsBox(i.width/2,i.height/2)}return p.CreateFixture(f),p};t.exports={Physics:d,Body:x,b2Vec2:o}}()},function(t,e){var i={};!function(t,e){function i(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,e,i){i.get instanceof Function&&t.__defineGetter__(e,i.get),i.set instanceof Function&&t.__defineSetter__(e,i.set)}),t.inherit=function(t,e){var n=t;i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=n},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){void 0===t&&(t=0);for(var e=new Array(t||0),i=0;i<t;++i)e[i]=0;return e},t.is=function(t,e){return null!==t&&(e instanceof Function&&t instanceof e||!(void 0==t.constructor.__implements||!t.constructor.__implements[e]))},t.parseUInt=function(t){return Math.abs(parseInt(t))}}(i);var n=Array,r=i.NVector;void 0===i&&(i={}),void 0===i.Collision&&(i.Collision={}),void 0===i.Collision.Shapes&&(i.Collision.Shapes={}),void 0===i.Common&&(i.Common={}),void 0===i.Common.Math&&(i.Common.Math={}),void 0===i.Dynamics&&(i.Dynamics={}),void 0===i.Dynamics.Contacts&&(i.Dynamics.Contacts={}),void 0===i.Dynamics.Controllers&&(i.Dynamics.Controllers={}),void 0===i.Dynamics.Joints&&(i.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function n(){n.b2BoundValues.apply(this,arguments),this.constructor===n&&this.b2BoundValues.apply(this,arguments)}function r(){r.b2Collision.apply(this,arguments)}function o(){o.b2ContactID.apply(this,arguments),this.constructor===o&&this.b2ContactID.apply(this,arguments)}function s(){s.b2ContactPoint.apply(this,arguments)}function a(){a.b2Distance.apply(this,arguments)}function l(){l.b2DistanceInput.apply(this,arguments)}function u(){u.b2DistanceOutput.apply(this,arguments)}function h(){h.b2DistanceProxy.apply(this,arguments)}function c(){c.b2DynamicTree.apply(this,arguments),this.constructor===c&&this.b2DynamicTree.apply(this,arguments)}function p(){p.b2DynamicTreeBroadPhase.apply(this,arguments)}function f(){f.b2DynamicTreeNode.apply(this,arguments)}function m(){m.b2DynamicTreePair.apply(this,arguments)}function d(){d.b2Manifold.apply(this,arguments),this.constructor===d&&this.b2Manifold.apply(this,arguments)}function _(){_.b2ManifoldPoint.apply(this,arguments),this.constructor===_&&this.b2ManifoldPoint.apply(this,arguments)}function y(){y.b2Point.apply(this,arguments)}function v(){v.b2RayCastInput.apply(this,arguments),this.constructor===v&&this.b2RayCastInput.apply(this,arguments)}function x(){x.b2RayCastOutput.apply(this,arguments)}function b(){b.b2Segment.apply(this,arguments)}function g(){g.b2SeparationFunction.apply(this,arguments)}function w(){w.b2Simplex.apply(this,arguments),this.constructor===w&&this.b2Simplex.apply(this,arguments)}function S(){S.b2SimplexCache.apply(this,arguments)}function C(){C.b2SimplexVertex.apply(this,arguments)}function T(){T.b2TimeOfImpact.apply(this,arguments)}function A(){A.b2TOIInput.apply(this,arguments)}function M(){M.b2WorldManifold.apply(this,arguments),this.constructor===M&&this.b2WorldManifold.apply(this,arguments)}function E(){E.ClipVertex.apply(this,arguments)}function D(){D.Features.apply(this,arguments)}function P(){P.b2CircleShape.apply(this,arguments),this.constructor===P&&this.b2CircleShape.apply(this,arguments)}function I(){I.b2EdgeChainDef.apply(this,arguments),this.constructor===I&&this.b2EdgeChainDef.apply(this,arguments)}function O(){O.b2EdgeShape.apply(this,arguments),this.constructor===O&&this.b2EdgeShape.apply(this,arguments)}function R(){R.b2MassData.apply(this,arguments)}function B(){B.b2PolygonShape.apply(this,arguments),this.constructor===B&&this.b2PolygonShape.apply(this,arguments)}function L(){L.b2Shape.apply(this,arguments),this.constructor===L&&this.b2Shape.apply(this,arguments)}function F(){F.b2Color.apply(this,arguments),this.constructor===F&&this.b2Color.apply(this,arguments)}function V(){V.b2Settings.apply(this,arguments)}function k(){k.b2Mat22.apply(this,arguments),this.constructor===k&&this.b2Mat22.apply(this,arguments)}function N(){N.b2Mat33.apply(this,arguments),this.constructor===N&&this.b2Mat33.apply(this,arguments)}function G(){G.b2Math.apply(this,arguments)}function j(){j.b2Sweep.apply(this,arguments)}function U(){U.b2Transform.apply(this,arguments),this.constructor===U&&this.b2Transform.apply(this,arguments)}function J(){J.b2Vec2.apply(this,arguments),this.constructor===J&&this.b2Vec2.apply(this,arguments)}function X(){X.b2Vec3.apply(this,arguments),this.constructor===X&&this.b2Vec3.apply(this,arguments)}function W(){W.b2Body.apply(this,arguments),this.constructor===W&&this.b2Body.apply(this,arguments)}function z(){z.b2BodyDef.apply(this,arguments),this.constructor===z&&this.b2BodyDef.apply(this,arguments)}function H(){H.b2ContactFilter.apply(this,arguments)}function Y(){Y.b2ContactImpulse.apply(this,arguments)}function q(){q.b2ContactListener.apply(this,arguments)}function K(){K.b2ContactManager.apply(this,arguments),this.constructor===K&&this.b2ContactManager.apply(this,arguments)}function Z(){Z.b2DebugDraw.apply(this,arguments),this.constructor===Z&&this.b2DebugDraw.apply(this,arguments)}function Q(){Q.b2DestructionListener.apply(this,arguments)}function $(){$.b2FilterData.apply(this,arguments)}function tt(){tt.b2Fixture.apply(this,arguments),this.constructor===tt&&this.b2Fixture.apply(this,arguments)}function et(){et.b2FixtureDef.apply(this,arguments),this.constructor===et&&this.b2FixtureDef.apply(this,arguments)}function it(){it.b2Island.apply(this,arguments),this.constructor===it&&this.b2Island.apply(this,arguments)}function nt(){nt.b2TimeStep.apply(this,arguments)}function rt(){rt.b2World.apply(this,arguments),this.constructor===rt&&this.b2World.apply(this,arguments)}function ot(){ot.b2CircleContact.apply(this,arguments)}function st(){st.b2Contact.apply(this,arguments),this.constructor===st&&this.b2Contact.apply(this,arguments)}function at(){at.b2ContactConstraint.apply(this,arguments),this.constructor===at&&this.b2ContactConstraint.apply(this,arguments)}function lt(){lt.b2ContactConstraintPoint.apply(this,arguments)}function ut(){ut.b2ContactEdge.apply(this,arguments)}function ht(){ht.b2ContactFactory.apply(this,arguments),this.constructor===ht&&this.b2ContactFactory.apply(this,arguments)}function ct(){ct.b2ContactRegister.apply(this,arguments)}function pt(){pt.b2ContactResult.apply(this,arguments)}function ft(){ft.b2ContactSolver.apply(this,arguments),this.constructor===ft&&this.b2ContactSolver.apply(this,arguments)}function mt(){mt.b2EdgeAndCircleContact.apply(this,arguments)}function dt(){dt.b2NullContact.apply(this,arguments),this.constructor===dt&&this.b2NullContact.apply(this,arguments)}function _t(){_t.b2PolyAndCircleContact.apply(this,arguments)}function yt(){yt.b2PolyAndEdgeContact.apply(this,arguments)}function vt(){vt.b2PolygonContact.apply(this,arguments)}function xt(){xt.b2PositionSolverManifold.apply(this,arguments),this.constructor===xt&&this.b2PositionSolverManifold.apply(this,arguments)}function bt(){bt.b2BuoyancyController.apply(this,arguments)}function gt(){gt.b2ConstantAccelController.apply(this,arguments)}function wt(){wt.b2ConstantForceController.apply(this,arguments)}function St(){St.b2Controller.apply(this,arguments)}function Ct(){Ct.b2ControllerEdge.apply(this,arguments)}function Tt(){Tt.b2GravityController.apply(this,arguments)}function At(){At.b2TensorDampingController.apply(this,arguments)}function Mt(){Mt.b2DistanceJoint.apply(this,arguments),this.constructor===Mt&&this.b2DistanceJoint.apply(this,arguments)}function Et(){Et.b2DistanceJointDef.apply(this,arguments),this.constructor===Et&&this.b2DistanceJointDef.apply(this,arguments)}function Dt(){Dt.b2FrictionJoint.apply(this,arguments),this.constructor===Dt&&this.b2FrictionJoint.apply(this,arguments)}function Pt(){Pt.b2FrictionJointDef.apply(this,arguments),this.constructor===Pt&&this.b2FrictionJointDef.apply(this,arguments)}function It(){It.b2GearJoint.apply(this,arguments),this.constructor===It&&this.b2GearJoint.apply(this,arguments)}function Ot(){Ot.b2GearJointDef.apply(this,arguments),this.constructor===Ot&&this.b2GearJointDef.apply(this,arguments)}function Rt(){Rt.b2Jacobian.apply(this,arguments)}function Bt(){Bt.b2Joint.apply(this,arguments),this.constructor===Bt&&this.b2Joint.apply(this,arguments)}function Lt(){Lt.b2JointDef.apply(this,arguments),this.constructor===Lt&&this.b2JointDef.apply(this,arguments)}function Ft(){Ft.b2JointEdge.apply(this,arguments)}function Vt(){Vt.b2LineJoint.apply(this,arguments),this.constructor===Vt&&this.b2LineJoint.apply(this,arguments)}function kt(){kt.b2LineJointDef.apply(this,arguments),this.constructor===kt&&this.b2LineJointDef.apply(this,arguments)}function Nt(){Nt.b2MouseJoint.apply(this,arguments),this.constructor===Nt&&this.b2MouseJoint.apply(this,arguments)}function Gt(){Gt.b2MouseJointDef.apply(this,arguments),this.constructor===Gt&&this.b2MouseJointDef.apply(this,arguments)}function jt(){jt.b2PrismaticJoint.apply(this,arguments),this.constructor===jt&&this.b2PrismaticJoint.apply(this,arguments)}function Ut(){Ut.b2PrismaticJointDef.apply(this,arguments),this.constructor===Ut&&this.b2PrismaticJointDef.apply(this,arguments)}function Jt(){Jt.b2PulleyJoint.apply(this,arguments),this.constructor===Jt&&this.b2PulleyJoint.apply(this,arguments)}function Xt(){Xt.b2PulleyJointDef.apply(this,arguments),this.constructor===Xt&&this.b2PulleyJointDef.apply(this,arguments)}function Wt(){Wt.b2RevoluteJoint.apply(this,arguments),this.constructor===Wt&&this.b2RevoluteJoint.apply(this,arguments)}function zt(){zt.b2RevoluteJointDef.apply(this,arguments),this.constructor===zt&&this.b2RevoluteJointDef.apply(this,arguments)}function Ht(){Ht.b2WeldJoint.apply(this,arguments),this.constructor===Ht&&this.b2WeldJoint.apply(this,arguments)}function Yt(){Yt.b2WeldJointDef.apply(this,arguments),this.constructor===Yt&&this.b2WeldJointDef.apply(this,arguments)}i.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",i.Collision.b2AABB=t,i.Collision.b2Bound=e,i.Collision.b2BoundValues=n,i.Collision.b2Collision=r,i.Collision.b2ContactID=o,i.Collision.b2ContactPoint=s,i.Collision.b2Distance=a,i.Collision.b2DistanceInput=l,i.Collision.b2DistanceOutput=u,i.Collision.b2DistanceProxy=h,i.Collision.b2DynamicTree=c,i.Collision.b2DynamicTreeBroadPhase=p,i.Collision.b2DynamicTreeNode=f,i.Collision.b2DynamicTreePair=m,i.Collision.b2Manifold=d,i.Collision.b2ManifoldPoint=_,i.Collision.b2Point=y,i.Collision.b2RayCastInput=v,i.Collision.b2RayCastOutput=x,i.Collision.b2Segment=b,i.Collision.b2SeparationFunction=g,i.Collision.b2Simplex=w,i.Collision.b2SimplexCache=S,i.Collision.b2SimplexVertex=C,i.Collision.b2TimeOfImpact=T,i.Collision.b2TOIInput=A,i.Collision.b2WorldManifold=M,i.Collision.ClipVertex=E,i.Collision.Features=D,i.Collision.Shapes.b2CircleShape=P,i.Collision.Shapes.b2EdgeChainDef=I,i.Collision.Shapes.b2EdgeShape=O,i.Collision.Shapes.b2MassData=R,i.Collision.Shapes.b2PolygonShape=B,i.Collision.Shapes.b2Shape=L,i.Common.b2internal="Box2D.Common.b2internal",i.Common.b2Color=F,i.Common.b2Settings=V,i.Common.Math.b2Mat22=k,i.Common.Math.b2Mat33=N,i.Common.Math.b2Math=G,i.Common.Math.b2Sweep=j,i.Common.Math.b2Transform=U,i.Common.Math.b2Vec2=J,i.Common.Math.b2Vec3=X,i.Dynamics.b2Body=W,i.Dynamics.b2BodyDef=z,i.Dynamics.b2ContactFilter=H,i.Dynamics.b2ContactImpulse=Y,i.Dynamics.b2ContactListener=q,i.Dynamics.b2ContactManager=K,i.Dynamics.b2DebugDraw=Z,i.Dynamics.b2DestructionListener=Q,i.Dynamics.b2FilterData=$,i.Dynamics.b2Fixture=tt,i.Dynamics.b2FixtureDef=et,i.Dynamics.b2Island=it,i.Dynamics.b2TimeStep=nt,i.Dynamics.b2World=rt,i.Dynamics.Contacts.b2CircleContact=ot,i.Dynamics.Contacts.b2Contact=st,i.Dynamics.Contacts.b2ContactConstraint=at,i.Dynamics.Contacts.b2ContactConstraintPoint=lt,i.Dynamics.Contacts.b2ContactEdge=ut,i.Dynamics.Contacts.b2ContactFactory=ht,i.Dynamics.Contacts.b2ContactRegister=ct,i.Dynamics.Contacts.b2ContactResult=pt,i.Dynamics.Contacts.b2ContactSolver=ft,i.Dynamics.Contacts.b2EdgeAndCircleContact=mt,i.Dynamics.Contacts.b2NullContact=dt,i.Dynamics.Contacts.b2PolyAndCircleContact=_t,i.Dynamics.Contacts.b2PolyAndEdgeContact=yt,i.Dynamics.Contacts.b2PolygonContact=vt,i.Dynamics.Contacts.b2PositionSolverManifold=xt,i.Dynamics.Controllers.b2BuoyancyController=bt,i.Dynamics.Controllers.b2ConstantAccelController=gt,i.Dynamics.Controllers.b2ConstantForceController=wt,i.Dynamics.Controllers.b2Controller=St,i.Dynamics.Controllers.b2ControllerEdge=Ct,i.Dynamics.Controllers.b2GravityController=Tt,i.Dynamics.Controllers.b2TensorDampingController=At,i.Dynamics.Joints.b2DistanceJoint=Mt,i.Dynamics.Joints.b2DistanceJointDef=Et,i.Dynamics.Joints.b2FrictionJoint=Dt,i.Dynamics.Joints.b2FrictionJointDef=Pt,i.Dynamics.Joints.b2GearJoint=It,i.Dynamics.Joints.b2GearJointDef=Ot,i.Dynamics.Joints.b2Jacobian=Rt,i.Dynamics.Joints.b2Joint=Bt,i.Dynamics.Joints.b2JointDef=Lt,i.Dynamics.Joints.b2JointEdge=Ft,i.Dynamics.Joints.b2LineJoint=Vt,i.Dynamics.Joints.b2LineJointDef=kt,i.Dynamics.Joints.b2MouseJoint=Nt,i.Dynamics.Joints.b2MouseJointDef=Gt,i.Dynamics.Joints.b2PrismaticJoint=jt,i.Dynamics.Joints.b2PrismaticJointDef=Ut,i.Dynamics.Joints.b2PulleyJoint=Jt,i.Dynamics.Joints.b2PulleyJointDef=Xt,i.Dynamics.Joints.b2RevoluteJoint=Wt,i.Dynamics.Joints.b2RevoluteJointDef=zt,i.Dynamics.Joints.b2WeldJoint=Ht,i.Dynamics.Joints.b2WeldJointDef=Yt}(),i.postDefs=[],function(){var t=i.Collision.Shapes.b2CircleShape,e=(i.Collision.Shapes.b2EdgeChainDef,i.Collision.Shapes.b2EdgeShape,i.Collision.Shapes.b2MassData,i.Collision.Shapes.b2PolygonShape),o=i.Collision.Shapes.b2Shape,s=(i.Common.b2Color,i.Common.b2internal,i.Common.b2Settings),a=(i.Common.Math.b2Mat22,i.Common.Math.b2Mat33,i.Common.Math.b2Math),l=i.Common.Math.b2Sweep,u=i.Common.Math.b2Transform,h=i.Common.Math.b2Vec2,c=(i.Common.Math.b2Vec3,i.Collision.b2AABB),p=i.Collision.b2Bound,f=i.Collision.b2BoundValues,m=i.Collision.b2Collision,d=i.Collision.b2ContactID,_=i.Collision.b2ContactPoint,y=i.Collision.b2Distance,v=i.Collision.b2DistanceInput,x=i.Collision.b2DistanceOutput,b=i.Collision.b2DistanceProxy,g=i.Collision.b2DynamicTree,w=i.Collision.b2DynamicTreeBroadPhase,S=i.Collision.b2DynamicTreeNode,C=i.Collision.b2DynamicTreePair,T=i.Collision.b2Manifold,A=i.Collision.b2ManifoldPoint,M=i.Collision.b2Point,E=i.Collision.b2RayCastInput,D=i.Collision.b2RayCastOutput,P=i.Collision.b2Segment,I=i.Collision.b2SeparationFunction,O=i.Collision.b2Simplex,R=i.Collision.b2SimplexCache,B=i.Collision.b2SimplexVertex,L=i.Collision.b2TimeOfImpact,F=i.Collision.b2TOIInput,V=i.Collision.b2WorldManifold,k=i.Collision.ClipVertex,N=i.Collision.Features,G=i.Collision.IBroadPhase;c.b2AABB=function(){this.lowerBound=new h,this.upperBound=new h},c.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,i=t>=0&&e>=0;return i=i&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},c.prototype.GetCenter=function(){return new h((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},c.prototype.GetExtents=function(){return new h((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},c.prototype.Contains=function(t){var e=!0;return e=e&&this.lowerBound.x<=t.lowerBound.x,e=e&&this.lowerBound.y<=t.lowerBound.y,e=e&&t.upperBound.x<=this.upperBound.x,e=e&&t.upperBound.y<=this.upperBound.y},c.prototype.RayCast=function(t,e){var i=-Number.MAX_VALUE,n=Number.MAX_VALUE,r=e.p1.x,o=e.p1.y,s=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(s),u=Math.abs(a),h=t.normal,c=0,p=0,f=0,m=0,d=0;if(l<Number.MIN_VALUE){if(r<this.lowerBound.x||this.upperBound.x<r)return!1}else if(c=1/s,p=(this.lowerBound.x-r)*c,f=(this.upperBound.x-r)*c,d=-1,p>f&&(m=p,p=f,f=m,d=1),p>i&&(h.x=d,h.y=0,i=p),n=Math.min(n,f),i>n)return!1;if(u<Number.MIN_VALUE){if(o<this.lowerBound.y||this.upperBound.y<o)return!1}else if(c=1/a,p=(this.lowerBound.y-o)*c,f=(this.upperBound.y-o)*c,d=-1,p>f&&(m=p,p=f,f=m,d=1),p>i&&(h.y=d,h.x=0,i=p),n=Math.min(n,f),i>n)return!1;return t.fraction=i,!0},c.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,n=this.lowerBound.x-t.upperBound.x,r=this.lowerBound.y-t.upperBound.y;return!(e>0||i>0)&&!(n>0||r>0)},c.Combine=function(t,e){var i=new c;return i.Combine(t,e),i},c.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},p.b2Bound=function(){},p.prototype.IsLower=function(){return 0==(1&this.value)},p.prototype.IsUpper=function(){return 1==(1&this.value)},p.prototype.Swap=function(t){var e=this.value,i=this.proxy,n=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=i,t.stabbingCount=n},f.b2BoundValues=function(){},f.prototype.b2BoundValues=function(){this.lowerValues=new r,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new r,this.upperValues[0]=0,this.upperValues[1]=0},m.b2Collision=function(){},m.ClipSegmentToLine=function(t,e,i,n){void 0===n&&(n=0);var r,o=0;r=e[0];var s=r.v;r=e[1];var a=r.v,l=i.x*s.x+i.y*s.y-n,u=i.x*a.x+i.y*a.y-n;if(l<=0&&t[o++].Set(e[0]),u<=0&&t[o++].Set(e[1]),l*u<0){var h=l/(l-u);r=t[o];var c=r.v;c.x=s.x+h*(a.x-s.x),c.y=s.y+h*(a.y-s.y),r=t[o];var p;l>0?(p=e[0],r.id=p.id):(p=e[1],r.id=p.id),++o}return o},m.EdgeSeparation=function(t,e,i,n,r){void 0===i&&(i=0);var o,s,a=(parseInt(t.m_vertexCount),t.m_vertices),l=t.m_normals,u=parseInt(n.m_vertexCount),h=n.m_vertices;o=e.R,s=l[i];var c=o.col1.x*s.x+o.col2.x*s.y,p=o.col1.y*s.x+o.col2.y*s.y;o=r.R;for(var f=o.col1.x*c+o.col1.y*p,m=o.col2.x*c+o.col2.y*p,d=0,_=Number.MAX_VALUE,y=0;y<u;++y){s=h[y];var v=s.x*f+s.y*m;v<_&&(_=v,d=y)}s=a[i],o=e.R;var x=e.position.x+(o.col1.x*s.x+o.col2.x*s.y),b=e.position.y+(o.col1.y*s.x+o.col2.y*s.y);s=h[d],o=r.R;var g=r.position.x+(o.col1.x*s.x+o.col2.x*s.y),w=r.position.y+(o.col1.y*s.x+o.col2.y*s.y);return g-=x,w-=b,g*c+w*p},m.FindMaxSeparation=function(t,e,i,n,r){var o,s,a=parseInt(e.m_vertexCount),l=e.m_normals;s=r.R,o=n.m_centroid;var u=r.position.x+(s.col1.x*o.x+s.col2.x*o.y),h=r.position.y+(s.col1.y*o.x+s.col2.y*o.y);s=i.R,o=e.m_centroid,u-=i.position.x+(s.col1.x*o.x+s.col2.x*o.y),h-=i.position.y+(s.col1.y*o.x+s.col2.y*o.y);for(var c=u*i.R.col1.x+h*i.R.col1.y,p=u*i.R.col2.x+h*i.R.col2.y,f=0,d=-Number.MAX_VALUE,_=0;_<a;++_){o=l[_];var y=o.x*c+o.y*p;y>d&&(d=y,f=_)}var v=m.EdgeSeparation(e,i,f,n,r),x=parseInt(f-1>=0?f-1:a-1),b=m.EdgeSeparation(e,i,x,n,r),g=parseInt(f+1<a?f+1:0),w=m.EdgeSeparation(e,i,g,n,r),S=0,C=0,T=0;if(b>v&&b>w)T=-1,S=x,C=b;else{if(!(w>v))return t[0]=f,v;T=1,S=g,C=w}for(;;){if(f=T==-1?S-1>=0?S-1:a-1:S+1<a?S+1:0,!((v=m.EdgeSeparation(e,i,f,n,r))>C))break;S=f,C=v}return t[0]=S,C},m.FindIncidentEdge=function(t,e,i,n,r,o){void 0===n&&(n=0);var s,a,l=(parseInt(e.m_vertexCount),e.m_normals),u=parseInt(r.m_vertexCount),h=r.m_vertices,c=r.m_normals;s=i.R,a=l[n];var p=s.col1.x*a.x+s.col2.x*a.y,f=s.col1.y*a.x+s.col2.y*a.y;s=o.R;var m=s.col1.x*p+s.col1.y*f;f=s.col2.x*p+s.col2.y*f,p=m;for(var d=0,_=Number.MAX_VALUE,y=0;y<u;++y){a=c[y];var v=p*a.x+f*a.y;v<_&&(_=v,d=y)}var x,b=parseInt(d),g=parseInt(b+1<u?b+1:0);x=t[0],a=h[b],s=o.R,x.v.x=o.position.x+(s.col1.x*a.x+s.col2.x*a.y),x.v.y=o.position.y+(s.col1.y*a.x+s.col2.y*a.y),x.id.features.referenceEdge=n,x.id.features.incidentEdge=b,x.id.features.incidentVertex=0,x=t[1],a=h[g],s=o.R,x.v.x=o.position.x+(s.col1.x*a.x+s.col2.x*a.y),x.v.y=o.position.y+(s.col1.y*a.x+s.col2.y*a.y),x.id.features.referenceEdge=n,x.id.features.incidentEdge=g,x.id.features.incidentVertex=1},m.MakeClipPointVector=function(){var t=new n(2);return t[0]=new k,t[1]=new k,t},m.CollidePolygons=function(t,e,i,n,r){var o;t.m_pointCount=0;var a=e.m_radius+n.m_radius,l=0;m.s_edgeAO[0]=l;var u=m.FindMaxSeparation(m.s_edgeAO,e,i,n,r);if(l=m.s_edgeAO[0],!(u>a)){var h=0;m.s_edgeBO[0]=h;var c=m.FindMaxSeparation(m.s_edgeBO,n,r,e,i);if(h=m.s_edgeBO[0],!(c>a)){var p,f,d,_,y,v=0,x=0;c>.98*u+.001?(p=n,f=e,d=r,_=i,v=h,t.m_type=T.e_faceB,x=1):(p=e,f=n,d=i,_=r,v=l,t.m_type=T.e_faceA,x=0);var b=m.s_incidentEdge;m.FindIncidentEdge(b,p,d,v,f,_);var g,w=parseInt(p.m_vertexCount),S=p.m_vertices,C=S[v];g=v+1<w?S[parseInt(v+1)]:S[0];var A=m.s_localTangent;A.Set(g.x-C.x,g.y-C.y),A.Normalize();var M=m.s_localNormal;M.x=A.y,M.y=-A.x;var E=m.s_planePoint;E.Set(.5*(C.x+g.x),.5*(C.y+g.y));var D=m.s_tangent;y=d.R,D.x=y.col1.x*A.x+y.col2.x*A.y,D.y=y.col1.y*A.x+y.col2.y*A.y;var P=m.s_tangent2;P.x=-D.x,P.y=-D.y;var I=m.s_normal;I.x=D.y,I.y=-D.x;var O=m.s_v11,R=m.s_v12;O.x=d.position.x+(y.col1.x*C.x+y.col2.x*C.y),O.y=d.position.y+(y.col1.y*C.x+y.col2.y*C.y),R.x=d.position.x+(y.col1.x*g.x+y.col2.x*g.y),R.y=d.position.y+(y.col1.y*g.x+y.col2.y*g.y);var B=I.x*O.x+I.y*O.y,L=-D.x*O.x-D.y*O.y+a,F=D.x*R.x+D.y*R.y+a,V=m.s_clipPoints1,k=m.s_clipPoints2;if(!(m.ClipSegmentToLine(V,b,P,L)<2||m.ClipSegmentToLine(k,V,D,F)<2)){t.m_localPlaneNormal.SetV(M),t.m_localPoint.SetV(E);for(var N=0,G=0;G<s.b2_maxManifoldPoints;++G){o=k[G];if(I.x*o.v.x+I.y*o.v.y-B<=a){var j=t.m_points[N];y=_.R;var U=o.v.x-_.position.x,J=o.v.y-_.position.y;j.m_localPoint.x=U*y.col1.x+J*y.col1.y,j.m_localPoint.y=U*y.col2.x+J*y.col2.y,j.m_id.Set(o.id),j.m_id.features.flip=x,++N}}t.m_pointCount=N}}}},m.CollideCircles=function(t,e,i,n,r){t.m_pointCount=0;var o,s;o=i.R,s=e.m_p;var a=i.position.x+(o.col1.x*s.x+o.col2.x*s.y),l=i.position.y+(o.col1.y*s.x+o.col2.y*s.y);o=r.R,s=n.m_p;var u=r.position.x+(o.col1.x*s.x+o.col2.x*s.y),h=r.position.y+(o.col1.y*s.x+o.col2.y*s.y),c=u-a,p=h-l,f=c*c+p*p,m=e.m_radius+n.m_radius;f>m*m||(t.m_type=T.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0)},m.CollidePolygonAndCircle=function(t,e,i,n,r){t.m_pointCount=0;var o,s,a=0,l=0;s=r.R,o=n.m_p;var u=r.position.x+(s.col1.x*o.x+s.col2.x*o.y),h=r.position.y+(s.col1.y*o.x+s.col2.y*o.y);a=u-i.position.x,l=h-i.position.y,s=i.R;for(var c=a*s.col1.x+l*s.col1.y,p=a*s.col2.x+l*s.col2.y,f=0,m=-Number.MAX_VALUE,d=e.m_radius+n.m_radius,_=parseInt(e.m_vertexCount),y=e.m_vertices,v=e.m_normals,x=0;x<_;++x){o=y[x],a=c-o.x,l=p-o.y,o=v[x];var b=o.x*a+o.y*l;if(b>d)return;b>m&&(m=b,f=x)}var g=parseInt(f),w=parseInt(g+1<_?g+1:0),S=y[g],C=y[w];if(m<Number.MIN_VALUE)return t.m_pointCount=1,t.m_type=T.e_faceA,t.m_localPlaneNormal.SetV(v[f]),t.m_localPoint.x=.5*(S.x+C.x),t.m_localPoint.y=.5*(S.y+C.y),t.m_points[0].m_localPoint.SetV(n.m_p),void(t.m_points[0].m_id.key=0);var A=(c-S.x)*(C.x-S.x)+(p-S.y)*(C.y-S.y),M=(c-C.x)*(S.x-C.x)+(p-C.y)*(S.y-C.y);if(A<=0){if((c-S.x)*(c-S.x)+(p-S.y)*(p-S.y)>d*d)return;t.m_pointCount=1,t.m_type=T.e_faceA,t.m_localPlaneNormal.x=c-S.x,t.m_localPlaneNormal.y=p-S.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(S),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}else if(M<=0){if((c-C.x)*(c-C.x)+(p-C.y)*(p-C.y)>d*d)return;t.m_pointCount=1,t.m_type=T.e_faceA,t.m_localPlaneNormal.x=c-C.x,t.m_localPlaneNormal.y=p-C.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(C),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}else{var E=.5*(S.x+C.x),D=.5*(S.y+C.y);if((m=(c-E)*v[g].x+(p-D)*v[g].y)>d)return;t.m_pointCount=1,t.m_type=T.e_faceA,t.m_localPlaneNormal.x=v[g].x,t.m_localPlaneNormal.y=v[g].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(E,D),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}},m.TestOverlap=function(t,e){var i=e.lowerBound,n=t.upperBound,r=i.x-n.x,o=i.y-n.y;i=t.lowerBound,n=e.upperBound;var s=i.x-n.x,a=i.y-n.y;return!(r>0||o>0)&&!(s>0||a>0)},i.postDefs.push(function(){i.Collision.b2Collision.s_incidentEdge=m.MakeClipPointVector(),i.Collision.b2Collision.s_clipPoints1=m.MakeClipPointVector(),i.Collision.b2Collision.s_clipPoints2=m.MakeClipPointVector(),i.Collision.b2Collision.s_edgeAO=new r(1),i.Collision.b2Collision.s_edgeBO=new r(1),i.Collision.b2Collision.s_localTangent=new h,i.Collision.b2Collision.s_localNormal=new h,i.Collision.b2Collision.s_planePoint=new h,i.Collision.b2Collision.s_normal=new h,i.Collision.b2Collision.s_tangent=new h,i.Collision.b2Collision.s_tangent2=new h,i.Collision.b2Collision.s_v11=new h,i.Collision.b2Collision.s_v12=new h,i.Collision.b2Collision.b2CollidePolyTempVec=new h,i.Collision.b2Collision.b2_nullFeature=255}),d.b2ContactID=function(){this.features=new N},d.prototype.b2ContactID=function(){this.features._m_id=this},d.prototype.Set=function(t){this.key=t._key},d.prototype.Copy=function(){var t=new d;return t.key=this.key,t},Object.defineProperty(d.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(d.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}),_.b2ContactPoint=function(){this.position=new h,this.velocity=new h,this.normal=new h,this.id=new d},y.b2Distance=function(){},y.Distance=function(t,e,i){++y.b2_gjkCalls;var n=i.proxyA,r=i.proxyB,o=i.transformA,l=i.transformB,u=y.s_simplex;u.ReadCache(e,n,o,r,l);for(var c,p=u.m_vertices,f=y.s_saveA,m=y.s_saveB,d=0,_=u.GetClosestPoint(),v=_.LengthSquared(),x=v,b=0,g=0;g<20;){for(d=u.m_count,b=0;b<d;b++)f[b]=p[b].indexA,m[b]=p[b].indexB;switch(u.m_count){case 1:break;case 2:u.Solve2();break;case 3:u.Solve3();break;default:s.b2Assert(!1)}if(3==u.m_count)break;c=u.GetClosestPoint(),x=c.LengthSquared(),v=x;var w=u.GetSearchDirection();if(w.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var S=p[u.m_count];S.indexA=n.GetSupport(a.MulTMV(o.R,w.GetNegative())),S.wA=a.MulX(o,n.GetVertex(S.indexA)),S.indexB=r.GetSupport(a.MulTMV(l.R,w)),S.wB=a.MulX(l,r.GetVertex(S.indexB)),S.w=a.SubtractVV(S.wB,S.wA),++g,++y.b2_gjkIters;var C=!1;for(b=0;b<d;b++)if(S.indexA==f[b]&&S.indexB==m[b]){C=!0;break}if(C)break;++u.m_count}if(y.b2_gjkMaxIters=a.Max(y.b2_gjkMaxIters,g),u.GetWitnessPoints(t.pointA,t.pointB),t.distance=a.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=g,u.WriteCache(e),i.useRadii){var T=n.m_radius,A=r.m_radius;if(t.distance>T+A&&t.distance>Number.MIN_VALUE){t.distance-=T+A;var M=a.SubtractVV(t.pointB,t.pointA);M.Normalize(),t.pointA.x+=T*M.x,t.pointA.y+=T*M.y,t.pointB.x-=A*M.x,t.pointB.y-=A*M.y}else c=new h,c.x=.5*(t.pointA.x+t.pointB.x),c.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=c.x,t.pointA.y=t.pointB.y=c.y,t.distance=0}},i.postDefs.push(function(){i.Collision.b2Distance.s_simplex=new O,i.Collision.b2Distance.s_saveA=new r(3),i.Collision.b2Distance.s_saveB=new r(3)}),v.b2DistanceInput=function(){},x.b2DistanceOutput=function(){this.pointA=new h,this.pointB=new h},b.b2DistanceProxy=function(){},b.prototype.Set=function(i){switch(i.GetType()){case o.e_circleShape:var r=i instanceof t?i:null;this.m_vertices=new n(1,!0),this.m_vertices[0]=r.m_p,this.m_count=1,this.m_radius=r.m_radius;break;case o.e_polygonShape:var a=i instanceof e?i:null;this.m_vertices=a.m_vertices,this.m_count=a.m_vertexCount,this.m_radius=a.m_radius;break;default:s.b2Assert(!1)}},b.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var r=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;r>i&&(e=n,i=r)}return e},b.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var r=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;r>i&&(e=n,i=r)}return this.m_vertices[e]},b.prototype.GetVertexCount=function(){return this.m_count},b.prototype.GetVertex=function(t){return void 0===t&&(t=0),s.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},g.b2DynamicTree=function(){},g.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},g.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),n=s.b2_aabbExtension,r=s.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-r,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+r,i.userData=e,this.InsertLeaf(i),i},g.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},g.prototype.MoveProxy=function(t,e,i){if(s.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var n=s.b2_aabbExtension+s.b2_aabbMultiplier*(i.x>0?i.x:-i.x),r=s.b2_aabbExtension+s.b2_aabbMultiplier*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-r,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+r,this.InsertLeaf(t),!0},g.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;e<t;e++){for(var i=this.m_root,n=0;0==i.IsLeaf();)i=this.m_path>>n&1?i.child2:i.child1,n=n+1&31;++this.m_path,this.RemoveLeaf(i),this.InsertLeaf(i)}},g.prototype.GetFatAABB=function(t){return t.aabb},g.prototype.GetUserData=function(t){return t.userData},g.prototype.Query=function(t,e){if(null!=this.m_root){var i=new n,r=0;for(i[r++]=this.m_root;r>0;){var o=i[--r];if(o.aabb.TestOverlap(e))if(o.IsLeaf()){var s=t(o);if(!s)return}else i[r++]=o.child1,i[r++]=o.child2}}},g.prototype.RayCast=function(t,e){if(null!=this.m_root){var i=e.p1,r=e.p2,o=a.SubtractVV(i,r);o.Normalize();var s=a.CrossFV(1,o),l=a.AbsV(s),u=e.maxFraction,h=new c,p=0,f=0;p=i.x+u*(r.x-i.x),f=i.y+u*(r.y-i.y),h.lowerBound.x=Math.min(i.x,p),h.lowerBound.y=Math.min(i.y,f),h.upperBound.x=Math.max(i.x,p),h.upperBound.y=Math.max(i.y,f);var m=new n,d=0;for(m[d++]=this.m_root;d>0;){var _=m[--d];if(0!=_.aabb.TestOverlap(h)){var y=_.aabb.GetCenter(),v=_.aabb.GetExtents();if(!(Math.abs(s.x*(i.x-y.x)+s.y*(i.y-y.y))-l.x*v.x-l.y*v.y>0))if(_.IsLeaf()){var x=new E;if(x.p1=e.p1,x.p2=e.p2,x.maxFraction=e.maxFraction,0==(u=t(x,_)))return;u>0&&(p=i.x+u*(r.x-i.x),f=i.y+u*(r.y-i.y),h.lowerBound.x=Math.min(i.x,p),h.lowerBound.y=Math.min(i.y,f),h.upperBound.x=Math.max(i.x,p),h.upperBound.y=Math.max(i.y,f))}else m[d++]=_.child1,m[d++]=_.child2}}}},g.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new S},g.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},g.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);var e=t.aabb.GetCenter(),i=this.m_root;if(0==i.IsLeaf())do{var n=i.child1,r=i.child2,o=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y),s=Math.abs((r.aabb.lowerBound.x+r.aabb.upperBound.x)/2-e.x)+Math.abs((r.aabb.lowerBound.y+r.aabb.upperBound.y)/2-e.y);i=o<s?n:r}while(0==i.IsLeaf());var a=i.parent,l=this.AllocateNode();if(l.parent=a,l.userData=null,l.aabb.Combine(t.aabb,i.aabb),a){i.parent.child1==i?a.child1=l:a.child2=l,l.child1=i,l.child2=t,i.parent=l,t.parent=l;do{if(a.aabb.Contains(l.aabb))break;a.aabb.Combine(a.child1.aabb,a.child2.aabb),l=a,a=a.parent}while(a)}else l.child1=i,l.child2=t,i.parent=l,t.parent=l,this.m_root=l},g.prototype.RemoveLeaf=function(t){if(t==this.m_root)return void(this.m_root=null);var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,n)for(n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.FreeNode(i);n;){var r=n.aabb;if(n.aabb=c.Combine(n.child1.aabb,n.child2.aabb),r.Contains(n.aabb))break;n=n.parent}else this.m_root=e,e.parent=null,this.FreeNode(i)},w.b2DynamicTreeBroadPhase=function(){this.m_tree=new g,this.m_moveBuffer=new n,this.m_pairBuffer=new n,this.m_pairCount=0},w.prototype.CreateProxy=function(t,e){var i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i},w.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},w.prototype.MoveProxy=function(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)},w.prototype.TestOverlap=function(t,e){var i=this.m_tree.GetFatAABB(t),n=this.m_tree.GetFatAABB(e);return i.TestOverlap(n)},w.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},w.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},w.prototype.GetProxyCount=function(){return this.m_proxyCount},w.prototype.UpdatePairs=function(t){function e(t){if(t==n)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new C);var e=i.m_pairBuffer[i.m_pairCount];return e.proxyA=t<n?t:n,e.proxyB=t>=n?t:n,++i.m_pairCount,!0}var i=this;i.m_pairCount=0;var n,r=0;for(r=0;r<i.m_moveBuffer.length;++r){n=i.m_moveBuffer[r];var o=i.m_tree.GetFatAABB(n);i.m_tree.Query(e,o)}i.m_moveBuffer.length=0;for(var r=0;r<i.m_pairCount;){var s=i.m_pairBuffer[r],a=i.m_tree.GetUserData(s.proxyA),l=i.m_tree.GetUserData(s.proxyB);for(t(a,l),++r;r<i.m_pairCount;){var u=i.m_pairBuffer[r];if(u.proxyA!=s.proxyA||u.proxyB!=s.proxyB)break;++r}}},w.prototype.Query=function(t,e){this.m_tree.Query(t,e)},w.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},w.prototype.Validate=function(){},w.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},w.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},w.prototype.UnBufferMove=function(t){var e=parseInt(this.m_moveBuffer.indexOf(t));this.m_moveBuffer.splice(e,1)},w.prototype.ComparePairs=function(t,e){return 0},w.__implements={},w.__implements[G]=!0,S.b2DynamicTreeNode=function(){this.aabb=new c},S.prototype.IsLeaf=function(){return null==this.child1},C.b2DynamicTreePair=function(){},T.b2Manifold=function(){this.m_pointCount=0},T.prototype.b2Manifold=function(){this.m_points=new n(s.b2_maxManifoldPoints);for(var t=0;t<s.b2_maxManifoldPoints;t++)this.m_points[t]=new A;this.m_localPlaneNormal=new h,this.m_localPoint=new h},T.prototype.Reset=function(){for(var t=0;t<s.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof A?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},T.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;e<s.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof A?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},T.prototype.Copy=function(){var t=new T;return t.Set(this),t},i.postDefs.push(function(){i.Collision.b2Manifold.e_circles=1,i.Collision.b2Manifold.e_faceA=2,i.Collision.b2Manifold.e_faceB=4}),A.b2ManifoldPoint=function(){this.m_localPoint=new h,this.m_id=new d},A.prototype.b2ManifoldPoint=function(){this.Reset()},A.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},A.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},M.b2Point=function(){this.p=new h},M.prototype.Support=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.p},M.prototype.GetFirstVertex=function(t){return this.p},E.b2RayCastInput=function(){this.p1=new h,this.p2=new h},E.prototype.b2RayCastInput=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=i},D.b2RayCastOutput=function(){this.normal=new h},P.b2Segment=function(){this.p1=new h,this.p2=new h},P.prototype.TestSegment=function(t,e,i,n){void 0===n&&(n=0);var r=i.p1,o=i.p2.x-r.x,s=i.p2.y-r.y,a=this.p2.x-this.p1.x,l=this.p2.y-this.p1.y,u=l,h=-a,c=100*Number.MIN_VALUE,p=-(o*u+s*h);if(p>c){var f=r.x-this.p1.x,m=r.y-this.p1.y,d=f*u+m*h;if(0<=d&&d<=n*p){var _=-o*m+s*f;if(-c*p<=_&&_<=p*(1+c)){d/=p;var y=Math.sqrt(u*u+h*h);return u/=y,h/=y,t[0]=d,e.Set(u,h),!0}}}return!1},P.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},P.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y,n=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:e<0?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p1.y)/i:i<0?(t.lowerBound.y-this.p1.y)/i:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+e*n,this.p2.y=this.p1.y+i*n},P.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,i=-this.p2.y+this.p1.y,n=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:e<0?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p2.y)/i:i<0?(t.lowerBound.y-this.p2.y)/i:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+e*n,this.p1.y=this.p2.y+i*n},I.b2SeparationFunction=function(){this.m_localPoint=new h,this.m_axis=new h},I.prototype.Initialize=function(t,e,i,n,r){this.m_proxyA=e,this.m_proxyB=n;var o=parseInt(t.count);s.b2Assert(0<o&&o<3);var l,u,c,p,f,m,d,_,y=0,v=0,x=0,b=0,g=0,w=0,S=0;if(1==o)this.m_type=I.e_points,l=this.m_proxyA.GetVertex(t.indexA[0]),p=this.m_proxyB.GetVertex(t.indexB[0]),_=l,d=i.R,y=i.position.x+(d.col1.x*_.x+d.col2.x*_.y),v=i.position.y+(d.col1.y*_.x+d.col2.y*_.y),_=p,d=r.R,x=r.position.x+(d.col1.x*_.x+d.col2.x*_.y),b=r.position.y+(d.col1.y*_.x+d.col2.y*_.y),this.m_axis.x=x-y,this.m_axis.y=b-v,this.m_axis.Normalize();else if(t.indexB[0]==t.indexB[1])this.m_type=I.e_faceA,u=this.m_proxyA.GetVertex(t.indexA[0]),c=this.m_proxyA.GetVertex(t.indexA[1]),p=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(u.x+c.x),this.m_localPoint.y=.5*(u.y+c.y),this.m_axis=a.CrossVF(a.SubtractVV(c,u),1),this.m_axis.Normalize(),_=this.m_axis,d=i.R,g=d.col1.x*_.x+d.col2.x*_.y,w=d.col1.y*_.x+d.col2.y*_.y,_=this.m_localPoint,d=i.R,y=i.position.x+(d.col1.x*_.x+d.col2.x*_.y),v=i.position.y+(d.col1.y*_.x+d.col2.y*_.y),_=p,d=r.R,x=r.position.x+(d.col1.x*_.x+d.col2.x*_.y),b=r.position.y+(d.col1.y*_.x+d.col2.y*_.y),(S=(x-y)*g+(b-v)*w)<0&&this.m_axis.NegativeSelf();else if(t.indexA[0]==t.indexA[0])this.m_type=I.e_faceB,f=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]),l=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(f.x+m.x),this.m_localPoint.y=.5*(f.y+m.y),this.m_axis=a.CrossVF(a.SubtractVV(m,f),1),this.m_axis.Normalize(),_=this.m_axis,d=r.R,g=d.col1.x*_.x+d.col2.x*_.y,w=d.col1.y*_.x+d.col2.y*_.y,_=this.m_localPoint,d=r.R,x=r.position.x+(d.col1.x*_.x+d.col2.x*_.y),b=r.position.y+(d.col1.y*_.x+d.col2.y*_.y),_=l,d=i.R,y=i.position.x+(d.col1.x*_.x+d.col2.x*_.y),v=i.position.y+(d.col1.y*_.x+d.col2.y*_.y),(S=(y-x)*g+(v-b)*w)<0&&this.m_axis.NegativeSelf();else{u=this.m_proxyA.GetVertex(t.indexA[0]),c=this.m_proxyA.GetVertex(t.indexA[1]),f=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]);var C=(a.MulX(i,l),a.MulMV(i.R,a.SubtractVV(c,u))),T=(a.MulX(r,p),a.MulMV(r.R,a.SubtractVV(m,f))),A=C.x*C.x+C.y*C.y,M=T.x*T.x+T.y*T.y,E=a.SubtractVV(T,C),D=C.x*E.x+C.y*E.y,P=T.x*E.x+T.y*E.y,O=C.x*T.x+C.y*T.y,R=A*M-O*O;S=0,0!=R&&(S=a.Clamp((O*P-D*M)/R,0,1));var B=(O*S+P)/M;B<0&&(B=0,S=a.Clamp((O-D)/A,0,1)),l=new h,l.x=u.x+S*(c.x-u.x),l.y=u.y+S*(c.y-u.y),p=new h,p.x=f.x+S*(m.x-f.x),p.y=f.y+S*(m.y-f.y),0==S||1==S?(this.m_type=I.e_faceB,this.m_axis=a.CrossVF(a.SubtractVV(m,f),1),this.m_axis.Normalize(),this.m_localPoint=p,_=this.m_axis,d=r.R,g=d.col1.x*_.x+d.col2.x*_.y,w=d.col1.y*_.x+d.col2.y*_.y,_=this.m_localPoint,d=r.R,x=r.position.x+(d.col1.x*_.x+d.col2.x*_.y),b=r.position.y+(d.col1.y*_.x+d.col2.y*_.y),_=l,d=i.R,y=i.position.x+(d.col1.x*_.x+d.col2.x*_.y),v=i.position.y+(d.col1.y*_.x+d.col2.y*_.y),(y-x)*g+(v-b)*w,S<0&&this.m_axis.NegativeSelf()):(this.m_type=I.e_faceA,this.m_axis=a.CrossVF(a.SubtractVV(c,u),1),this.m_localPoint=l,_=this.m_axis,d=i.R,g=d.col1.x*_.x+d.col2.x*_.y,w=d.col1.y*_.x+d.col2.y*_.y,_=this.m_localPoint,d=i.R,y=i.position.x+(d.col1.x*_.x+d.col2.x*_.y),v=i.position.y+(d.col1.y*_.x+d.col2.y*_.y),_=p,d=r.R,x=r.position.x+(d.col1.x*_.x+d.col2.x*_.y),b=r.position.y+(d.col1.y*_.x+d.col2.y*_.y),(x-y)*g+(b-v)*w,S<0&&this.m_axis.NegativeSelf())}},I.prototype.Evaluate=function(t,e){var i,n,r,o,l,u,h;switch(this.m_type){case I.e_points:return i=a.MulTMV(t.R,this.m_axis),n=a.MulTMV(e.R,this.m_axis.GetNegative()),r=this.m_proxyA.GetSupportVertex(i),o=this.m_proxyB.GetSupportVertex(n),l=a.MulX(t,r),u=a.MulX(e,o),(u.x-l.x)*this.m_axis.x+(u.y-l.y)*this.m_axis.y;case I.e_faceA:return h=a.MulMV(t.R,this.m_axis),l=a.MulX(t,this.m_localPoint),n=a.MulTMV(e.R,h.GetNegative()),o=this.m_proxyB.GetSupportVertex(n),u=a.MulX(e,o),(u.x-l.x)*h.x+(u.y-l.y)*h.y;case I.e_faceB:return h=a.MulMV(e.R,this.m_axis),u=a.MulX(e,this.m_localPoint),i=a.MulTMV(t.R,h.GetNegative()),r=this.m_proxyA.GetSupportVertex(i),l=a.MulX(t,r),(l.x-u.x)*h.x+(l.y-u.y)*h.y;default:return s.b2Assert(!1),0}},i.postDefs.push(function(){i.Collision.b2SeparationFunction.e_points=1,i.Collision.b2SeparationFunction.e_faceA=2,i.Collision.b2SeparationFunction.e_faceB=4}),O.b2Simplex=function(){this.m_v1=new B,this.m_v2=new B,this.m_v3=new B,this.m_vertices=new n(3)},O.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},O.prototype.ReadCache=function(t,e,i,n,r){s.b2Assert(0<=t.count&&t.count<=3);var o,l;this.m_count=t.count;for(var u=this.m_vertices,h=0;h<this.m_count;h++){var c=u[h];c.indexA=t.indexA[h],c.indexB=t.indexB[h],o=e.GetVertex(c.indexA),l=n.GetVertex(c.indexB),c.wA=a.MulX(i,o),c.wB=a.MulX(r,l),c.w=a.SubtractVV(c.wB,c.wA),c.a=0}if(this.m_count>1){var p=t.metric,f=this.GetMetric();(f<.5*p||2*p<f||f<Number.MIN_VALUE)&&(this.m_count=0)}0==this.m_count&&(c=u[0],c.indexA=0,c.indexB=0,o=e.GetVertex(0),l=n.GetVertex(0),c.wA=a.MulX(i,o),c.wB=a.MulX(r,l),c.w=a.SubtractVV(c.wB,c.wA),this.m_count=1)},O.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=i.parseUInt(this.m_count);for(var e=this.m_vertices,n=0;n<this.m_count;n++)t.indexA[n]=i.parseUInt(e[n].indexA),t.indexB[n]=i.parseUInt(e[n].indexB)},O.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=a.SubtractVV(this.m_v2.w,this.m_v1.w);return a.CrossVV(t,this.m_v1.w.GetNegative())>0?a.CrossFV(1,t):a.CrossVF(t,1);default:return s.b2Assert(!1),new h}},O.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return s.b2Assert(!1),new h;case 1:return this.m_v1.w;case 2:return new h(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return s.b2Assert(!1),new h}},O.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:s.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:s.b2Assert(!1)}},O.prototype.GetMetric=function(){switch(this.m_count){case 0:return s.b2Assert(!1),0;case 1:return 0;case 2:return a.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return a.CrossVV(a.SubtractVV(this.m_v2.w,this.m_v1.w),a.SubtractVV(this.m_v3.w,this.m_v1.w));default:return s.b2Assert(!1),0}},O.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=a.SubtractVV(e,t),n=-(t.x*i.x+t.y*i.y);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var r=e.x*i.x+e.y*i.y;if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);var o=1/(r+n);this.m_v1.a=r*o,this.m_v2.a=n*o,this.m_count=2},O.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=a.SubtractVV(e,t),r=a.Dot(t,n),o=a.Dot(e,n),s=o,l=-r,u=a.SubtractVV(i,t),h=a.Dot(t,u),c=a.Dot(i,u),p=c,f=-h,m=a.SubtractVV(i,e),d=a.Dot(e,m),_=a.Dot(i,m),y=_,v=-d,x=a.CrossVV(n,u),b=x*a.CrossVV(e,i),g=x*a.CrossVV(i,t),w=x*a.CrossVV(t,e);if(l<=0&&f<=0)return this.m_v1.a=1,void(this.m_count=1);if(s>0&&l>0&&w<=0){var S=1/(s+l);return this.m_v1.a=s*S,this.m_v2.a=l*S,void(this.m_count=2)}if(p>0&&f>0&&g<=0){var C=1/(p+f);return this.m_v1.a=p*C,this.m_v3.a=f*C,this.m_count=2,void this.m_v2.Set(this.m_v3)}if(s<=0&&v<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);if(p<=0&&y<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Set(this.m_v3);if(y>0&&v>0&&b<=0){var T=1/(y+v);return this.m_v2.a=y*T,this.m_v3.a=v*T,this.m_count=2,void this.m_v1.Set(this.m_v3)}var A=1/(b+g+w);this.m_v1.a=b*A,this.m_v2.a=g*A,this.m_v3.a=w*A,this.m_count=3},R.b2SimplexCache=function(){this.indexA=new r(3),this.indexB=new r(3)},B.b2SimplexVertex=function(){},B.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},L.b2TimeOfImpact=function(){},L.TimeOfImpact=function(t){++L.b2_toiCalls;var e=t.proxyA,i=t.proxyB,n=t.sweepA,r=t.sweepB;s.b2Assert(n.t0==r.t0),s.b2Assert(1-n.t0>Number.MIN_VALUE);var o=e.m_radius+i.m_radius,l=t.tolerance,u=0,h=0,c=0;for(L.s_cache.count=0,L.s_distanceInput.useRadii=!1;;){if(n.GetTransform(L.s_xfA,u),r.GetTransform(L.s_xfB,u),L.s_distanceInput.proxyA=e,L.s_distanceInput.proxyB=i,L.s_distanceInput.transformA=L.s_xfA,L.s_distanceInput.transformB=L.s_xfB,y.Distance(L.s_distanceOutput,L.s_cache,L.s_distanceInput),L.s_distanceOutput.distance<=0){u=1;break}L.s_fcn.Initialize(L.s_cache,e,L.s_xfA,i,L.s_xfB);var p=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(p<=0){u=1;break}if(0==h&&(c=p>o?a.Max(o-l,.75*o):a.Max(p-l,.02*o)),p-c<.5*l){if(0==h){u=1;break}break}var f=u,m=u,d=1,_=p;n.GetTransform(L.s_xfA,d),r.GetTransform(L.s_xfB,d);var v=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(v>=c){u=1;break}for(var x=0;;){var b=0;b=1&x?m+(c-_)*(d-m)/(v-_):.5*(m+d),n.GetTransform(L.s_xfA,b),r.GetTransform(L.s_xfB,b);var g=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(a.Abs(g-c)<.025*l){f=b;break}if(g>c?(m=b,_=g):(d=b,v=g),++x,++L.b2_toiRootIters,50==x)break}if(L.b2_toiMaxRootIters=a.Max(L.b2_toiMaxRootIters,x),f<(1+100*Number.MIN_VALUE)*u)break;if(u=f,h++,++L.b2_toiIters,1e3==h)break}return L.b2_toiMaxIters=a.Max(L.b2_toiMaxIters,h),u},i.postDefs.push(function(){i.Collision.b2TimeOfImpact.b2_toiCalls=0,i.Collision.b2TimeOfImpact.b2_toiIters=0,i.Collision.b2TimeOfImpact.b2_toiMaxIters=0,i.Collision.b2TimeOfImpact.b2_toiRootIters=0,i.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,i.Collision.b2TimeOfImpact.s_cache=new R,i.Collision.b2TimeOfImpact.s_distanceInput=new v,i.Collision.b2TimeOfImpact.s_xfA=new u,i.Collision.b2TimeOfImpact.s_xfB=new u,i.Collision.b2TimeOfImpact.s_fcn=new I,i.Collision.b2TimeOfImpact.s_distanceOutput=new x}),F.b2TOIInput=function(){this.proxyA=new b,this.proxyB=new b,this.sweepA=new l,this.sweepB=new l},V.b2WorldManifold=function(){this.m_normal=new h},V.prototype.b2WorldManifold=function(){this.m_points=new n(s.b2_maxManifoldPoints);for(var t=0;t<s.b2_maxManifoldPoints;t++)this.m_points[t]=new h},V.prototype.Initialize=function(t,e,i,n,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0!=t.m_pointCount){var o,s,a=0,l=0,u=0,h=0,c=0,p=0,f=0;switch(t.m_type){case T.e_circles:s=e.R,o=t.m_localPoint;var m=e.position.x+s.col1.x*o.x+s.col2.x*o.y,d=e.position.y+s.col1.y*o.x+s.col2.y*o.y;s=n.R,o=t.m_points[0].m_localPoint;var _=n.position.x+s.col1.x*o.x+s.col2.x*o.y,y=n.position.y+s.col1.y*o.x+s.col2.y*o.y,v=_-m,x=y-d,b=v*v+x*x;if(b>Number.MIN_VALUE*Number.MIN_VALUE){var g=Math.sqrt(b);this.m_normal.x=v/g,this.m_normal.y=x/g}else this.m_normal.x=1,this.m_normal.y=0;var w=m+i*this.m_normal.x,S=d+i*this.m_normal.y,C=_-r*this.m_normal.x,A=y-r*this.m_normal.y;this.m_points[0].x=.5*(w+C),this.m_points[0].y=.5*(S+A);break;case T.e_faceA:for(s=e.R,o=t.m_localPlaneNormal,l=s.col1.x*o.x+s.col2.x*o.y,u=s.col1.y*o.x+s.col2.y*o.y,s=e.R,o=t.m_localPoint,h=e.position.x+s.col1.x*o.x+s.col2.x*o.y,c=e.position.y+s.col1.y*o.x+s.col2.y*o.y,this.m_normal.x=l,this.m_normal.y=u,a=0;a<t.m_pointCount;a++)s=n.R,o=t.m_points[a].m_localPoint,p=n.position.x+s.col1.x*o.x+s.col2.x*o.y,f=n.position.y+s.col1.y*o.x+s.col2.y*o.y,this.m_points[a].x=p+.5*(i-(p-h)*l-(f-c)*u-r)*l,this.m_points[a].y=f+.5*(i-(p-h)*l-(f-c)*u-r)*u;break;case T.e_faceB:for(s=n.R,o=t.m_localPlaneNormal,l=s.col1.x*o.x+s.col2.x*o.y,u=s.col1.y*o.x+s.col2.y*o.y,s=n.R,o=t.m_localPoint,h=n.position.x+s.col1.x*o.x+s.col2.x*o.y,c=n.position.y+s.col1.y*o.x+s.col2.y*o.y,this.m_normal.x=-l,this.m_normal.y=-u,a=0;a<t.m_pointCount;a++)s=e.R,o=t.m_points[a].m_localPoint,p=e.position.x+s.col1.x*o.x+s.col2.x*o.y,f=e.position.y+s.col1.y*o.x+s.col2.y*o.y,this.m_points[a].x=p+.5*(r-(p-h)*l-(f-c)*u-i)*l,this.m_points[a].y=f+.5*(r-(p-h)*l-(f-c)*u-i)*u}}},k.ClipVertex=function(){this.v=new h,this.id=new d},k.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},N.Features=function(){},Object.defineProperty(N.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(N.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(N.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(N.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}}),Object.defineProperty(N.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(N.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}}),Object.defineProperty(N.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(N.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}})}(),function(){var t=(i.Common.b2Color,i.Common.b2internal,i.Common.b2Settings),e=i.Collision.Shapes.b2CircleShape,o=i.Collision.Shapes.b2EdgeChainDef,s=i.Collision.Shapes.b2EdgeShape,a=i.Collision.Shapes.b2MassData,l=i.Collision.Shapes.b2PolygonShape,u=i.Collision.Shapes.b2Shape,h=i.Common.Math.b2Mat22,c=(i.Common.Math.b2Mat33,i.Common.Math.b2Math),p=(i.Common.Math.b2Sweep,i.Common.Math.b2Transform),f=i.Common.Math.b2Vec2,m=(i.Common.Math.b2Vec3,i.Dynamics.b2Body,i.Dynamics.b2BodyDef,i.Dynamics.b2ContactFilter,i.Dynamics.b2ContactImpulse,i.Dynamics.b2ContactListener,i.Dynamics.b2ContactManager,i.Dynamics.b2DebugDraw,i.Dynamics.b2DestructionListener,i.Dynamics.b2FilterData,i.Dynamics.b2Fixture,i.Dynamics.b2FixtureDef,i.Dynamics.b2Island,i.Dynamics.b2TimeStep,i.Dynamics.b2World,i.Collision.b2AABB,i.Collision.b2Bound,i.Collision.b2BoundValues,i.Collision.b2Collision,i.Collision.b2ContactID,i.Collision.b2ContactPoint,i.Collision.b2Distance),d=i.Collision.b2DistanceInput,_=i.Collision.b2DistanceOutput,y=i.Collision.b2DistanceProxy,v=(i.Collision.b2DynamicTree,i.Collision.b2DynamicTreeBroadPhase,i.Collision.b2DynamicTreeNode,i.Collision.b2DynamicTreePair,i.Collision.b2Manifold,i.Collision.b2ManifoldPoint,i.Collision.b2Point,i.Collision.b2RayCastInput,i.Collision.b2RayCastOutput,i.Collision.b2Segment,i.Collision.b2SeparationFunction,i.Collision.b2Simplex,i.Collision.b2SimplexCache);i.Collision.b2SimplexVertex,i.Collision.b2TimeOfImpact,i.Collision.b2TOIInput,i.Collision.b2WorldManifold,i.Collision.ClipVertex,i.Collision.Features,i.Collision.IBroadPhase;i.inherit(e,i.Collision.Shapes.b2Shape),e.prototype.__super=i.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new f},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){if(this.__super.Set.call(this,t),i.is(t,e)){var n=t instanceof e?t:null;this.m_p.SetV(n.m_p)}},e.prototype.TestPoint=function(t,e){var i=t.R,n=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),r=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);return n=e.x-n,r=e.y-r,n*n+r*r<=this.m_radius*this.m_radius},e.prototype.RayCast=function(t,e,i){var n=i.R,r=i.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),o=i.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y),s=e.p1.x-r,a=e.p1.y-o,l=s*s+a*a-this.m_radius*this.m_radius,u=e.p2.x-e.p1.x,h=e.p2.y-e.p1.y,c=s*u+a*h,p=u*u+h*h,f=c*c-p*l;if(f<0||p<Number.MIN_VALUE)return!1;var m=-(c+Math.sqrt(f));return 0<=m&&m<=e.maxFraction*p&&(m/=p,t.fraction=m,t.normal.x=s+m*u,t.normal.y=a+m*h,t.normal.Normalize(),!0)},e.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),r=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);t.lowerBound.Set(n-this.m_radius,r-this.m_radius),t.upperBound.Set(n+this.m_radius,r+this.m_radius)},e.prototype.ComputeMass=function(e,i){void 0===i&&(i=0),e.mass=i*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var r=c.MulX(i,this.m_p),o=-(c.Dot(t,r)-e);if(o<-this.m_radius+Number.MIN_VALUE)return 0;if(o>this.m_radius)return n.SetV(r),Math.PI*this.m_radius*this.m_radius;var s=this.m_radius*this.m_radius,a=o*o,l=s*(Math.asin(o/this.m_radius)+Math.PI/2)+o*Math.sqrt(s-a),u=-2/3*Math.pow(s-a,1.5)/l;return n.x=r.x+t.x*u,n.y=r.y+t.y*u,l},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=u.e_circleShape,this.m_radius=t},o.b2EdgeChainDef=function(){},o.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},i.inherit(s,i.Collision.Shapes.b2Shape),s.prototype.__super=i.Collision.Shapes.b2Shape.prototype,s.b2EdgeShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new f,this.m_v1=new f,this.m_v2=new f,this.m_coreV1=new f,this.m_coreV2=new f,this.m_normal=new f,this.m_direction=new f,this.m_cornerDir1=new f,this.m_cornerDir2=new f},s.prototype.TestPoint=function(t,e){return!1},s.prototype.RayCast=function(t,e,i){var n,r=e.p2.x-e.p1.x,o=e.p2.y-e.p1.y;n=i.R;var s=i.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),a=i.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),l=i.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y)-a,u=-(i.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y)-s),h=100*Number.MIN_VALUE,c=-(r*l+o*u);if(c>h){var p=e.p1.x-s,f=e.p1.y-a,m=p*l+f*u;if(0<=m&&m<=e.maxFraction*c){var d=-r*f+o*p;if(-h*c<=d&&d<=c*(1+h)){m/=c,t.fraction=m;var _=Math.sqrt(l*l+u*u);return t.normal.x=l/_,t.normal.y=u/_,!0}}}return!1},s.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),r=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),o=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y),s=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y);n<o?(t.lowerBound.x=n,t.upperBound.x=o):(t.lowerBound.x=o,t.upperBound.x=n),r<s?(t.lowerBound.y=r,t.upperBound.y=s):(t.lowerBound.y=s,t.upperBound.y=r)},s.prototype.ComputeMass=function(t,e){void 0===e&&(e=0),t.mass=0,t.center.SetV(this.m_v1),t.I=0},s.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var r=new f(t.x*e,t.y*e),o=c.MulX(i,this.m_v1),s=c.MulX(i,this.m_v2),a=c.Dot(t,o)-e,l=c.Dot(t,s)-e;if(a>0){if(l>0)return 0;o.x=-l/(a-l)*o.x+a/(a-l)*s.x,o.y=-l/(a-l)*o.y+a/(a-l)*s.y}else l>0&&(s.x=-l/(a-l)*o.x+a/(a-l)*s.x,s.y=-l/(a-l)*o.y+a/(a-l)*s.y);return n.x=(r.x+o.x+s.x)/3,n.y=(r.y+o.y+s.y)/3,.5*((o.x-r.x)*(s.y-r.y)-(o.y-r.y)*(s.x-r.x))},s.prototype.GetLength=function(){return this.m_length},s.prototype.GetVertex1=function(){return this.m_v1},s.prototype.GetVertex2=function(){return this.m_v2},s.prototype.GetCoreVertex1=function(){return this.m_coreV1},s.prototype.GetCoreVertex2=function(){return this.m_coreV2},s.prototype.GetNormalVector=function(){return this.m_normal},s.prototype.GetDirectionVector=function(){return this.m_direction},s.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},s.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},s.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},s.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},s.prototype.GetFirstVertex=function(t){var e=t.R;return new f(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},s.prototype.GetNextEdge=function(){return this.m_nextEdge},s.prototype.GetPrevEdge=function(){return this.m_prevEdge},s.prototype.Support=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.R,r=t.position.x+(n.col1.x*this.m_coreV1.x+n.col2.x*this.m_coreV1.y),o=t.position.y+(n.col1.y*this.m_coreV1.x+n.col2.y*this.m_coreV1.y),s=t.position.x+(n.col1.x*this.m_coreV2.x+n.col2.x*this.m_coreV2.y),a=t.position.y+(n.col1.y*this.m_coreV2.x+n.col2.y*this.m_coreV2.y);return r*e+o*i>s*e+a*i?(this.s_supportVec.x=r,this.s_supportVec.y=o):(this.s_supportVec.x=s,this.s_supportVec.y=a),this.s_supportVec},s.prototype.b2EdgeShape=function(e,i){this.__super.b2Shape.call(this),this.m_type=u.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=i,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},s.prototype.SetPrevEdge=function(t,e,i,n){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=n},s.prototype.SetNextEdge=function(t,e,i,n){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=n},a.b2MassData=function(){this.mass=0,this.center=new f(0,0),this.I=0},i.inherit(l,i.Collision.Shapes.b2Shape),l.prototype.__super=i.Collision.Shapes.b2Shape.prototype,l.b2PolygonShape=function(){i.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},l.prototype.Copy=function(){var t=new l;return t.Set(this),t},l.prototype.Set=function(t){if(this.__super.Set.call(this,t),i.is(t,l)){var e=t instanceof l?t:null;this.m_centroid.SetV(e.m_centroid),this.m_vertexCount=e.m_vertexCount,this.Reserve(this.m_vertexCount);for(var n=0;n<this.m_vertexCount;n++)this.m_vertices[n].SetV(e.m_vertices[n]),this.m_normals[n].SetV(e.m_normals[n])}},l.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var i,r=new n,o=0;for(o=0;o<t.length;++o)i=t[o],r.push(i);this.SetAsVector(r,e)},l.AsArray=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsArray(t,e),i},l.prototype.SetAsVector=function(e,i){void 0===i&&(i=0),0==i&&(i=e.length),t.b2Assert(2<=i),this.m_vertexCount=i,this.Reserve(i);var n=0;for(n=0;n<this.m_vertexCount;n++)this.m_vertices[n].SetV(e[n]);for(n=0;n<this.m_vertexCount;++n){var r=parseInt(n),o=parseInt(n+1<this.m_vertexCount?n+1:0),s=c.SubtractVV(this.m_vertices[o],this.m_vertices[r]);t.b2Assert(s.LengthSquared()>Number.MIN_VALUE),this.m_normals[n].SetV(c.CrossVF(s,1)),this.m_normals[n].Normalize()}this.m_centroid=l.ComputeCentroid(this.m_vertices,this.m_vertexCount)},l.AsVector=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsVector(t,e),i},l.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},l.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new l;return i.SetAsBox(t,e),i},l.prototype.SetAsOrientedBox=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=i;var r=new p;r.position=i,r.R.Set(n);for(var o=0;o<this.m_vertexCount;++o)this.m_vertices[o]=c.MulX(r,this.m_vertices[o]),this.m_normals[o]=c.MulMV(r.R,this.m_normals[o])},l.AsOrientedBox=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0);var r=new l;return r.SetAsOrientedBox(t,e,i,n),r},l.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=c.CrossVF(c.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},l.AsEdge=function(t,e){var i=new l;return i.SetAsEdge(t,e),i},l.prototype.TestPoint=function(t,e){for(var i,n=t.R,r=e.x-t.position.x,o=e.y-t.position.y,s=r*n.col1.x+o*n.col1.y,a=r*n.col2.x+o*n.col2.y,l=0;l<this.m_vertexCount;++l){i=this.m_vertices[l],r=s-i.x,o=a-i.y,i=this.m_normals[l];if(i.x*r+i.y*o>0)return!1}return!0},l.prototype.RayCast=function(t,e,i){var n,r,o=0,s=e.maxFraction,a=0,l=0;a=e.p1.x-i.position.x,l=e.p1.y-i.position.y,n=i.R;var u=a*n.col1.x+l*n.col1.y,h=a*n.col2.x+l*n.col2.y;a=e.p2.x-i.position.x,l=e.p2.y-i.position.y,n=i.R;for(var c=a*n.col1.x+l*n.col1.y,p=a*n.col2.x+l*n.col2.y,f=c-u,m=p-h,d=parseInt(-1),_=0;_<this.m_vertexCount;++_){r=this.m_vertices[_],a=r.x-u,l=r.y-h,r=this.m_normals[_];var y=r.x*a+r.y*l,v=r.x*f+r.y*m;if(0==v){if(y<0)return!1}else v<0&&y<o*v?(o=y/v,d=_):v>0&&y<s*v&&(s=y/v);if(s<o-Number.MIN_VALUE)return!1}return d>=0&&(t.fraction=o,n=i.R,r=this.m_normals[d],t.normal.x=n.col1.x*r.x+n.col2.x*r.y,t.normal.y=n.col1.y*r.x+n.col2.y*r.y,!0)},l.prototype.ComputeAABB=function(t,e){for(var i=e.R,n=this.m_vertices[0],r=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),o=e.position.y+(i.col1.y*n.x+i.col2.y*n.y),s=r,a=o,l=1;l<this.m_vertexCount;++l){n=this.m_vertices[l];var u=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),h=e.position.y+(i.col1.y*n.x+i.col2.y*n.y);r=r<u?r:u,o=o<h?o:h,s=s>u?s:u,a=a>h?a:h}t.lowerBound.x=r-this.m_radius,t.lowerBound.y=o-this.m_radius,t.upperBound.x=s+this.m_radius,t.upperBound.y=a+this.m_radius},l.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,void(t.I=0);for(var i=0,n=0,r=0,o=0,s=0;s<this.m_vertexCount;++s){var a=this.m_vertices[s],l=s+1<this.m_vertexCount?this.m_vertices[parseInt(s+1)]:this.m_vertices[0],u=a.x-0,h=a.y-0,c=l.x-0,p=l.y-0,f=u*p-h*c,m=.5*f;r+=m,i+=m*(1/3)*(0+a.x+l.x),n+=m*(1/3)*(0+a.y+l.y);var d=u,_=h,y=c,v=p;o+=f*(1/3*(.25*(d*d+y*d+y*y)+(0*d+0*y))+0+(1/3*(.25*(_*_+v*_+v*v)+(0*_+0*v))+0))}t.mass=e*r,i*=1/r,n*=1/r,t.center.Set(i,n),t.I=e*o},l.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var o=c.MulTMV(i.R,t),s=e-c.Dot(t,i.position),l=new r,u=0,h=parseInt(-1),p=parseInt(-1),m=!1,d=0;for(d=0;d<this.m_vertexCount;++d){l[d]=c.Dot(o,this.m_vertices[d])-s;var _=l[d]<-Number.MIN_VALUE;d>0&&(_?m||(h=d-1,u++):m&&(p=d-1,u++)),m=_}switch(u){case 0:if(m){var y=new a;return this.ComputeMass(y,1),n.SetV(c.MulX(i,y.center)),y.mass}return 0;case 1:h==-1?h=this.m_vertexCount-1:p=this.m_vertexCount-1}var v,x=parseInt((h+1)%this.m_vertexCount),b=parseInt((p+1)%this.m_vertexCount),g=(0-l[h])/(l[x]-l[h]),w=(0-l[p])/(l[b]-l[p]),S=new f(this.m_vertices[h].x*(1-g)+this.m_vertices[x].x*g,this.m_vertices[h].y*(1-g)+this.m_vertices[x].y*g),C=new f(this.m_vertices[p].x*(1-w)+this.m_vertices[b].x*w,this.m_vertices[p].y*(1-w)+this.m_vertices[b].y*w),T=0,A=new f,M=this.m_vertices[x];for(d=x;d!=b;){d=(d+1)%this.m_vertexCount,v=d==b?C:this.m_vertices[d];var E=.5*((M.x-S.x)*(v.y-S.y)-(M.y-S.y)*(v.x-S.x));T+=E,A.x+=E*(S.x+M.x+v.x)/3,A.y+=E*(S.y+M.y+v.y)/3,M=v}return A.Multiply(1/T),n.SetV(c.MulX(i,A)),T},l.prototype.GetVertexCount=function(){return this.m_vertexCount},l.prototype.GetVertices=function(){return this.m_vertices},l.prototype.GetNormals=function(){return this.m_normals},l.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var r=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;r>i&&(e=n,i=r)}return e},l.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var r=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;r>i&&(e=n,i=r)}return this.m_vertices[e]},l.prototype.Validate=function(){return!1},l.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=u.e_polygonShape,this.m_centroid=new f,this.m_vertices=new n,this.m_normals=new n},l.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);e<t;e++)this.m_vertices[e]=new f,this.m_normals[e]=new f},l.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var i=new f,n=0,r=0;r<e;++r){var o=t[r],s=r+1<e?t[parseInt(r+1)]:t[0],a=o.x-0,l=o.y-0,u=s.x-0,h=s.y-0,c=a*h-l*u,p=.5*c;n+=p,i.x+=p*(1/3)*(0+o.x+s.x),i.y+=p*(1/3)*(0+o.y+s.y)}return i.x*=1/n,i.y*=1/n,i},l.ComputeOBB=function(t,e,i){void 0===i&&(i=0);var r=0,o=new n(i+1);for(r=0;r<i;++r)o[r]=e[r];o[i]=o[0];var s=Number.MAX_VALUE;for(r=1;r<=i;++r){var a=o[parseInt(r-1)],l=o[r].x-a.x,u=o[r].y-a.y,h=Math.sqrt(l*l+u*u);l/=h,u/=h;for(var c=-u,p=l,f=Number.MAX_VALUE,m=Number.MAX_VALUE,d=-Number.MAX_VALUE,_=-Number.MAX_VALUE,y=0;y<i;++y){var v=o[y].x-a.x,x=o[y].y-a.y,b=l*v+u*x,g=c*v+p*x;b<f&&(f=b),g<m&&(m=g),b>d&&(d=b),g>_&&(_=g)}var w=(d-f)*(_-m);if(w<.95*s){s=w,t.R.col1.x=l,t.R.col1.y=u,t.R.col2.x=c,t.R.col2.y=p;var S=.5*(f+d),C=.5*(m+_),T=t.R;t.center.x=a.x+(T.col1.x*S+T.col2.x*C),t.center.y=a.y+(T.col1.y*S+T.col2.y*C),t.extents.x=.5*(d-f),t.extents.y=.5*(_-m)}}},i.postDefs.push(function(){i.Collision.Shapes.b2PolygonShape.s_mat=new h}),u.b2Shape=function(){},u.prototype.Copy=function(){return null},u.prototype.Set=function(t){this.m_radius=t.m_radius},u.prototype.GetType=function(){return this.m_type},u.prototype.TestPoint=function(t,e){return!1},u.prototype.RayCast=function(t,e,i){return!1},u.prototype.ComputeAABB=function(t,e){},u.prototype.ComputeMass=function(t,e){void 0===e&&(e=0)},u.prototype.ComputeSubmergedArea=function(t,e,i,n){return void 0===e&&(e=0),0},u.TestOverlap=function(t,e,i,n){var r=new d;r.proxyA=new y,r.proxyA.Set(t),r.proxyB=new y,r.proxyB.Set(i),r.transformA=e,r.transformB=n,r.useRadii=!0;var o=new v;o.count=0;var s=new _;return m.Distance(s,o,r),s.distance<10*Number.MIN_VALUE},u.prototype.b2Shape=function(){this.m_type=u.e_unknownShape,this.m_radius=t.b2_linearSlop},i.postDefs.push(function(){i.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),i.Collision.Shapes.b2Shape.e_circleShape=0,i.Collision.Shapes.b2Shape.e_polygonShape=1,i.Collision.Shapes.b2Shape.e_edgeShape=2,i.Collision.Shapes.b2Shape.e_shapeTypeCount=3,i.Collision.Shapes.b2Shape.e_hitCollide=1,i.Collision.Shapes.b2Shape.e_missCollide=0,i.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=i.Common.b2Color,e=(i.Common.b2internal,i.Common.b2Settings),n=(i.Common.Math.b2Mat22,i.Common.Math.b2Mat33,i.Common.Math.b2Math);i.Common.Math.b2Sweep,i.Common.Math.b2Transform,i.Common.Math.b2Vec2,i.Common.Math.b2Vec3;t.b2Color=function(){this._r=0,this._g=0,this._b=0},t.prototype.b2Color=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this._r=i.parseUInt(255*n.Clamp(t,0,1)),this._g=i.parseUInt(255*n.Clamp(e,0,1)),this._b=i.parseUInt(255*n.Clamp(r,0,1))},t.prototype.Set=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this._r=i.parseUInt(255*n.Clamp(t,0,1)),this._g=i.parseUInt(255*n.Clamp(e,0,1)),this._b=i.parseUInt(255*n.Clamp(r,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=i.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=i.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=i.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},i.postDefs.push(function(){i.Common.b2Settings.VERSION="2.1alpha",i.Common.b2Settings.USHRT_MAX=65535,i.Common.b2Settings.b2_pi=Math.PI,i.Common.b2Settings.b2_maxManifoldPoints=2,i.Common.b2Settings.b2_aabbExtension=.1,i.Common.b2Settings.b2_aabbMultiplier=2,i.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,i.Common.b2Settings.b2_linearSlop=.005,i.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,i.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,i.Common.b2Settings.b2_maxTOIContactsPerIsland=32,i.Common.b2Settings.b2_maxTOIJointsPerIsland=32,i.Common.b2Settings.b2_velocityThreshold=1,i.Common.b2Settings.b2_maxLinearCorrection=.2,i.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,i.Common.b2Settings.b2_maxTranslation=2,i.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,i.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,i.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,i.Common.b2Settings.b2_contactBaumgarte=.2,i.Common.b2Settings.b2_timeToSleep=.5,i.Common.b2Settings.b2_linearSleepTolerance=.01,i.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=(i.Collision.b2AABB,i.Common.b2Color,i.Common.b2internal,i.Common.b2Settings,i.Common.Math.b2Mat22),e=i.Common.Math.b2Mat33,n=i.Common.Math.b2Math,r=i.Common.Math.b2Sweep,o=i.Common.Math.b2Transform,s=i.Common.Math.b2Vec2,a=i.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new s,this.col2=new s},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var i=new t;return i.Set(e),i},t.FromVV=function(e,i){var n=new t;return n.SetVV(e,i),n},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t),i=Math.sin(t);this.col1.x=e,this.col2.x=-i,this.col1.y=i,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,i=this.col2.x,n=this.col1.y,r=this.col2.y,o=e*r-i*n;return 0!=o&&(o=1/o),t.col1.x=o*r,t.col2.x=-o*i,t.col1.y=-o*n,t.col2.y=o*e,t},t.prototype.Solve=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,r=this.col2.x,o=this.col1.y,s=this.col2.y,a=n*s-r*o;return 0!=a&&(a=1/a),t.x=a*(s*e-r*i),t.y=a*(n*i-o*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new a,this.col2=new a,this.col3=new a},e.prototype.b2Mat33=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),t||e||i?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,i){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,r=this.col2.x,o=this.col1.y,s=this.col2.y,a=n*s-r*o;return 0!=a&&(a=1/a),t.x=a*(s*e-r*i),t.y=a*(n*i-o*e),t},e.prototype.Solve33=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=this.col1.x,o=this.col1.y,s=this.col1.z,a=this.col2.x,l=this.col2.y,u=this.col2.z,h=this.col3.x,c=this.col3.y,p=this.col3.z,f=r*(l*p-u*c)+o*(u*h-a*p)+s*(a*c-l*h);return 0!=f&&(f=1/f),t.x=f*(e*(l*p-u*c)+i*(u*h-a*p)+n*(a*c-l*h)),t.y=f*(r*(i*p-n*c)+o*(n*h-e*p)+s*(e*c-i*h)),t.z=f*(r*(l*n-u*i)+o*(u*e-a*n)+s*(a*i-l*e)),t},n.b2Math=function(){},n.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},n.Dot=function(t,e){return t.x*e.x+t.y*e.y},n.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},n.CrossVF=function(t,e){return void 0===e&&(e=0),new s(e*t.y,-e*t.x)},n.CrossFV=function(t,e){return void 0===t&&(t=0),new s(-t*e.y,t*e.x)},n.MulMV=function(t,e){return new s(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},n.MulTMV=function(t,e){return new s(n.Dot(e,t.col1),n.Dot(e,t.col2))},n.MulX=function(t,e){var i=n.MulMV(t.R,e);return i.x+=t.position.x,i.y+=t.position.y,i},n.MulXT=function(t,e){var i=n.SubtractVV(e,t.position),r=i.x*t.R.col1.x+i.y*t.R.col1.y;return i.y=i.x*t.R.col2.x+i.y*t.R.col2.y,i.x=r,i},n.AddVV=function(t,e){return new s(t.x+e.x,t.y+e.y)},n.SubtractVV=function(t,e){return new s(t.x-e.x,t.y-e.y)},n.Distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},n.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},n.MulFV=function(t,e){return void 0===t&&(t=0),new s(t*e.x,t*e.y)},n.AddMM=function(e,i){return t.FromVV(n.AddVV(e.col1,i.col1),n.AddVV(e.col2,i.col2))},n.MulMM=function(e,i){return t.FromVV(n.MulMV(e,i.col1),n.MulMV(e,i.col2))},n.MulTMM=function(e,i){var r=new s(n.Dot(e.col1,i.col1),n.Dot(e.col2,i.col1)),o=new s(n.Dot(e.col1,i.col2),n.Dot(e.col2,i.col2));return t.FromVV(r,o)},n.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},n.AbsV=function(t){return new s(n.Abs(t.x),n.Abs(t.y))},n.AbsM=function(e){return t.FromVV(n.AbsV(e.col1),n.AbsV(e.col2))},n.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t<e?t:e},n.MinV=function(t,e){return new s(n.Min(t.x,e.x),n.Min(t.y,e.y))},n.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},n.MaxV=function(t,e){return new s(n.Max(t.x,e.x),n.Max(t.y,e.y))},n.Clamp=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),t<e?e:t>i?i:t},n.ClampV=function(t,e,i){return n.MaxV(e,n.MinV(t,i))},n.Swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},n.Random=function(){return 2*Math.random()-1},n.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.random();return i=(e-t)*i+t},n.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1},n.IsPowerOfTwo=function(t){return void 0===t&&(t=0),t>0&&0==(t&t-1)},i.postDefs.push(function(){i.Common.Math.b2Math.b2Vec2_zero=new s(0,0),i.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new s(1,0),new s(0,1)),i.Common.Math.b2Math.b2Transform_identity=new o(n.b2Vec2_zero,n.b2Mat22_identity)}),r.b2Sweep=function(){this.localCenter=new s,this.c0=new s,this.c=new s},r.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},r.prototype.Copy=function(){var t=new r;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},r.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var i=(1-e)*this.a0+e*this.a;t.R.Set(i);var n=t.R;t.position.x-=n.col1.x*this.localCenter.x+n.col2.x*this.localCenter.y,t.position.y-=n.col1.y*this.localCenter.x+n.col2.y*this.localCenter.y},r.prototype.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},o.b2Transform=function(){this.position=new s,this.R=new t},o.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},o.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},o.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},o.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},o.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},s.b2Vec2=function(){},s.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetZero=function(){this.x=0,this.y=0},s.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetV=function(t){this.x=t.x,this.y=t.y},s.prototype.GetNegative=function(){return new s(-this.x,-this.y)},s.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},s.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new s(t,e)},s.prototype.Copy=function(){return new s(this.x,this.y)},s.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},s.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},s.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},s.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},s.prototype.MulTM=function(t){var e=n.Dot(this,t.col1);this.y=n.Dot(this,t.col2),this.x=e},s.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},s.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},s.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},s.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},s.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},s.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},s.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},s.prototype.IsValid=function(){return n.IsValid(this.x)&&n.IsValid(this.y)},a.b2Vec3=function(){},a.prototype.b2Vec3=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetZero=function(){this.x=this.y=this.z=0},a.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},a.prototype.GetNegative=function(){return new a(-this.x,-this.y,-this.z)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},a.prototype.Copy=function(){return new a(this.x,this.y,this.z)},a.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},a.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},a.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=(i.Dynamics.Controllers.b2ControllerEdge,i.Common.Math.b2Mat22,i.Common.Math.b2Mat33,i.Common.Math.b2Math),e=i.Common.Math.b2Sweep,o=i.Common.Math.b2Transform,s=i.Common.Math.b2Vec2,a=(i.Common.Math.b2Vec3,i.Common.b2Color),l=(i.Common.b2internal,i.Common.b2Settings),u=i.Collision.b2AABB,h=(i.Collision.b2Bound,i.Collision.b2BoundValues,i.Collision.b2Collision,i.Collision.b2ContactID,i.Collision.b2ContactPoint),c=(i.Collision.b2Distance,i.Collision.b2DistanceInput,i.Collision.b2DistanceOutput,i.Collision.b2DistanceProxy,i.Collision.b2DynamicTree,i.Collision.b2DynamicTreeBroadPhase),p=(i.Collision.b2DynamicTreeNode,i.Collision.b2DynamicTreePair,i.Collision.b2Manifold,i.Collision.b2ManifoldPoint,i.Collision.b2Point,i.Collision.b2RayCastInput),f=i.Collision.b2RayCastOutput,m=(i.Collision.b2Segment,i.Collision.b2SeparationFunction,i.Collision.b2Simplex,i.Collision.b2SimplexCache,i.Collision.b2SimplexVertex,i.Collision.b2TimeOfImpact,i.Collision.b2TOIInput,i.Collision.b2WorldManifold,i.Collision.ClipVertex,i.Collision.Features,i.Collision.IBroadPhase,i.Collision.Shapes.b2CircleShape),d=(i.Collision.Shapes.b2EdgeChainDef,i.Collision.Shapes.b2EdgeShape),_=i.Collision.Shapes.b2MassData,y=i.Collision.Shapes.b2PolygonShape,v=i.Collision.Shapes.b2Shape,x=i.Dynamics.b2Body,b=i.Dynamics.b2BodyDef,g=i.Dynamics.b2ContactFilter,w=i.Dynamics.b2ContactImpulse,S=i.Dynamics.b2ContactListener,C=i.Dynamics.b2ContactManager,T=i.Dynamics.b2DebugDraw,A=i.Dynamics.b2DestructionListener,M=i.Dynamics.b2FilterData,E=i.Dynamics.b2Fixture,D=i.Dynamics.b2FixtureDef,P=i.Dynamics.b2Island,I=i.Dynamics.b2TimeStep,O=i.Dynamics.b2World,R=(i.Dynamics.Contacts.b2CircleContact,i.Dynamics.Contacts.b2Contact),B=(i.Dynamics.Contacts.b2ContactConstraint,i.Dynamics.Contacts.b2ContactConstraintPoint,i.Dynamics.Contacts.b2ContactEdge,i.Dynamics.Contacts.b2ContactFactory),L=(i.Dynamics.Contacts.b2ContactRegister,i.Dynamics.Contacts.b2ContactResult,i.Dynamics.Contacts.b2ContactSolver),F=(i.Dynamics.Contacts.b2EdgeAndCircleContact,i.Dynamics.Contacts.b2NullContact,i.Dynamics.Contacts.b2PolyAndCircleContact,i.Dynamics.Contacts.b2PolyAndEdgeContact,i.Dynamics.Contacts.b2PolygonContact,i.Dynamics.Contacts.b2PositionSolverManifold,i.Dynamics.Controllers.b2Controller,i.Dynamics.Joints.b2DistanceJoint,i.Dynamics.Joints.b2DistanceJointDef,i.Dynamics.Joints.b2FrictionJoint,i.Dynamics.Joints.b2FrictionJointDef,i.Dynamics.Joints.b2GearJoint,i.Dynamics.Joints.b2GearJointDef,i.Dynamics.Joints.b2Jacobian,i.Dynamics.Joints.b2Joint),V=(i.Dynamics.Joints.b2JointDef,i.Dynamics.Joints.b2JointEdge,i.Dynamics.Joints.b2LineJoint,i.Dynamics.Joints.b2LineJointDef,i.Dynamics.Joints.b2MouseJoint,i.Dynamics.Joints.b2MouseJointDef,i.Dynamics.Joints.b2PrismaticJoint,i.Dynamics.Joints.b2PrismaticJointDef,i.Dynamics.Joints.b2PulleyJoint);i.Dynamics.Joints.b2PulleyJointDef,i.Dynamics.Joints.b2RevoluteJoint,i.Dynamics.Joints.b2RevoluteJointDef,i.Dynamics.Joints.b2WeldJoint,i.Dynamics.Joints.b2WeldJointDef;x.b2Body=function(){this.m_xf=new o,this.m_sweep=new e,this.m_linearVelocity=new s,this.m_force=new s},x.prototype.connectEdges=function(e,i,n){void 0===n&&(n=0);var r=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x),o=Math.tan(.5*(r-n)),s=t.MulFV(o,i.GetDirectionVector());s=t.SubtractVV(s,i.GetNormalVector()),s=t.MulFV(l.b2_toiSlop,s),s=t.AddVV(s,i.GetVertex1());var a=t.AddVV(e.GetDirectionVector(),i.GetDirectionVector());a.Normalize();var u=t.Dot(e.GetDirectionVector(),i.GetNormalVector())>0;return e.SetNextEdge(i,s,a,u),i.SetPrevEdge(e,s,a,u),r},x.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new E;if(e.Create(this,this.m_xf,t),this.m_flags&x.e_activeFlag){var i=this.m_world.m_contactManager.m_broadPhase;e.CreateProxy(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=O.e_newFixture,e},x.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=new D;return i.shape=t,i.density=e,this.CreateFixture(i)},x.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var e=this.m_fixtureList,i=null;null!=e;){if(e==t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next,!0;break}i=e,e=e.m_next}for(var n=this.m_contactList;n;){var r=n.contact;n=n.next;var o=r.GetFixtureA(),s=r.GetFixtureB();t!=o&&t!=s||this.m_world.m_contactManager.Destroy(r)}if(this.m_flags&x.e_activeFlag){var a=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxy(a)}t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},x.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var i;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t);var n=this.m_xf.R,r=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*r.x+n.col2.x*r.y,this.m_sweep.c.y=n.col1.y*r.x+n.col2.y*r.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var o=this.m_world.m_contactManager.m_broadPhase;for(i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(o,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},x.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},x.prototype.GetTransform=function(){return this.m_xf},x.prototype.GetPosition=function(){return this.m_xf.position},x.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},x.prototype.GetAngle=function(){return this.m_sweep.a},x.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},x.prototype.GetWorldCenter=function(){return this.m_sweep.c},x.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},x.prototype.SetLinearVelocity=function(t){this.m_type!=x.b2_staticBody&&this.m_linearVelocity.SetV(t)},x.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},x.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=x.b2_staticBody&&(this.m_angularVelocity=t)},x.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},x.prototype.GetDefinition=function(){var t=new b;return t.type=this.GetType(),t.allowSleep=(this.m_flags&x.e_allowSleepFlag)==x.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&x.e_fixedRotationFlag)==x.e_fixedRotationFlag,t.bullet=(this.m_flags&x.e_bulletFlag)==x.e_bulletFlag,t.awake=(this.m_flags&x.e_awakeFlag)==x.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},x.prototype.ApplyForce=function(t,e){this.m_type==x.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},x.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==x.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},x.prototype.ApplyImpulse=function(t,e){this.m_type==x.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},x.prototype.Split=function(e){for(var i,n=this.GetLinearVelocity().Copy(),r=this.GetAngularVelocity(),o=this.GetWorldCenter(),s=this,a=this.m_world.CreateBody(this.GetDefinition()),l=s.m_fixtureList;l;)if(e(l)){var u=l.m_next;i?i.m_next=u:s.m_fixtureList=u,s.m_fixtureCount--,l.m_next=a.m_fixtureList,a.m_fixtureList=l,a.m_fixtureCount++,l.m_body=a,l=u}else i=l,l=l.m_next;s.ResetMassData(),a.ResetMassData();var h=s.GetWorldCenter(),c=a.GetWorldCenter(),p=t.AddVV(n,t.CrossFV(r,t.SubtractVV(h,o))),f=t.AddVV(n,t.CrossFV(r,t.SubtractVV(c,o)));return s.SetLinearVelocity(p),a.SetLinearVelocity(f),s.SetAngularVelocity(r),a.SetAngularVelocity(r),s.SynchronizeFixtures(),a.SynchronizeFixtures(),a},x.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var i=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=r,e=i}n.m_fixtureCount=0;var n=this,r=t;n.GetWorldCenter(),r.GetWorldCenter(),n.GetLinearVelocity().Copy(),r.GetLinearVelocity().Copy(),n.GetAngularVelocity(),r.GetAngularVelocity();n.ResetMassData(),this.SynchronizeFixtures()},x.prototype.GetMass=function(){return this.m_mass},x.prototype.GetInertia=function(){return this.m_I},x.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},x.prototype.SetMassData=function(e){if(l.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==x.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&x.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},x.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!=x.b2_staticBody&&this.m_type!=x.b2_kinematicBody){for(var e=s.Make(0,0),i=this.m_fixtureList;i;i=i.m_next)if(0!=i.m_density){var n=i.GetMassData();this.m_mass+=n.mass,e.x+=n.center.x*n.mass,e.y+=n.center.y*n.mass,this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==(this.m_flags&x.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,l.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)}},x.prototype.GetWorldPoint=function(t){var e=this.m_xf.R,i=new s(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,i},x.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},x.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},x.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},x.prototype.GetLinearVelocityFromWorldPoint=function(t){return new s(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},x.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R,i=new s(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,new s(this.m_linearVelocity.x-this.m_angularVelocity*(i.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(i.x-this.m_sweep.c.x))},x.prototype.GetLinearDamping=function(){return this.m_linearDamping},x.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},x.prototype.GetAngularDamping=function(){return this.m_angularDamping},x.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},x.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t){this.m_type=t,this.ResetMassData(),this.m_type==x.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var e=this.m_contactList;e;e=e.next)e.contact.FlagForFiltering()}},x.prototype.GetType=function(){return this.m_type},x.prototype.SetBullet=function(t){t?this.m_flags|=x.e_bulletFlag:this.m_flags&=~x.e_bulletFlag},x.prototype.IsBullet=function(){return(this.m_flags&x.e_bulletFlag)==x.e_bulletFlag},x.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=x.e_allowSleepFlag:(this.m_flags&=~x.e_allowSleepFlag,this.SetAwake(!0))},x.prototype.SetAwake=function(t){t?(this.m_flags|=x.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~x.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},x.prototype.IsAwake=function(){return(this.m_flags&x.e_awakeFlag)==x.e_awakeFlag},x.prototype.SetFixedRotation=function(t){t?this.m_flags|=x.e_fixedRotationFlag:this.m_flags&=~x.e_fixedRotationFlag,this.ResetMassData()},x.prototype.IsFixedRotation=function(){return(this.m_flags&x.e_fixedRotationFlag)==x.e_fixedRotationFlag},x.prototype.SetActive=function(t){if(t!=this.IsActive()){var e,i;if(t)for(this.m_flags|=x.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxy(e,this.m_xf);else{for(this.m_flags&=~x.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxy(e);for(var n=this.m_contactList;n;){var r=n;n=n.next,this.m_world.m_contactManager.Destroy(r.contact)}this.m_contactList=null}}},x.prototype.IsActive=function(){return(this.m_flags&x.e_activeFlag)==x.e_activeFlag},x.prototype.IsSleepingAllowed=function(){return(this.m_flags&x.e_allowSleepFlag)==x.e_allowSleepFlag},x.prototype.GetFixtureList=function(){return this.m_fixtureList},x.prototype.GetJointList=function(){return this.m_jointList},x.prototype.GetControllerList=function(){return this.m_controllerList},x.prototype.GetContactList=function(){return this.m_contactList},x.prototype.GetNext=function(){return this.m_next},x.prototype.GetUserData=function(){return this.m_userData},x.prototype.SetUserData=function(t){this.m_userData=t},x.prototype.GetWorld=function(){return this.m_world},x.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=x.e_bulletFlag),t.fixedRotation&&(this.m_flags|=x.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=x.e_allowSleepFlag),t.awake&&(this.m_flags|=x.e_awakeFlag),t.active&&(this.m_flags|=x.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.x+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==x.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},x.prototype.SynchronizeFixtures=function(){var t=x.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y);var n,r=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(r,t,this.m_xf)},x.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},x.prototype.ShouldCollide=function(t){if(this.m_type!=x.b2_dynamicBody&&t.m_type!=x.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},x.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},i.postDefs.push(function(){i.Dynamics.b2Body.s_xf1=new o,i.Dynamics.b2Body.e_islandFlag=1,i.Dynamics.b2Body.e_awakeFlag=2,i.Dynamics.b2Body.e_allowSleepFlag=4,i.Dynamics.b2Body.e_bulletFlag=8,i.Dynamics.b2Body.e_fixedRotationFlag=16,i.Dynamics.b2Body.e_activeFlag=32,i.Dynamics.b2Body.b2_staticBody=0,i.Dynamics.b2Body.b2_kinematicBody=1,i.Dynamics.b2Body.b2_dynamicBody=2}),b.b2BodyDef=function(){this.position=new s,this.linearVelocity=new s},b.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=x.b2_staticBody,this.active=!0,this.inertiaScale=1},g.b2ContactFilter=function(){},g.prototype.ShouldCollide=function(t,e){var i=t.GetFilterData(),n=e.GetFilterData();return i.groupIndex==n.groupIndex&&0!=i.groupIndex?i.groupIndex>0:0!=(i.maskBits&n.categoryBits)&&0!=(i.categoryBits&n.maskBits)},g.prototype.RayCollide=function(t,e){return!t||this.ShouldCollide(t instanceof E?t:null,e)},i.postDefs.push(function(){i.Dynamics.b2ContactFilter.b2_defaultFilter=new g}),w.b2ContactImpulse=function(){this.normalImpulses=new r(l.b2_maxManifoldPoints),this.tangentImpulses=new r(l.b2_maxManifoldPoints)},S.b2ContactListener=function(){},S.prototype.BeginContact=function(t){},S.prototype.EndContact=function(t){},S.prototype.PreSolve=function(t,e){},S.prototype.PostSolve=function(t,e){},i.postDefs.push(function(){i.Dynamics.b2ContactListener.b2_defaultListener=new S}),C.b2ContactManager=function(){},C.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=g.b2_defaultFilter,this.m_contactListener=S.b2_defaultListener,this.m_contactFactory=new B(this.m_allocator),this.m_broadPhase=new c},C.prototype.AddPair=function(t,e){var i=t instanceof E?t:null,n=e instanceof E?e:null,r=i.GetBody(),o=n.GetBody();if(r!=o){for(var s=o.GetContactList();s;){if(s.other==r){var a=s.contact.GetFixtureA(),l=s.contact.GetFixtureB();if(a==i&&l==n)return;if(a==n&&l==i)return}s=s.next}if(0!=o.ShouldCollide(r)&&0!=this.m_contactFilter.ShouldCollide(i,n)){var u=this.m_contactFactory.Create(i,n);i=u.GetFixtureA(),n=u.GetFixtureB(),r=i.m_body,o=n.m_body,u.m_prev=null,u.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=u),this.m_world.m_contactList=u,u.m_nodeA.contact=u,u.m_nodeA.other=o,u.m_nodeA.prev=null,u.m_nodeA.next=r.m_contactList,null!=r.m_contactList&&(r.m_contactList.prev=u.m_nodeA),r.m_contactList=u.m_nodeA,u.m_nodeB.contact=u,u.m_nodeB.other=r,u.m_nodeB.prev=null,u.m_nodeB.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=u.m_nodeB),o.m_contactList=u.m_nodeB,++this.m_world.m_contactCount}}},C.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(i.generateCallback(this,this.AddPair))},C.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),r=i.GetBody();t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==n.m_contactList&&(n.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==r.m_contactList&&(r.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},C.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),r=i.GetBody();if(0!=n.IsAwake()||0!=r.IsAwake()){if(t.m_flags&R.e_filterFlag){if(0==r.ShouldCollide(n)){var o=t;t=o.GetNext(),this.Destroy(o);continue}if(0==this.m_contactFilter.ShouldCollide(e,i)){o=t,t=o.GetNext(),this.Destroy(o);continue}t.m_flags&=~R.e_filterFlag}var s=e.m_proxy,a=i.m_proxy;0!=this.m_broadPhase.TestOverlap(s,a)?(t.Update(this.m_contactListener),t=t.GetNext()):(o=t,t=o.GetNext(),this.Destroy(o))}else t=t.GetNext()}},i.postDefs.push(function(){i.Dynamics.b2ContactManager.s_evalCP=new h}),T.b2DebugDraw=function(){},T.prototype.b2DebugDraw=function(){},T.prototype.SetFlags=function(t){void 0===t&&(t=0)},T.prototype.GetFlags=function(){},T.prototype.AppendFlags=function(t){void 0===t&&(t=0)},T.prototype.ClearFlags=function(t){void 0===t&&(t=0)},T.prototype.SetSprite=function(t){},T.prototype.GetSprite=function(){},T.prototype.SetDrawScale=function(t){void 0===t&&(t=0)},T.prototype.GetDrawScale=function(){},T.prototype.SetLineThickness=function(t){void 0===t&&(t=0)},T.prototype.GetLineThickness=function(){},T.prototype.SetAlpha=function(t){void 0===t&&(t=0)},T.prototype.GetAlpha=function(){},T.prototype.SetFillAlpha=function(t){void 0===t&&(t=0)},T.prototype.GetFillAlpha=function(){},T.prototype.SetXFormScale=function(t){void 0===t&&(t=0)},T.prototype.GetXFormScale=function(){},T.prototype.DrawPolygon=function(t,e,i){void 0===e&&(e=0)},T.prototype.DrawSolidPolygon=function(t,e,i){void 0===e&&(e=0)},T.prototype.DrawCircle=function(t,e,i){void 0===e&&(e=0)},T.prototype.DrawSolidCircle=function(t,e,i,n){void 0===e&&(e=0)},T.prototype.DrawSegment=function(t,e,i){},T.prototype.DrawTransform=function(t){},i.postDefs.push(function(){i.Dynamics.b2DebugDraw.e_shapeBit=1,i.Dynamics.b2DebugDraw.e_jointBit=2,i.Dynamics.b2DebugDraw.e_aabbBit=4,i.Dynamics.b2DebugDraw.e_pairBit=8,i.Dynamics.b2DebugDraw.e_centerOfMassBit=16,i.Dynamics.b2DebugDraw.e_controllerBit=32}),A.b2DestructionListener=function(){},A.prototype.SayGoodbyeJoint=function(t){},A.prototype.SayGoodbyeFixture=function(t){},M.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},M.prototype.Copy=function(){var t=new M;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},E.b2Fixture=function(){this.m_filter=new M},E.prototype.GetType=function(){return this.m_shape.GetType()},E.prototype.GetShape=function(){return this.m_shape},E.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.GetContactList();e;){var i=e.contact,n=i.GetFixtureA(),r=i.GetFixtureB();n!=this&&r!=this||i.SetSensor(n.IsSensor()||r.IsSensor()),e=e.next}},E.prototype.IsSensor=function(){return this.m_isSensor},E.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(var e=this.m_body.GetContactList();e;){var i=e.contact,n=i.GetFixtureA(),r=i.GetFixtureB();n!=this&&r!=this||i.FlagForFiltering(),e=e.next}},E.prototype.GetFilterData=function(){return this.m_filter.Copy()},E.prototype.GetBody=function(){return this.m_body},E.prototype.GetNext=function(){return this.m_next},E.prototype.GetUserData=function(){return this.m_userData},E.prototype.SetUserData=function(t){this.m_userData=t},E.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},E.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},E.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new _),this.m_shape.ComputeMass(t,this.m_density),t},E.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},E.prototype.GetDensity=function(){return this.m_density},E.prototype.GetFriction=function(){return this.m_friction},E.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},E.prototype.GetRestitution=function(){return this.m_restitution},E.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},E.prototype.GetAABB=function(){return this.m_aabb},E.prototype.b2Fixture=function(){this.m_aabb=new u,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},E.prototype.Create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.Copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.Copy(),this.m_density=i.density},E.prototype.Destroy=function(){this.m_shape=null},E.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},E.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},E.prototype.Synchronize=function(e,i,n){if(this.m_proxy){var r=new u,o=new u;this.m_shape.ComputeAABB(r,i),this.m_shape.ComputeAABB(o,n),this.m_aabb.Combine(r,o);var s=t.SubtractVV(n.position,i.position);e.MoveProxy(this.m_proxy,this.m_aabb,s)}},D.b2FixtureDef=function(){this.filter=new M},D.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},P.b2Island=function(){},P.prototype.b2Island=function(){this.m_bodies=new n,this.m_contacts=new n,this.m_joints=new n},P.prototype.Initialize=function(t,e,i,n,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var s=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=n,this.m_listener=r,this.m_contactSolver=o,s=this.m_bodies.length;s<t;s++)this.m_bodies[s]=null;for(s=this.m_contacts.length;s<e;s++)this.m_contacts[s]=null;for(s=this.m_joints.length;s<i;s++)this.m_joints[s]=null},P.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},P.prototype.Solve=function(e,i,n){var r,o,s=0,a=0;for(s=0;s<this.m_bodyCount;++s)r=this.m_bodies[s],r.GetType()==x.b2_dynamicBody&&(r.m_linearVelocity.x+=e.dt*(i.x+r.m_invMass*r.m_force.x),r.m_linearVelocity.y+=e.dt*(i.y+r.m_invMass*r.m_force.y),r.m_angularVelocity+=e.dt*r.m_invI*r.m_torque,r.m_linearVelocity.Multiply(t.Clamp(1-e.dt*r.m_linearDamping,0,1)),r.m_angularVelocity*=t.Clamp(1-e.dt*r.m_angularDamping,0,1));this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var u=this.m_contactSolver;for(u.InitVelocityConstraints(e),s=0;s<this.m_jointCount;++s)o=this.m_joints[s],o.InitVelocityConstraints(e);for(s=0;s<e.velocityIterations;++s){for(a=0;a<this.m_jointCount;++a)o=this.m_joints[a],o.SolveVelocityConstraints(e);u.SolveVelocityConstraints()}for(s=0;s<this.m_jointCount;++s)o=this.m_joints[s],o.FinalizeVelocityConstraints();for(u.FinalizeVelocityConstraints(),s=0;s<this.m_bodyCount;++s)if(r=this.m_bodies[s],r.GetType()!=x.b2_staticBody){var h=e.dt*r.m_linearVelocity.x,c=e.dt*r.m_linearVelocity.y;h*h+c*c>l.b2_maxTranslationSquared&&(r.m_linearVelocity.Normalize(),r.m_linearVelocity.x*=l.b2_maxTranslation*e.inv_dt,r.m_linearVelocity.y*=l.b2_maxTranslation*e.inv_dt);var p=e.dt*r.m_angularVelocity;p*p>l.b2_maxRotationSquared&&(r.m_angularVelocity<0?r.m_angularVelocity=-l.b2_maxRotation*e.inv_dt:r.m_angularVelocity=l.b2_maxRotation*e.inv_dt),r.m_sweep.c0.SetV(r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.m_sweep.c.x+=e.dt*r.m_linearVelocity.x,r.m_sweep.c.y+=e.dt*r.m_linearVelocity.y,r.m_sweep.a+=e.dt*r.m_angularVelocity,r.SynchronizeTransform()}for(s=0;s<e.positionIterations;++s){var f=u.SolvePositionConstraints(l.b2_contactBaumgarte),m=!0;for(a=0;a<this.m_jointCount;++a){o=this.m_joints[a];var d=o.SolvePositionConstraints(l.b2_contactBaumgarte);m=m&&d}if(f&&m)break}if(this.Report(u.m_constraints),n){var _=Number.MAX_VALUE,y=l.b2_linearSleepTolerance*l.b2_linearSleepTolerance,v=l.b2_angularSleepTolerance*l.b2_angularSleepTolerance;for(s=0;s<this.m_bodyCount;++s)r=this.m_bodies[s],r.GetType()!=x.b2_staticBody&&(0==(r.m_flags&x.e_allowSleepFlag)&&(r.m_sleepTime=0,_=0),0==(r.m_flags&x.e_allowSleepFlag)||r.m_angularVelocity*r.m_angularVelocity>v||t.Dot(r.m_linearVelocity,r.m_linearVelocity)>y?(r.m_sleepTime=0,_=0):(r.m_sleepTime+=e.dt,_=t.Min(_,r.m_sleepTime)));if(_>=l.b2_timeToSleep)for(s=0;s<this.m_bodyCount;++s)r=this.m_bodies[s],r.SetAwake(!1)}},P.prototype.SolveTOI=function(t){var e=0,i=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var n=this.m_contactSolver;for(e=0;e<this.m_jointCount;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;e<t.velocityIterations;++e)for(n.SolveVelocityConstraints(),i=0;i<this.m_jointCount;++i)this.m_joints[i].SolveVelocityConstraints(t);for(e=0;e<this.m_bodyCount;++e){var r=this.m_bodies[e];if(r.GetType()!=x.b2_staticBody){var o=t.dt*r.m_linearVelocity.x,s=t.dt*r.m_linearVelocity.y;o*o+s*s>l.b2_maxTranslationSquared&&(r.m_linearVelocity.Normalize(),r.m_linearVelocity.x*=l.b2_maxTranslation*t.inv_dt,r.m_linearVelocity.y*=l.b2_maxTranslation*t.inv_dt);var a=t.dt*r.m_angularVelocity;a*a>l.b2_maxRotationSquared&&(r.m_angularVelocity<0?r.m_angularVelocity=-l.b2_maxRotation*t.inv_dt:r.m_angularVelocity=l.b2_maxRotation*t.inv_dt),r.m_sweep.c0.SetV(r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.m_sweep.c.x+=t.dt*r.m_linearVelocity.x,r.m_sweep.c.y+=t.dt*r.m_linearVelocity.y,r.m_sweep.a+=t.dt*r.m_angularVelocity,r.SynchronizeTransform()}}for(e=0;e<t.positionIterations;++e){var u=n.SolvePositionConstraints(.75),h=!0;for(i=0;i<this.m_jointCount;++i){var c=this.m_joints[i].SolvePositionConstraints(l.b2_contactBaumgarte);h=h&&c}if(u&&h)break}this.Report(n.m_constraints)},P.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;e<this.m_contactCount;++e){for(var i=this.m_contacts[e],n=t[e],r=0;r<n.pointCount;++r)P.s_impulse.normalImpulses[r]=n.points[r].normalImpulse,P.s_impulse.tangentImpulses[r]=n.points[r].tangentImpulse;this.m_listener.PostSolve(i,P.s_impulse)}},P.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},P.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},P.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},i.postDefs.push(function(){i.Dynamics.b2Island.s_impulse=new w}),I.b2TimeStep=function(){},I.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},O.b2World=function(){this.s_stack=new n,this.m_contactManager=new C,this.m_contactSolver=new L,this.m_island=new P},O.prototype.b2World=function(t,e){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,O.m_warmStarting=!0,O.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var i=new b;this.m_groundBody=this.CreateBody(i)},O.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},O.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},O.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},O.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},O.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var n=i.m_fixtureList;n;n=n.m_next)n.m_proxy=t.CreateProxy(e.GetFatAABB(n.m_proxy),n)},O.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},O.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},O.prototype.CreateBody=function(t){if(1==this.IsLocked())return null;var e=new x(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},O.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint)}for(var n=t.m_controllerList;n;){var r=n;n=n.nextController,r.controller.RemoveBody(t)}for(var o=t.m_contactList;o;){var s=o;o=o.next,this.m_contactManager.Destroy(s.contact)}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var l=a;a=a.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(l),l.DestroyProxy(this.m_contactManager.m_broadPhase),l.Destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},O.prototype.CreateJoint=function(t){var e=F.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,n=t.bodyB;if(0==t.collideConnected)for(var r=n.GetContactList();r;)r.other==i&&r.contact.FlagForFiltering(),r=r.next;return e},O.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,n=t.m_bodyB;if(i.SetAwake(!0),n.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,F.Destroy(t,null),--this.m_jointCount,0==e)for(var r=n.GetContactList();r;)r.other==i&&r.contact.FlagForFiltering(),r=r.next},O.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},O.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},O.prototype.CreateController=function(t){if(t.m_world!=this)throw new Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},O.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},O.prototype.SetWarmStarting=function(t){O.m_warmStarting=t},O.prototype.SetContinuousPhysics=function(t){O.m_continuousPhysics=t},O.prototype.GetBodyCount=function(){return this.m_bodyCount},O.prototype.GetJointCount=function(){return this.m_jointCount},O.prototype.GetContactCount=function(){return this.m_contactCount},O.prototype.SetGravity=function(t){this.m_gravity=t},O.prototype.GetGravity=function(){return this.m_gravity},O.prototype.GetGroundBody=function(){return this.m_groundBody},O.prototype.Step=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.m_flags&O.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~O.e_newFixture),this.m_flags|=O.e_locked;var n=O.s_timestep2;n.dt=t,n.velocityIterations=e,n.positionIterations=i,n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=O.m_warmStarting,this.m_contactManager.Collide(),n.dt>0&&this.Solve(n),O.m_continuousPhysics&&n.dt>0&&this.SolveTOI(n),n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_flags&=~O.e_locked},O.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},O.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,i,n,r,o,l=this.m_debugDraw.GetFlags(),h=(new s,new s,new s,new u,new u,[new s,new s,new s,new s]),c=new a(0,0,0);if(l&T.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(o=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)i=e.GetShape(),0==t.IsActive()?(c.Set(.5,.5,.3),this.DrawShape(i,o,c)):t.GetType()==x.b2_staticBody?(c.Set(.5,.9,.5),this.DrawShape(i,o,c)):t.GetType()==x.b2_kinematicBody?(c.Set(.5,.5,.9),this.DrawShape(i,o,c)):0==t.IsAwake()?(c.Set(.6,.6,.6),this.DrawShape(i,o,c)):(c.Set(.9,.7,.7),this.DrawShape(i,o,c));if(l&T.e_jointBit)for(n=this.m_jointList;n;n=n.m_next)this.DrawJoint(n);if(l&T.e_controllerBit)for(var p=this.m_controllerList;p;p=p.m_next)p.Draw(this.m_debugDraw);if(l&T.e_pairBit){c.Set(.3,.9,.9);for(var f=this.m_contactManager.m_contactList;f;f=f.GetNext()){var m=f.GetFixtureA(),d=f.GetFixtureB(),_=m.GetAABB().GetCenter(),y=d.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(_,y,c)}}if(l&T.e_aabbBit)for(r=this.m_contactManager.m_broadPhase,h=[new s,new s,new s,new s],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var v=r.GetFatAABB(e.m_proxy);h[0].Set(v.lowerBound.x,v.lowerBound.y),h[1].Set(v.upperBound.x,v.lowerBound.y),h[2].Set(v.upperBound.x,v.upperBound.y),h[3].Set(v.lowerBound.x,v.upperBound.y),this.m_debugDraw.DrawPolygon(h,4,c)}if(l&T.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)o=O.s_xf,o.R=t.m_xf.R,o.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(o)}},O.prototype.QueryAABB=function(t,e){function i(e){return t(r.GetUserData(e))}var n=this,r=n.m_contactManager.m_broadPhase;r.Query(i,e)},O.prototype.QueryShape=function(t,e,i){function n(n){var r=s.GetUserData(n)instanceof E?s.GetUserData(n):null;return!v.TestOverlap(e,i,r.GetShape(),r.GetBody().GetTransform())||t(r)}var r=this;void 0===i&&(i=null),null==i&&(i=new o,i.SetIdentity());var s=r.m_contactManager.m_broadPhase,a=new u;e.ComputeAABB(a,i),s.Query(n,a)},O.prototype.QueryPoint=function(t,e){function i(i){var n=r.GetUserData(i)instanceof E?r.GetUserData(i):null;return!n.TestPoint(e)||t(n)}var n=this,r=n.m_contactManager.m_broadPhase,o=new u;o.lowerBound.Set(e.x-l.b2_linearSlop,e.y-l.b2_linearSlop),o.upperBound.Set(e.x+l.b2_linearSlop,e.y+l.b2_linearSlop),r.Query(i,o)},O.prototype.RayCast=function(t,e,i){function n(n,r){var l=o.GetUserData(r),u=l instanceof E?l:null;if(u.RayCast(a,n)){var h=a.fraction,c=new s((1-h)*e.x+h*i.x,(1-h)*e.y+h*i.y);return t(u,c,a.normal,h)}return n.maxFraction}var r=this,o=r.m_contactManager.m_broadPhase,a=new f,l=new p(e,i);o.RayCast(n,l)},O.prototype.RayCastOne=function(t,e){function i(t,e,i,r){return void 0===r&&(r=0),n=t,r}var n,r=this;return r.RayCast(i,t,e),n},O.prototype.RayCastAll=function(t,e){function i(t,e,i,n){return void 0===n&&(n=0),o[o.length]=t,1}var r=this,o=new n;return r.RayCast(i,t,e),o},O.prototype.GetBodyList=function(){return this.m_bodyList},O.prototype.GetJointList=function(){return this.m_jointList},O.prototype.GetContactList=function(){return this.m_contactList},O.prototype.IsLocked=function(){return(this.m_flags&O.e_locked)>0},O.prototype.Solve=function(t){for(var e,i=this.m_controllerList;i;i=i.m_next)i.Step(t);var n=this.m_island;for(n.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~x.e_islandFlag;for(var r=this.m_contactList;r;r=r.m_next)r.m_flags&=~R.e_islandFlag;for(var o=this.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var s=(parseInt(this.m_bodyCount),this.s_stack),a=this.m_bodyList;a;a=a.m_next)if(!(a.m_flags&x.e_islandFlag)&&0!=a.IsAwake()&&0!=a.IsActive()&&a.GetType()!=x.b2_staticBody){n.Clear();var l=0;for(s[l++]=a,a.m_flags|=x.e_islandFlag;l>0;)if(e=s[--l],n.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=x.b2_staticBody){for(var u,h=e.m_contactList;h;h=h.next)h.contact.m_flags&R.e_islandFlag||1!=h.contact.IsSensor()&&0!=h.contact.IsEnabled()&&0!=h.contact.IsTouching()&&(n.AddContact(h.contact),h.contact.m_flags|=R.e_islandFlag,u=h.other,u.m_flags&x.e_islandFlag||(s[l++]=u,u.m_flags|=x.e_islandFlag));for(var c=e.m_jointList;c;c=c.next)1!=c.joint.m_islandFlag&&(u=c.other,0!=u.IsActive()&&(n.AddJoint(c.joint),c.joint.m_islandFlag=!0,u.m_flags&x.e_islandFlag||(s[l++]=u,u.m_flags|=x.e_islandFlag)))}n.Solve(t,this.m_gravity,this.m_allowSleep);for(var p=0;p<n.m_bodyCount;++p)e=n.m_bodies[p],e.GetType()==x.b2_staticBody&&(e.m_flags&=~x.e_islandFlag)}for(p=0;p<s.length&&s[p];++p)s[p]=null;for(e=this.m_bodyList;e;e=e.m_next)0!=e.IsAwake()&&0!=e.IsActive()&&e.GetType()!=x.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},O.prototype.SolveTOI=function(t){var e,i,n,r,o,s,a,u=this.m_island;u.Initialize(this.m_bodyCount,l.b2_maxTOIContactsPerIsland,l.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var h=O.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~x.e_islandFlag,e.m_sweep.t0=0;var c;for(c=this.m_contactList;c;c=c.m_next)c.m_flags&=~(R.e_toiFlag|R.e_islandFlag);for(a=this.m_jointList;a;a=a.m_next)a.m_islandFlag=!1;for(;;){var p=null,f=1;for(c=this.m_contactList;c;c=c.m_next)if(1!=c.IsSensor()&&0!=c.IsEnabled()&&0!=c.IsContinuous()){var m=1;if(c.m_flags&R.e_toiFlag)m=c.m_toi;else{if(i=c.m_fixtureA,n=c.m_fixtureB,r=i.m_body,o=n.m_body,!(r.GetType()==x.b2_dynamicBody&&0!=r.IsAwake()||o.GetType()==x.b2_dynamicBody&&0!=o.IsAwake()))continue;var d=r.m_sweep.t0;r.m_sweep.t0<o.m_sweep.t0?(d=o.m_sweep.t0,r.m_sweep.Advance(d)):o.m_sweep.t0<r.m_sweep.t0&&(d=r.m_sweep.t0,o.m_sweep.Advance(d)),m=c.ComputeTOI(r.m_sweep,o.m_sweep),l.b2Assert(0<=m&&m<=1),m>0&&m<1&&(m=(1-m)*d+m)>1&&(m=1),c.m_toi=m,c.m_flags|=R.e_toiFlag}Number.MIN_VALUE<m&&m<f&&(p=c,f=m)}if(null==p||1-100*Number.MIN_VALUE<f)break;if(i=p.m_fixtureA,n=p.m_fixtureB,r=i.m_body,o=n.m_body,O.s_backupA.Set(r.m_sweep),O.s_backupB.Set(o.m_sweep),r.Advance(f),o.Advance(f),p.Update(this.m_contactManager.m_contactListener),p.m_flags&=~R.e_toiFlag,1!=p.IsSensor()&&0!=p.IsEnabled()){if(0!=p.IsTouching()){var _=r;_.GetType()!=x.b2_dynamicBody&&(_=o),u.Clear();var y=0,v=0;for(h[y+v++]=_,_.m_flags|=x.e_islandFlag;v>0;)if(e=h[y++],--v,u.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==x.b2_dynamicBody){for(s=e.m_contactList;s&&u.m_contactCount!=u.m_contactCapacity;s=s.next)if(!(s.contact.m_flags&R.e_islandFlag)&&1!=s.contact.IsSensor()&&0!=s.contact.IsEnabled()&&0!=s.contact.IsTouching()){u.AddContact(s.contact),s.contact.m_flags|=R.e_islandFlag;var b=s.other;b.m_flags&x.e_islandFlag||(b.GetType()!=x.b2_staticBody&&(b.Advance(f),b.SetAwake(!0)),h[y+v]=b,++v,b.m_flags|=x.e_islandFlag)}for(var g=e.m_jointList;g;g=g.next)u.m_jointCount!=u.m_jointCapacity&&1!=g.joint.m_islandFlag&&(b=g.other,0!=b.IsActive()&&(u.AddJoint(g.joint),g.joint.m_islandFlag=!0,b.m_flags&x.e_islandFlag||(b.GetType()!=x.b2_staticBody&&(b.Advance(f),b.SetAwake(!0)),h[y+v]=b,++v,b.m_flags|=x.e_islandFlag)))}var w=O.s_timestep;w.warmStarting=!1,w.dt=(1-f)*t.dt,w.inv_dt=1/w.dt,w.dtRatio=0,w.velocityIterations=t.velocityIterations,w.positionIterations=t.positionIterations,u.SolveTOI(w);var S=0;for(S=0;S<u.m_bodyCount;++S)if(e=u.m_bodies[S],e.m_flags&=~x.e_islandFlag,0!=e.IsAwake()&&e.GetType()==x.b2_dynamicBody)for(e.SynchronizeFixtures(),s=e.m_contactList;s;s=s.next)s.contact.m_flags&=~R.e_toiFlag;for(S=0;S<u.m_contactCount;++S)c=u.m_contacts[S],c.m_flags&=~(R.e_toiFlag|R.e_islandFlag);for(S=0;S<u.m_jointCount;++S)a=u.m_joints[S],a.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}else r.m_sweep.Set(O.s_backupA),o.m_sweep.Set(O.s_backupB),r.SynchronizeTransform(),o.SynchronizeTransform()}},O.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),n=e.m_xf,r=i.m_xf,o=n.position,s=r.position,a=t.GetAnchorA(),l=t.GetAnchorB(),u=O.s_jointColor;switch(t.m_type){case F.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,u);break;case F.e_pulleyJoint:var h=t instanceof V?t:null,c=h.GetGroundAnchorA(),p=h.GetGroundAnchorB();this.m_debugDraw.DrawSegment(c,a,u),this.m_debugDraw.DrawSegment(p,l,u),this.m_debugDraw.DrawSegment(c,p,u);break;case F.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,u);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(o,a,u),this.m_debugDraw.DrawSegment(a,l,u),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,l,u)}},O.prototype.DrawShape=function(e,i,r){switch(e.m_type){case v.e_circleShape:var o=e instanceof m?e:null,s=t.MulX(i,o.m_p),a=o.m_radius,l=i.R.col1;this.m_debugDraw.DrawSolidCircle(s,a,l,r);break;case v.e_polygonShape:var u=0,h=e instanceof y?e:null,c=parseInt(h.GetVertexCount()),p=h.GetVertices(),f=new n(c);for(u=0;u<c;++u)f[u]=t.MulX(i,p[u]);this.m_debugDraw.DrawSolidPolygon(f,c,r);break;case v.e_edgeShape:var _=e instanceof d?e:null;this.m_debugDraw.DrawSegment(t.MulX(i,_.GetVertex1()),t.MulX(i,_.GetVertex2()),r)}},i.postDefs.push(function(){i.Dynamics.b2World.s_timestep2=new I,i.Dynamics.b2World.s_xf=new o,i.Dynamics.b2World.s_backupA=new e,i.Dynamics.b2World.s_backupB=new e,i.Dynamics.b2World.s_timestep=new I,i.Dynamics.b2World.s_queue=new n,i.Dynamics.b2World.s_jointColor=new a(.5,.8,.8),i.Dynamics.b2World.e_newFixture=1,i.Dynamics.b2World.e_locked=2})}(),function(){var t=i.Collision.Shapes.b2CircleShape,e=(i.Collision.Shapes.b2EdgeChainDef,i.Collision.Shapes.b2EdgeShape),o=(i.Collision.Shapes.b2MassData,i.Collision.Shapes.b2PolygonShape),s=i.Collision.Shapes.b2Shape,a=i.Dynamics.Contacts.b2CircleContact,l=i.Dynamics.Contacts.b2Contact,u=i.Dynamics.Contacts.b2ContactConstraint,h=i.Dynamics.Contacts.b2ContactConstraintPoint,c=i.Dynamics.Contacts.b2ContactEdge,p=i.Dynamics.Contacts.b2ContactFactory,f=i.Dynamics.Contacts.b2ContactRegister,m=i.Dynamics.Contacts.b2ContactResult,d=i.Dynamics.Contacts.b2ContactSolver,_=i.Dynamics.Contacts.b2EdgeAndCircleContact,y=i.Dynamics.Contacts.b2NullContact,v=i.Dynamics.Contacts.b2PolyAndCircleContact,x=i.Dynamics.Contacts.b2PolyAndEdgeContact,b=i.Dynamics.Contacts.b2PolygonContact,g=i.Dynamics.Contacts.b2PositionSolverManifold,w=i.Dynamics.b2Body,S=(i.Dynamics.b2BodyDef,i.Dynamics.b2ContactFilter,i.Dynamics.b2ContactImpulse,i.Dynamics.b2ContactListener,i.Dynamics.b2ContactManager,i.Dynamics.b2DebugDraw,i.Dynamics.b2DestructionListener,i.Dynamics.b2FilterData,i.Dynamics.b2Fixture,i.Dynamics.b2FixtureDef,i.Dynamics.b2Island,i.Dynamics.b2TimeStep),C=(i.Dynamics.b2World,i.Common.b2Color,i.Common.b2internal,i.Common.b2Settings),T=i.Common.Math.b2Mat22,A=(i.Common.Math.b2Mat33,i.Common.Math.b2Math),M=(i.Common.Math.b2Sweep,i.Common.Math.b2Transform,i.Common.Math.b2Vec2),E=(i.Common.Math.b2Vec3,i.Collision.b2AABB,i.Collision.b2Bound,i.Collision.b2BoundValues,i.Collision.b2Collision),D=i.Collision.b2ContactID,P=(i.Collision.b2ContactPoint,i.Collision.b2Distance,i.Collision.b2DistanceInput,i.Collision.b2DistanceOutput,i.Collision.b2DistanceProxy,i.Collision.b2DynamicTree,i.Collision.b2DynamicTreeBroadPhase,i.Collision.b2DynamicTreeNode,i.Collision.b2DynamicTreePair,i.Collision.b2Manifold),I=(i.Collision.b2ManifoldPoint,i.Collision.b2Point,i.Collision.b2RayCastInput,i.Collision.b2RayCastOutput,i.Collision.b2Segment,i.Collision.b2SeparationFunction,i.Collision.b2Simplex,i.Collision.b2SimplexCache,i.Collision.b2SimplexVertex,i.Collision.b2TimeOfImpact),O=i.Collision.b2TOIInput,R=i.Collision.b2WorldManifold;i.Collision.ClipVertex,i.Collision.Features,i.Collision.IBroadPhase;i.inherit(a,i.Dynamics.Contacts.b2Contact),a.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,a.b2CircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},a.Create=function(t){return new a},a.Destroy=function(t,e){},a.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},a.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();E.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},l.b2Contact=function(){this.m_nodeA=new c,this.m_nodeB=new c,this.m_manifold=new P,this.m_oldManifold=new P},l.prototype.GetManifold=function(){return this.m_manifold},l.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),n=this.m_fixtureA.GetShape(),r=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),n.m_radius,i.GetTransform(),r.m_radius)},l.prototype.IsTouching=function(){return(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag},l.prototype.IsContinuous=function(){return(this.m_flags&l.e_continuousFlag)==l.e_continuousFlag},l.prototype.SetSensor=function(t){t?this.m_flags|=l.e_sensorFlag:this.m_flags&=~l.e_sensorFlag},l.prototype.IsSensor=function(){return(this.m_flags&l.e_sensorFlag)==l.e_sensorFlag},l.prototype.SetEnabled=function(t){t?this.m_flags|=l.e_enabledFlag:this.m_flags&=~l.e_enabledFlag},l.prototype.IsEnabled=function(){return(this.m_flags&l.e_enabledFlag)==l.e_enabledFlag},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetFixtureA=function(){return this.m_fixtureA},l.prototype.GetFixtureB=function(){return this.m_fixtureB},l.prototype.FlagForFiltering=function(){this.m_flags|=l.e_filterFlag},l.prototype.b2Contact=function(){},l.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=l.e_enabledFlag,!t||!e)return this.m_fixtureA=null,void(this.m_fixtureB=null);(t.IsSensor()||e.IsSensor())&&(this.m_flags|=l.e_sensorFlag);var i=t.GetBody(),n=e.GetBody();(i.GetType()!=w.b2_dynamicBody||i.IsBullet()||n.GetType()!=w.b2_dynamicBody||n.IsBullet())&&(this.m_flags|=l.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},l.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=l.e_enabledFlag;var i=!1,n=(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag,r=this.m_fixtureA.m_body,o=this.m_fixtureB.m_body,a=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&l.e_sensorFlag){if(a){var u=this.m_fixtureA.GetShape(),h=this.m_fixtureB.GetShape(),c=r.GetTransform(),p=o.GetTransform();i=s.TestOverlap(u,c,h,p)}this.m_manifold.m_pointCount=0}else{if(r.GetType()!=w.b2_dynamicBody||r.IsBullet()||o.GetType()!=w.b2_dynamicBody||o.IsBullet()?this.m_flags|=l.e_continuousFlag:this.m_flags&=~l.e_continuousFlag,a){this.Evaluate(),i=this.m_manifold.m_pointCount>0;for(var f=0;f<this.m_manifold.m_pointCount;++f){var m=this.m_manifold.m_points[f];m.m_normalImpulse=0,m.m_tangentImpulse=0;for(var d=m.m_id,_=0;_<this.m_oldManifold.m_pointCount;++_){var y=this.m_oldManifold.m_points[_];if(y.m_id.key==d.key){m.m_normalImpulse=y.m_normalImpulse,m.m_tangentImpulse=y.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;i!=n&&(r.SetAwake(!0),o.SetAwake(!0))}i?this.m_flags|=l.e_touchingFlag:this.m_flags&=~l.e_touchingFlag,0==n&&1==i&&t.BeginContact(this),1==n&&0==i&&t.EndContact(this),0==(this.m_flags&l.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},l.prototype.Evaluate=function(){},l.prototype.ComputeTOI=function(t,e){return l.s_input.proxyA.Set(this.m_fixtureA.GetShape()),l.s_input.proxyB.Set(this.m_fixtureB.GetShape()),l.s_input.sweepA=t,l.s_input.sweepB=e,l.s_input.tolerance=C.b2_linearSlop,I.TimeOfImpact(l.s_input)},i.postDefs.push(function(){i.Dynamics.Contacts.b2Contact.e_sensorFlag=1,i.Dynamics.Contacts.b2Contact.e_continuousFlag=2,i.Dynamics.Contacts.b2Contact.e_islandFlag=4,i.Dynamics.Contacts.b2Contact.e_toiFlag=8,i.Dynamics.Contacts.b2Contact.e_touchingFlag=16,i.Dynamics.Contacts.b2Contact.e_enabledFlag=32,i.Dynamics.Contacts.b2Contact.e_filterFlag=64,i.Dynamics.Contacts.b2Contact.s_input=new O}),u.b2ContactConstraint=function(){this.localPlaneNormal=new M,this.localPoint=new M,this.normal=new M,this.normalMass=new T,this.K=new T},u.prototype.b2ContactConstraint=function(){this.points=new n(C.b2_maxManifoldPoints);for(var t=0;t<C.b2_maxManifoldPoints;t++)this.points[t]=new h},h.b2ContactConstraintPoint=function(){this.localPoint=new M,this.rA=new M,this.rB=new M},c.b2ContactEdge=function(){},p.b2ContactFactory=function(){},p.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},p.prototype.AddType=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!0,i!=n&&(this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!1)},p.prototype.InitializeRegisters=function(){this.m_registers=new n(s.e_shapeTypeCount);for(var t=0;t<s.e_shapeTypeCount;t++){this.m_registers[t]=new n(s.e_shapeTypeCount);for(var e=0;e<s.e_shapeTypeCount;e++)this.m_registers[t][e]=new f}this.AddType(a.Create,a.Destroy,s.e_circleShape,s.e_circleShape),this.AddType(v.Create,v.Destroy,s.e_polygonShape,s.e_circleShape),this.AddType(b.Create,b.Destroy,s.e_polygonShape,s.e_polygonShape),this.AddType(_.Create,_.Destroy,s.e_edgeShape,s.e_circleShape),this.AddType(x.Create,x.Destroy,s.e_polygonShape,s.e_edgeShape)},p.prototype.Create=function(t,e){var i,n=parseInt(t.GetType()),r=parseInt(e.GetType()),o=this.m_registers[n][r];if(o.pool)return i=o.pool,o.pool=i.m_next,o.poolCount--,i.Reset(t,e),i;var s=o.createFcn;return null!=s?o.primary?(i=s(this.m_allocator),i.Reset(t,e),i):(i=s(this.m_allocator),i.Reset(e,t),i):null},p.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType()),n=this.m_registers[e][i];n.poolCount++,t.m_next=n.pool,n.pool=t,(0,n.destroyFcn)(t,this.m_allocator)},f.b2ContactRegister=function(){},m.b2ContactResult=function(){this.position=new M,this.normal=new M,this.id=new D},d.b2ContactSolver=function(){this.m_step=new S,this.m_constraints=new n},d.prototype.b2ContactSolver=function(){},d.prototype.Initialize=function(t,e,i,n){void 0===i&&(i=0);var r;this.m_step.Set(t),this.m_allocator=n;var o=0;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new u;for(o=0;o<i;++o){r=e[o];var s=r.m_fixtureA,a=r.m_fixtureB,l=s.m_shape,h=a.m_shape,c=l.m_radius,p=h.m_radius,f=s.m_body,m=a.m_body,_=r.GetManifold(),y=C.b2MixFriction(s.GetFriction(),a.GetFriction()),v=C.b2MixRestitution(s.GetRestitution(),a.GetRestitution()),x=f.m_linearVelocity.x,b=f.m_linearVelocity.y,g=m.m_linearVelocity.x,w=m.m_linearVelocity.y,S=f.m_angularVelocity,T=m.m_angularVelocity;C.b2Assert(_.m_pointCount>0),d.s_worldManifold.Initialize(_,f.m_xf,c,m.m_xf,p);var A=d.s_worldManifold.m_normal.x,M=d.s_worldManifold.m_normal.y,E=this.m_constraints[o];E.bodyA=f,E.bodyB=m,E.manifold=_,E.normal.x=A,E.normal.y=M,E.pointCount=_.m_pointCount,E.friction=y,E.restitution=v,E.localPlaneNormal.x=_.m_localPlaneNormal.x,E.localPlaneNormal.y=_.m_localPlaneNormal.y,E.localPoint.x=_.m_localPoint.x,E.localPoint.y=_.m_localPoint.y,E.radius=c+p,E.type=_.m_type;for(var D=0;D<E.pointCount;++D){var P=_.m_points[D],I=E.points[D];I.normalImpulse=P.m_normalImpulse,I.tangentImpulse=P.m_tangentImpulse,I.localPoint.SetV(P.m_localPoint);var O=I.rA.x=d.s_worldManifold.m_points[D].x-f.m_sweep.c.x,R=I.rA.y=d.s_worldManifold.m_points[D].y-f.m_sweep.c.y,B=I.rB.x=d.s_worldManifold.m_points[D].x-m.m_sweep.c.x,L=I.rB.y=d.s_worldManifold.m_points[D].y-m.m_sweep.c.y,F=O*M-R*A,V=B*M-L*A;F*=F,V*=V;var k=f.m_invMass+m.m_invMass+f.m_invI*F+m.m_invI*V;I.normalMass=1/k;var N=f.m_mass*f.m_invMass+m.m_mass*m.m_invMass;N+=f.m_mass*f.m_invI*F+m.m_mass*m.m_invI*V,I.equalizedMass=1/N;var G=M,j=-A,U=O*j-R*G,J=B*j-L*G;U*=U,J*=J;var X=f.m_invMass+m.m_invMass+f.m_invI*U+m.m_invI*J;I.tangentMass=1/X,I.velocityBias=0;var W=g+-T*L-x- -S*R,z=w+T*B-b-S*O,H=E.normal.x*W+E.normal.y*z;H<-C.b2_velocityThreshold&&(I.velocityBias+=-E.restitution*H)}if(2==E.pointCount){var Y=E.points[0],q=E.points[1],K=f.m_invMass,Z=f.m_invI,Q=m.m_invMass,$=m.m_invI,tt=Y.rA.x*M-Y.rA.y*A,et=Y.rB.x*M-Y.rB.y*A,it=q.rA.x*M-q.rA.y*A,nt=q.rB.x*M-q.rB.y*A,rt=K+Q+Z*tt*tt+$*et*et,ot=K+Q+Z*it*it+$*nt*nt,st=K+Q+Z*tt*it+$*et*nt;rt*rt<100*(rt*ot-st*st)?(E.K.col1.Set(rt,st),E.K.col2.Set(st,ot),E.K.GetInverse(E.normalMass)):E.pointCount=1}}},d.prototype.InitVelocityConstraints=function(t){for(var e=0;e<this.m_constraintCount;++e){var i=this.m_constraints[e],n=i.bodyA,r=i.bodyB,o=n.m_invMass,s=n.m_invI,a=r.m_invMass,l=r.m_invI,u=i.normal.x,h=i.normal.y,c=h,p=-u,f=0,m=0;if(t.warmStarting)for(m=i.pointCount,f=0;f<m;++f){var d=i.points[f];d.normalImpulse*=t.dtRatio,d.tangentImpulse*=t.dtRatio;var _=d.normalImpulse*u+d.tangentImpulse*c,y=d.normalImpulse*h+d.tangentImpulse*p;n.m_angularVelocity-=s*(d.rA.x*y-d.rA.y*_),n.m_linearVelocity.x-=o*_,n.m_linearVelocity.y-=o*y,r.m_angularVelocity+=l*(d.rB.x*y-d.rB.y*_),r.m_linearVelocity.x+=a*_,r.m_linearVelocity.y+=a*y}else for(m=i.pointCount,f=0;f<m;++f){var v=i.points[f];v.normalImpulse=0,v.tangentImpulse=0}}},d.prototype.SolveVelocityConstraints=function(){for(var t,e,i=0,n=0,r=0,o=0,s=0,a=0,l=0,u=0,h=0,c=0,p=0,f=0,m=0,d=0,_=0,y=0,v=0;v<this.m_constraintCount;++v){var x=this.m_constraints[v],b=x.bodyA,g=x.bodyB,w=b.m_angularVelocity,S=g.m_angularVelocity,C=b.m_linearVelocity,T=g.m_linearVelocity,M=b.m_invMass,E=b.m_invI,D=g.m_invMass,P=g.m_invI,I=x.normal.x,O=x.normal.y,R=O,B=-I,L=x.friction;for(i=0;i<x.pointCount;i++)t=x.points[i],n=T.x-S*t.rB.y-C.x+w*t.rA.y,r=T.y+S*t.rB.x-C.y-w*t.rA.x,s=n*R+r*B,a=t.tangentMass*-s,l=L*t.normalImpulse,u=A.Clamp(t.tangentImpulse+a,-l,l),a=u-t.tangentImpulse,h=a*R,c=a*B,C.x-=M*h,C.y-=M*c,w-=E*(t.rA.x*c-t.rA.y*h),T.x+=D*h,T.y+=D*c,S+=P*(t.rB.x*c-t.rB.y*h),t.tangentImpulse=u;parseInt(x.pointCount);if(1==x.pointCount)t=x.points[0],n=T.x+-S*t.rB.y-C.x- -w*t.rA.y,r=T.y+S*t.rB.x-C.y-w*t.rA.x,o=n*I+r*O,a=-t.normalMass*(o-t.velocityBias),u=t.normalImpulse+a,u=u>0?u:0,a=u-t.normalImpulse,h=a*I,c=a*O,C.x-=M*h,C.y-=M*c,w-=E*(t.rA.x*c-t.rA.y*h),T.x+=D*h,T.y+=D*c,S+=P*(t.rB.x*c-t.rB.y*h),t.normalImpulse=u;else{var F=x.points[0],V=x.points[1],k=F.normalImpulse,N=V.normalImpulse,G=T.x-S*F.rB.y-C.x+w*F.rA.y,j=T.y+S*F.rB.x-C.y-w*F.rA.x,U=T.x-S*V.rB.y-C.x+w*V.rA.y,J=T.y+S*V.rB.x-C.y-w*V.rA.x,X=G*I+j*O,W=U*I+J*O,z=X-F.velocityBias,H=W-V.velocityBias;e=x.K,z-=e.col1.x*k+e.col2.x*N,H-=e.col1.y*k+e.col2.y*N;for(;;){e=x.normalMass;var Y=-(e.col1.x*z+e.col2.x*H),q=-(e.col1.y*z+e.col2.y*H);if(Y>=0&&q>=0){p=Y-k,f=q-N,m=p*I,d=p*O,_=f*I,y=f*O,C.x-=M*(m+_),C.y-=M*(d+y),w-=E*(F.rA.x*d-F.rA.y*m+V.rA.x*y-V.rA.y*_),T.x+=D*(m+_),T.y+=D*(d+y),S+=P*(F.rB.x*d-F.rB.y*m+V.rB.x*y-V.rB.y*_),F.normalImpulse=Y,V.normalImpulse=q;break}if(Y=-F.normalMass*z,q=0,X=0,W=x.K.col1.y*Y+H,Y>=0&&W>=0){p=Y-k,f=q-N,m=p*I,d=p*O,_=f*I,y=f*O,C.x-=M*(m+_),C.y-=M*(d+y),w-=E*(F.rA.x*d-F.rA.y*m+V.rA.x*y-V.rA.y*_),T.x+=D*(m+_),T.y+=D*(d+y),S+=P*(F.rB.x*d-F.rB.y*m+V.rB.x*y-V.rB.y*_),F.normalImpulse=Y,V.normalImpulse=q;break}if(Y=0,q=-V.normalMass*H,X=x.K.col2.x*q+z,W=0,q>=0&&X>=0){p=Y-k,f=q-N,m=p*I,d=p*O,_=f*I,y=f*O,C.x-=M*(m+_),C.y-=M*(d+y),w-=E*(F.rA.x*d-F.rA.y*m+V.rA.x*y-V.rA.y*_),T.x+=D*(m+_),T.y+=D*(d+y),S+=P*(F.rB.x*d-F.rB.y*m+V.rB.x*y-V.rB.y*_),F.normalImpulse=Y,V.normalImpulse=q;break}if(Y=0,q=0,X=z,W=H,X>=0&&W>=0){p=Y-k,f=q-N,m=p*I,d=p*O,_=f*I,y=f*O,C.x-=M*(m+_),C.y-=M*(d+y),w-=E*(F.rA.x*d-F.rA.y*m+V.rA.x*y-V.rA.y*_),T.x+=D*(m+_),T.y+=D*(d+y),S+=P*(F.rB.x*d-F.rB.y*m+V.rB.x*y-V.rB.y*_),F.normalImpulse=Y,V.normalImpulse=q;break}break}}b.m_angularVelocity=w,g.m_angularVelocity=S}},d.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],i=e.manifold,n=0;n<e.pointCount;++n){var r=i.m_points[n],o=e.points[n];r.m_normalImpulse=o.normalImpulse,r.m_tangentImpulse=o.tangentImpulse}},d.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;i<this.m_constraintCount;i++){var n=this.m_constraints[i],r=n.bodyA,o=n.bodyB,s=r.m_mass*r.m_invMass,a=r.m_mass*r.m_invI,l=o.m_mass*o.m_invMass,u=o.m_mass*o.m_invI;d.s_psm.Initialize(n);for(var h=d.s_psm.m_normal,c=0;c<n.pointCount;c++){var p=n.points[c],f=d.s_psm.m_points[c],m=d.s_psm.m_separations[c],_=f.x-r.m_sweep.c.x,y=f.y-r.m_sweep.c.y,v=f.x-o.m_sweep.c.x,x=f.y-o.m_sweep.c.y;e=e<m?e:m;var b=A.Clamp(t*(m+C.b2_linearSlop),-C.b2_maxLinearCorrection,0),g=-p.equalizedMass*b,w=g*h.x,S=g*h.y;r.m_sweep.c.x-=s*w,r.m_sweep.c.y-=s*S,r.m_sweep.a-=a*(_*S-y*w),r.SynchronizeTransform(),o.m_sweep.c.x+=l*w,o.m_sweep.c.y+=l*S,o.m_sweep.a+=u*(v*S-x*w),o.SynchronizeTransform()}}return e>-1.5*C.b2_linearSlop},i.postDefs.push(function(){i.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new R,i.Dynamics.Contacts.b2ContactSolver.s_psm=new g}),i.inherit(_,i.Dynamics.Contacts.b2Contact),_.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,_.b2EdgeAndCircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},_.Create=function(t){return new _},_.Destroy=function(t,e){},_.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},_.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},_.prototype.b2CollideEdgeAndCircle=function(t,e,i,n,r){},i.inherit(y,i.Dynamics.Contacts.b2Contact),y.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,y.b2NullContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},y.prototype.Evaluate=function(){},i.inherit(v,i.Dynamics.Contacts.b2Contact),v.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,v.b2PolyAndCircleContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},v.Create=function(t){return new v},v.Destroy=function(t,e){},v.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),C.b2Assert(t.GetType()==s.e_polygonShape),C.b2Assert(e.GetType()==s.e_circleShape)},v.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body;E.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},i.inherit(x,i.Dynamics.Contacts.b2Contact),x.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,x.b2PolyAndEdgeContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},x.Create=function(t){return new x},x.Destroy=function(t,e){},x.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),C.b2Assert(t.GetType()==s.e_polygonShape),C.b2Assert(e.GetType()==s.e_edgeShape)},x.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,i.m_xf)},x.prototype.b2CollidePolyAndEdge=function(t,e,i,n,r){},i.inherit(b,i.Dynamics.Contacts.b2Contact),b.prototype.__super=i.Dynamics.Contacts.b2Contact.prototype,b.b2PolygonContact=function(){i.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},b.Create=function(t){return new b},b.Destroy=function(t,e){},b.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},b.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();E.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof o?this.m_fixtureB.GetShape():null,e.m_xf)},g.b2PositionSolverManifold=function(){},g.prototype.b2PositionSolverManifold=function(){this.m_normal=new M,this.m_separations=new r(C.b2_maxManifoldPoints),this.m_points=new n(C.b2_maxManifoldPoints);for(var t=0;t<C.b2_maxManifoldPoints;t++)this.m_points[t]=new M},g.prototype.Initialize=function(t){C.b2Assert(t.pointCount>0);var e,i,n=0,r=0,o=0,s=0,a=0;switch(t.type){case P.e_circles:e=t.bodyA.m_xf.R,i=t.localPoint;var l=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),u=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y);e=t.bodyB.m_xf.R,i=t.points[0].localPoint;var h=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),c=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),p=h-l,f=c-u,m=p*p+f*f;if(m>Number.MIN_VALUE*Number.MIN_VALUE){var d=Math.sqrt(m);this.m_normal.x=p/d,this.m_normal.y=f/d}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(l+h),this.m_points[0].y=.5*(u+c),this.m_separations[0]=p*this.m_normal.x+f*this.m_normal.y-t.radius;break;case P.e_faceA:for(e=t.bodyA.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyA.m_xf.R,i=t.localPoint,s=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyB.m_xf.R,n=0;n<t.pointCount;++n)i=t.points[n].localPoint,r=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),o=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[n]=(r-s)*this.m_normal.x+(o-a)*this.m_normal.y-t.radius,this.m_points[n].x=r,this.m_points[n].y=o;break;case P.e_faceB:for(e=t.bodyB.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyB.m_xf.R,i=t.localPoint,s=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyA.m_xf.R,n=0;n<t.pointCount;++n)i=t.points[n].localPoint,r=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),o=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[n]=(r-s)*this.m_normal.x+(o-a)*this.m_normal.y-t.radius,this.m_points[n].Set(r,o);this.m_normal.x*=-1,this.m_normal.y*=-1}},i.postDefs.push(function(){i.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new M,i.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new M})}(),function(){var t=(i.Dynamics.b2Body,i.Dynamics.b2BodyDef,i.Dynamics.b2ContactFilter,i.Dynamics.b2ContactImpulse,i.Dynamics.b2ContactListener,i.Dynamics.b2ContactManager,i.Dynamics.b2DebugDraw,i.Dynamics.b2DestructionListener,i.Dynamics.b2FilterData,i.Dynamics.b2Fixture,i.Dynamics.b2FixtureDef,i.Dynamics.b2Island,i.Dynamics.b2TimeStep,i.Dynamics.b2World,i.Common.Math.b2Mat22),e=(i.Common.Math.b2Mat33,i.Common.Math.b2Math),n=(i.Common.Math.b2Sweep,i.Common.Math.b2Transform,i.Common.Math.b2Vec2),r=(i.Common.Math.b2Vec3,i.Common.b2Color),o=(i.Common.b2internal,i.Common.b2Settings,i.Collision.Shapes.b2CircleShape,i.Collision.Shapes.b2EdgeChainDef,i.Collision.Shapes.b2EdgeShape,i.Collision.Shapes.b2MassData,i.Collision.Shapes.b2PolygonShape,i.Collision.Shapes.b2Shape,i.Dynamics.Controllers.b2BuoyancyController),s=i.Dynamics.Controllers.b2ConstantAccelController,a=i.Dynamics.Controllers.b2ConstantForceController,l=i.Dynamics.Controllers.b2Controller,u=i.Dynamics.Controllers.b2ControllerEdge,h=i.Dynamics.Controllers.b2GravityController,c=i.Dynamics.Controllers.b2TensorDampingController;i.inherit(o,i.Dynamics.Controllers.b2Controller),o.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,o.b2BuoyancyController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new n(0,-1),this.offset=0,this.density=0,this.velocity=new n(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},o.prototype.Step=function(t){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;if(0!=i.IsAwake()){for(var r=new n,o=new n,s=0,a=0,l=i.GetFixtureList();l;l=l.GetNext()){var u=new n,h=l.GetShape().ComputeSubmergedArea(this.normal,this.offset,i.GetTransform(),u);s+=h,r.x+=h*u.x,r.y+=h*u.y;var c=0;c=(this.useDensity,1),a+=h*c,o.x+=h*u.x*c,o.y+=h*u.y*c}if(r.x/=s,r.y/=s,o.x/=a,o.y/=a,!(s<Number.MIN_VALUE)){var p=this.gravity.GetNegative();p.Multiply(this.density*s),i.ApplyForce(p,o);var f=i.GetLinearVelocityFromWorldPoint(r);f.Subtract(this.velocity),f.Multiply(-this.linearDrag*s),i.ApplyForce(f,r),i.ApplyTorque(-i.GetInertia()/i.GetMass()*s*i.GetAngularVelocity()*this.angularDrag)}}}}},o.prototype.Draw=function(t){var e=1e3,i=new n,o=new n;i.x=this.normal.x*this.offset+this.normal.y*e,i.y=this.normal.y*this.offset-this.normal.x*e,o.x=this.normal.x*this.offset-this.normal.y*e,o.y=this.normal.y*this.offset+this.normal.x*e;var s=new r(0,0,1);t.DrawSegment(i,o,s)},i.inherit(s,i.Dynamics.Controllers.b2Controller),s.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,s.b2ConstantAccelController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new n(0,0)},s.prototype.Step=function(t){for(var e=new n(this.A.x*t.dt,this.A.y*t.dt),i=this.m_bodyList;i;i=i.nextBody){var r=i.body;r.IsAwake()&&r.SetLinearVelocity(new n(r.GetLinearVelocity().x+e.x,r.GetLinearVelocity().y+e.y))}},i.inherit(a,i.Dynamics.Controllers.b2Controller),a.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,a.b2ConstantForceController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new n(0,0)},a.prototype.Step=function(t){for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;i.IsAwake()&&i.ApplyForce(this.F,i.GetWorldCenter())}},l.b2Controller=function(){},l.prototype.Step=function(t){},l.prototype.Draw=function(t){},l.prototype.AddBody=function(t){var e=new u;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},l.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},l.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetWorld=function(){return this.m_world},l.prototype.GetBodyList=function(){return this.m_bodyList},u.b2ControllerEdge=function(){},i.inherit(h,i.Dynamics.Controllers.b2Controller),h.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,h.b2GravityController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},h.prototype.Step=function(t){var e=null,i=null,r=null,o=0,s=null,a=null,l=null,u=0,h=0,c=0,p=null;if(this.invSqr)for(e=this.m_bodyList;e;e=e.nextBody)for(i=e.body,r=i.GetWorldCenter(),o=i.GetMass(),s=this.m_bodyList;s!=e;s=s.nextBody)a=s.body,l=a.GetWorldCenter(),u=l.x-r.x,h=l.y-r.y,(c=u*u+h*h)<Number.MIN_VALUE||(p=new n(u,h),p.Multiply(this.G/c/Math.sqrt(c)*o*a.GetMass()),i.IsAwake()&&i.ApplyForce(p,r),p.Multiply(-1),a.IsAwake()&&a.ApplyForce(p,l));else for(e=this.m_bodyList;e;e=e.nextBody)for(i=e.body,r=i.GetWorldCenter(),o=i.GetMass(),s=this.m_bodyList;s!=e;s=s.nextBody)a=s.body,l=a.GetWorldCenter(),u=l.x-r.x,h=l.y-r.y,(c=u*u+h*h)<Number.MIN_VALUE||(p=new n(u,h),p.Multiply(this.G/c*o*a.GetMass()),i.IsAwake()&&i.ApplyForce(p,r),p.Multiply(-1),a.IsAwake()&&a.ApplyForce(p,l))},i.inherit(c,i.Dynamics.Controllers.b2Controller),c.prototype.__super=i.Dynamics.Controllers.b2Controller.prototype,c.b2TensorDampingController=function(){i.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},c.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},c.prototype.Step=function(t){var i=t.dt;if(!(i<=Number.MIN_VALUE)){i>this.maxTimestep&&this.maxTimestep>0&&(i=this.maxTimestep);for(var r=this.m_bodyList;r;r=r.nextBody){var o=r.body;if(o.IsAwake()){var s=o.GetWorldVector(e.MulMV(this.T,o.GetLocalVector(o.GetLinearVelocity())));o.SetLinearVelocity(new n(o.GetLinearVelocity().x+s.x*i,o.GetLinearVelocity().y+s.y*i))}}}}}(),function(){var t=(i.Common.b2Color,i.Common.b2internal,i.Common.b2Settings),e=i.Common.Math.b2Mat22,n=i.Common.Math.b2Mat33,r=i.Common.Math.b2Math,o=(i.Common.Math.b2Sweep,i.Common.Math.b2Transform,i.Common.Math.b2Vec2),s=i.Common.Math.b2Vec3,a=i.Dynamics.Joints.b2DistanceJoint,l=i.Dynamics.Joints.b2DistanceJointDef,u=i.Dynamics.Joints.b2FrictionJoint,h=i.Dynamics.Joints.b2FrictionJointDef,c=i.Dynamics.Joints.b2GearJoint,p=i.Dynamics.Joints.b2GearJointDef,f=i.Dynamics.Joints.b2Jacobian,m=i.Dynamics.Joints.b2Joint,d=i.Dynamics.Joints.b2JointDef,_=i.Dynamics.Joints.b2JointEdge,y=i.Dynamics.Joints.b2LineJoint,v=i.Dynamics.Joints.b2LineJointDef,x=i.Dynamics.Joints.b2MouseJoint,b=i.Dynamics.Joints.b2MouseJointDef,g=i.Dynamics.Joints.b2PrismaticJoint,w=i.Dynamics.Joints.b2PrismaticJointDef,S=i.Dynamics.Joints.b2PulleyJoint,C=i.Dynamics.Joints.b2PulleyJointDef,T=i.Dynamics.Joints.b2RevoluteJoint,A=i.Dynamics.Joints.b2RevoluteJointDef,M=i.Dynamics.Joints.b2WeldJoint,E=i.Dynamics.Joints.b2WeldJointDef;i.Dynamics.b2Body,i.Dynamics.b2BodyDef,i.Dynamics.b2ContactFilter,i.Dynamics.b2ContactImpulse,i.Dynamics.b2ContactListener,i.Dynamics.b2ContactManager,i.Dynamics.b2DebugDraw,i.Dynamics.b2DestructionListener,i.Dynamics.b2FilterData,i.Dynamics.b2Fixture,i.Dynamics.b2FixtureDef,i.Dynamics.b2Island,i.Dynamics.b2TimeStep,i.Dynamics.b2World;i.inherit(a,i.Dynamics.Joints.b2Joint),a.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,a.b2DistanceJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u=new o},a.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},a.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},a.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},a.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},a.prototype.GetLength=function(){return this.m_length},a.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},a.prototype.GetFrequency=function(){return this.m_frequencyHz},a.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},a.prototype.GetDampingRatio=function(){return this.m_dampingRatio},a.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},a.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},a.prototype.InitVelocityConstraints=function(e){var i,n=0,r=this.m_bodyA,o=this.m_bodyB;i=r.m_xf.R;var s=this.m_localAnchor1.x-r.m_sweep.localCenter.x,a=this.m_localAnchor1.y-r.m_sweep.localCenter.y;n=i.col1.x*s+i.col2.x*a,a=i.col1.y*s+i.col2.y*a,s=n,i=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,u=this.m_localAnchor2.y-o.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=n,this.m_u.x=o.m_sweep.c.x+l-r.m_sweep.c.x-s,this.m_u.y=o.m_sweep.c.y+u-r.m_sweep.c.y-a;var h=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);h>t.b2_linearSlop?this.m_u.Multiply(1/h):this.m_u.SetZero();var c=s*this.m_u.y-a*this.m_u.x,p=l*this.m_u.y-u*this.m_u.x,f=r.m_invMass+r.m_invI*c*c+o.m_invMass+o.m_invI*p*p;if(this.m_mass=0!=f?1/f:0,this.m_frequencyHz>0){var m=h-this.m_length,d=2*Math.PI*this.m_frequencyHz,_=2*this.m_mass*this.m_dampingRatio*d,y=this.m_mass*d*d;this.m_gamma=e.dt*(_+e.dt*y),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=m*e.dt*y*this.m_gamma,this.m_mass=f+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}if(e.warmStarting){this.m_impulse*=e.dtRatio;var v=this.m_impulse*this.m_u.x,x=this.m_impulse*this.m_u.y;r.m_linearVelocity.x-=r.m_invMass*v,r.m_linearVelocity.y-=r.m_invMass*x,r.m_angularVelocity-=r.m_invI*(s*x-a*v),o.m_linearVelocity.x+=o.m_invMass*v,o.m_linearVelocity.y+=o.m_invMass*x,o.m_angularVelocity+=o.m_invI*(l*x-u*v)}else this.m_impulse=0},a.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB;e=i.m_xf.R;var r=this.m_localAnchor1.x-i.m_sweep.localCenter.x,o=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=e.col1.x*r+e.col2.x*o;o=e.col1.y*r+e.col2.y*o,r=s,e=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=s;var u=i.m_linearVelocity.x+-i.m_angularVelocity*o,h=i.m_linearVelocity.y+i.m_angularVelocity*r,c=n.m_linearVelocity.x+-n.m_angularVelocity*l,p=n.m_linearVelocity.y+n.m_angularVelocity*a,f=this.m_u.x*(c-u)+this.m_u.y*(p-h),m=-this.m_mass*(f+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=m;var d=m*this.m_u.x,_=m*this.m_u.y;i.m_linearVelocity.x-=i.m_invMass*d,i.m_linearVelocity.y-=i.m_invMass*_,i.m_angularVelocity-=i.m_invI*(r*_-o*d),n.m_linearVelocity.x+=n.m_invMass*d,n.m_linearVelocity.y+=n.m_invMass*_,n.m_angularVelocity+=n.m_invI*(a*_-l*d)},a.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,o=this.m_bodyB;i=n.m_xf.R;var s=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y,l=i.col1.x*s+i.col2.x*a;a=i.col1.y*s+i.col2.y*a,s=l,i=o.m_xf.R;var u=this.m_localAnchor2.x-o.m_sweep.localCenter.x,h=this.m_localAnchor2.y-o.m_sweep.localCenter.y;l=i.col1.x*u+i.col2.x*h,h=i.col1.y*u+i.col2.y*h,u=l;var c=o.m_sweep.c.x+u-n.m_sweep.c.x-s,p=o.m_sweep.c.y+h-n.m_sweep.c.y-a,f=Math.sqrt(c*c+p*p);c/=f,p/=f;var m=f-this.m_length;m=r.Clamp(m,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var d=-this.m_mass*m;this.m_u.Set(c,p);var _=d*this.m_u.x,y=d*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*_,n.m_sweep.c.y-=n.m_invMass*y,n.m_sweep.a-=n.m_invI*(s*y-a*_),o.m_sweep.c.x+=o.m_invMass*_,o.m_sweep.c.y+=o.m_invMass*y,o.m_sweep.a+=o.m_invI*(u*y-h*_),n.SynchronizeTransform(),o.SynchronizeTransform(),r.Abs(m)<t.b2_linearSlop},i.inherit(l,i.Dynamics.Joints.b2JointDef),l.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,l.b2DistanceJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},l.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},l.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n));var r=n.x-i.x,o=n.y-i.y;this.length=Math.sqrt(r*r+o*o),this.frequencyHz=0,this.dampingRatio=0},i.inherit(u,i.Dynamics.Joints.b2Joint),u.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,u.b2FrictionJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_linearMass=new e,this.m_linearImpulse=new o},u.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},u.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},u.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},u.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},u.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},u.prototype.GetMaxForce=function(){return this.m_maxForce},u.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},u.prototype.GetMaxTorque=function(){return this.m_maxTorque},u.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},u.prototype.InitVelocityConstraints=function(t){var i,n=0,r=this.m_bodyA,o=this.m_bodyB;i=r.m_xf.R;var s=this.m_localAnchorA.x-r.m_sweep.localCenter.x,a=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=i.col1.x*s+i.col2.x*a,a=i.col1.y*s+i.col2.y*a,s=n,i=o.m_xf.R;var l=this.m_localAnchorB.x-o.m_sweep.localCenter.x,u=this.m_localAnchorB.y-o.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=n;var h=r.m_invMass,c=o.m_invMass,p=r.m_invI,f=o.m_invI,m=new e;if(m.col1.x=h+c,m.col2.x=0,m.col1.y=0,m.col2.y=h+c,m.col1.x+=p*a*a,m.col2.x+=-p*s*a,m.col1.y+=-p*s*a,m.col2.y+=p*s*s,m.col1.x+=f*u*u,m.col2.x+=-f*l*u,m.col1.y+=-f*l*u,m.col2.y+=f*l*l,m.GetInverse(this.m_linearMass),this.m_angularMass=p+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var d=this.m_linearImpulse;r.m_linearVelocity.x-=h*d.x,r.m_linearVelocity.y-=h*d.y,r.m_angularVelocity-=p*(s*d.y-a*d.x+this.m_angularImpulse),o.m_linearVelocity.x+=c*d.x,o.m_linearVelocity.y+=c*d.y,o.m_angularVelocity+=f*(l*d.y-u*d.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},u.prototype.SolveVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,s=this.m_bodyB,a=n.m_linearVelocity,l=n.m_angularVelocity,u=s.m_linearVelocity,h=s.m_angularVelocity,c=n.m_invMass,p=s.m_invMass,f=n.m_invI,m=s.m_invI;e=n.m_xf.R;var d=this.m_localAnchorA.x-n.m_sweep.localCenter.x,_=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*_,_=e.col1.y*d+e.col2.y*_,d=i,e=s.m_xf.R;var y=this.m_localAnchorB.x-s.m_sweep.localCenter.x,v=this.m_localAnchorB.y-s.m_sweep.localCenter.y;i=e.col1.x*y+e.col2.x*v,v=e.col1.y*y+e.col2.y*v,y=i;var x=0,b=h-l,g=-this.m_angularMass*b,w=this.m_angularImpulse;x=t.dt*this.m_maxTorque,this.m_angularImpulse=r.Clamp(this.m_angularImpulse+g,-x,x),g=this.m_angularImpulse-w,l-=f*g,h+=m*g;var S=u.x-h*v-a.x+l*_,C=u.y+h*y-a.y-l*d,T=r.MulMV(this.m_linearMass,new o(-S,-C)),A=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(T),x=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>x*x&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(x)),T=r.SubtractVV(this.m_linearImpulse,A),a.x-=c*T.x,a.y-=c*T.y,l-=f*(d*T.y-_*T.x),u.x+=p*T.x,u.y+=p*T.y,h+=m*(y*T.y-v*T.x),n.m_angularVelocity=l,s.m_angularVelocity=h},u.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},i.inherit(h,i.Dynamics.Joints.b2JointDef),h.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,h.b2FrictionJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},h.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_frictionJoint,this.maxForce=0,this.maxTorque=0},h.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i))},i.inherit(c,i.Dynamics.Joints.b2Joint),c.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,c.b2GearJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_J=new f},c.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},c.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},c.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},c.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,n=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,r=e.col1.x*i+e.col2.x*n;n=e.col1.y*i+e.col2.y*n,i=r;var o=this.m_impulse*this.m_J.linearB.x,s=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-i*s+n*o)},c.prototype.GetRatio=function(){return this.m_ratio},c.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},c.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),i=parseInt(t.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var n=0,r=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==m.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof T?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),n=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof g?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),n=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),i==m.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof T?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),r=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof g?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),r=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=n+this.m_ratio*r,this.m_impulse=0},c.prototype.InitVelocityConstraints=function(t){var e,i,n=this.m_ground1,r=this.m_ground2,o=this.m_bodyA,s=this.m_bodyB,a=0,l=0,u=0,h=0,c=0,p=0,f=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,f+=o.m_invI):(e=n.m_xf.R,i=this.m_prismatic1.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=o.m_xf.R,u=this.m_localAnchor1.x-o.m_sweep.localCenter.x,h=this.m_localAnchor1.y-o.m_sweep.localCenter.y,p=e.col1.x*u+e.col2.x*h,h=e.col1.y*u+e.col2.y*h,u=p,c=u*l-h*a,this.m_J.linearA.Set(-a,-l),this.m_J.angularA=-c,f+=o.m_invMass+o.m_invI*c*c),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,f+=this.m_ratio*this.m_ratio*s.m_invI):(e=r.m_xf.R,i=this.m_prismatic2.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=s.m_xf.R,u=this.m_localAnchor2.x-s.m_sweep.localCenter.x,h=this.m_localAnchor2.y-s.m_sweep.localCenter.y,p=e.col1.x*u+e.col2.x*h,h=e.col1.y*u+e.col2.y*h,u=p,c=u*l-h*a,this.m_J.linearB.Set(-this.m_ratio*a,-this.m_ratio*l),this.m_J.angularB=-this.m_ratio*c,f+=this.m_ratio*this.m_ratio*(s.m_invMass+s.m_invI*c*c)),this.m_mass=f>0?1/f:0,t.warmStarting?(o.m_linearVelocity.x+=o.m_invMass*this.m_impulse*this.m_J.linearA.x,o.m_linearVelocity.y+=o.m_invMass*this.m_impulse*this.m_J.linearA.y,o.m_angularVelocity+=o.m_invI*this.m_impulse*this.m_J.angularA,s.m_linearVelocity.x+=s.m_invMass*this.m_impulse*this.m_J.linearB.x,s.m_linearVelocity.y+=s.m_invMass*this.m_impulse*this.m_J.linearB.y,s.m_angularVelocity+=s.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},c.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=this.m_J.Compute(e.m_linearVelocity,e.m_angularVelocity,i.m_linearVelocity,i.m_angularVelocity),r=-this.m_mass*n;this.m_impulse+=r,e.m_linearVelocity.x+=e.m_invMass*r*this.m_J.linearA.x,e.m_linearVelocity.y+=e.m_invMass*r*this.m_J.linearA.y,e.m_angularVelocity+=e.m_invI*r*this.m_J.angularA,i.m_linearVelocity.x+=i.m_invMass*r*this.m_J.linearB.x,i.m_linearVelocity.y+=i.m_invMass*r*this.m_J.linearB.y,i.m_angularVelocity+=i.m_invI*r*this.m_J.angularB},c.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i=this.m_bodyA,n=this.m_bodyB,r=0,o=0;r=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),o=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();var s=this.m_constant-(r+this.m_ratio*o),a=-this.m_mass*s;return i.m_sweep.c.x+=i.m_invMass*a*this.m_J.linearA.x,i.m_sweep.c.y+=i.m_invMass*a*this.m_J.linearA.y,i.m_sweep.a+=i.m_invI*a*this.m_J.angularA,n.m_sweep.c.x+=n.m_invMass*a*this.m_J.linearB.x,n.m_sweep.c.y+=n.m_invMass*a*this.m_J.linearB.y,n.m_sweep.a+=n.m_invI*a*this.m_J.angularB,i.SynchronizeTransform(),n.SynchronizeTransform(),0<t.b2_linearSlop},i.inherit(p,i.Dynamics.Joints.b2JointDef),p.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,p.b2GearJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},p.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},f.b2Jacobian=function(){this.linearA=new o,this.linearB=new o},f.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},f.prototype.Set=function(t,e,i,n){void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(i),this.angularB=n},f.prototype.Compute=function(t,e,i,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*n},m.b2Joint=function(){this.m_edgeA=new _,this.m_edgeB=new _,this.m_localCenterA=new o,this.m_localCenterB=new o},m.prototype.GetType=function(){return this.m_type},m.prototype.GetAnchorA=function(){return null},m.prototype.GetAnchorB=function(){return null},m.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),null},m.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},m.prototype.GetBodyA=function(){return this.m_bodyA},m.prototype.GetBodyB=function(){return this.m_bodyB},m.prototype.GetNext=function(){return this.m_next},m.prototype.GetUserData=function(){return this.m_userData},m.prototype.SetUserData=function(t){this.m_userData=t},m.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},m.Create=function(t,e){var i=null;switch(t.type){case m.e_distanceJoint:i=new a(t instanceof l?t:null);break;case m.e_mouseJoint:i=new x(t instanceof b?t:null);break;case m.e_prismaticJoint:i=new g(t instanceof w?t:null);break;case m.e_revoluteJoint:i=new T(t instanceof A?t:null);break;case m.e_pulleyJoint:i=new S(t instanceof C?t:null);break;case m.e_gearJoint:i=new c(t instanceof p?t:null);break;case m.e_lineJoint:i=new y(t instanceof v?t:null);break;case m.e_weldJoint:i=new M(t instanceof E?t:null);break;case m.e_frictionJoint:i=new u(t instanceof h?t:null)}return i},m.Destroy=function(t,e){},m.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},m.prototype.InitVelocityConstraints=function(t){},m.prototype.SolveVelocityConstraints=function(t){},m.prototype.FinalizeVelocityConstraints=function(){},m.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!1},i.postDefs.push(function(){i.Dynamics.Joints.b2Joint.e_unknownJoint=0,i.Dynamics.Joints.b2Joint.e_revoluteJoint=1,i.Dynamics.Joints.b2Joint.e_prismaticJoint=2,i.Dynamics.Joints.b2Joint.e_distanceJoint=3,i.Dynamics.Joints.b2Joint.e_pulleyJoint=4,i.Dynamics.Joints.b2Joint.e_mouseJoint=5,i.Dynamics.Joints.b2Joint.e_gearJoint=6,i.Dynamics.Joints.b2Joint.e_lineJoint=7,i.Dynamics.Joints.b2Joint.e_weldJoint=8,i.Dynamics.Joints.b2Joint.e_frictionJoint=9,i.Dynamics.Joints.b2Joint.e_inactiveLimit=0,i.Dynamics.Joints.b2Joint.e_atLowerLimit=1,i.Dynamics.Joints.b2Joint.e_atUpperLimit=2,i.Dynamics.Joints.b2Joint.e_equalLimits=3}),d.b2JointDef=function(){},d.prototype.b2JointDef=function(){this.type=m.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},_.b2JointEdge=function(){},i.inherit(y,i.Dynamics.Joints.b2Joint),y.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,y.b2LineJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new e,this.m_impulse=new o},y.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},y.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},y.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},y.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},y.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2),r=n.x-i.x,o=n.y-i.y,s=t.GetWorldVector(this.m_localXAxis1);return s.x*r+s.y*o},y.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*r;r=t.col1.y*n+t.col2.y*r,n=o,t=i.m_xf.R;var s=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*s+t.col2.x*a,a=t.col1.y*s+t.col2.y*a,s=o;var l=e.m_sweep.c.x+n,u=e.m_sweep.c.y+r,h=i.m_sweep.c.x+s,c=i.m_sweep.c.y+a,p=h-l,f=c-u,m=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,_=i.m_linearVelocity,y=e.m_angularVelocity,v=i.m_angularVelocity;return p*(-y*m.y)+f*(y*m.x)+(m.x*(_.x+-v*a-d.x- -y*r)+m.y*(_.y+v*s-d.y-y*n))},y.prototype.IsLimitEnabled=function(){return this.m_enableLimit},y.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},y.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},y.prototype.GetUpperLimit=function(){return this.m_upperTranslation},y.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},y.prototype.IsMotorEnabled=function(){return this.m_enableMotor},y.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},y.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},y.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},y.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},y.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},y.prototype.GetMotorForce=function(){return this.m_motorImpulse},y.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},y.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,o=this.m_bodyB,s=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(o.GetLocalCenter());var a=n.GetTransform();o.GetTransform();i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,u=this.m_localAnchor1.y-this.m_localCenterA.y;s=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=s,i=o.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,c=this.m_localAnchor2.y-this.m_localCenterB.y;s=i.col1.x*h+i.col2.x*c,c=i.col1.y*h+i.col2.y*c,h=s;var p=o.m_sweep.c.x+h-n.m_sweep.c.x-l,f=o.m_sweep.c.y+c-n.m_sweep.c.y-u;this.m_invMassA=n.m_invMass,this.m_invMassB=o.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=o.m_invI,this.m_axis.SetV(r.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(p+l)*this.m_axis.y-(f+u)*this.m_axis.x,this.m_a2=h*this.m_axis.y-c*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(r.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(p+l)*this.m_perp.y-(f+u)*this.m_perp.x,this.m_s2=h*this.m_perp.y-c*this.m_perp.x;var d=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,v=this.m_invIB;if(this.m_K.col1.x=d+_+y*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1*this.m_a1+v*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=d+_+y*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2,this.m_enableLimit){var x=this.m_axis.x*p+this.m_axis.y*f;r.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=m.e_equalLimits:x<=this.m_lowerTranslation?this.m_limitState!=m.e_atLowerLimit&&(this.m_limitState=m.e_atLowerLimit,this.m_impulse.y=0):x>=this.m_upperTranslation?this.m_limitState!=m.e_atUpperLimit&&(this.m_limitState=m.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=m.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,w=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,S=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*w,o.m_linearVelocity.x+=this.m_invMassB*b,o.m_linearVelocity.y+=this.m_invMassB*g,o.m_angularVelocity+=this.m_invIB*S}else this.m_impulse.SetZero(),this.m_motorImpulse=0},y.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=e.m_linearVelocity,s=e.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,u=0,h=0,c=0,p=0;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var f=this.m_axis.x*(a.x-n.x)+this.m_axis.y*(a.y-n.y)+this.m_a2*l-this.m_a1*s,d=this.m_motorMass*(this.m_motorSpeed-f),_=this.m_motorImpulse,y=t.dt*this.m_maxMotorForce;this.m_motorImpulse=r.Clamp(this.m_motorImpulse+d,-y,y),d=this.m_motorImpulse-_,u=d*this.m_axis.x,h=d*this.m_axis.y,c=d*this.m_a1,p=d*this.m_a2,n.x-=this.m_invMassA*u,n.y-=this.m_invMassA*h,s-=this.m_invIA*c,a.x+=this.m_invMassB*u,a.y+=this.m_invMassB*h,l+=this.m_invIB*p}var v=this.m_perp.x*(a.x-n.x)+this.m_perp.y*(a.y-n.y)+this.m_s2*l-this.m_s1*s;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var x=this.m_axis.x*(a.x-n.x)+this.m_axis.y*(a.y-n.y)+this.m_a2*l-this.m_a1*s,b=this.m_impulse.Copy(),g=this.m_K.Solve(new o,-v,-x);this.m_impulse.Add(g),this.m_limitState==m.e_atLowerLimit?this.m_impulse.y=r.Max(this.m_impulse.y,0):this.m_limitState==m.e_atUpperLimit&&(this.m_impulse.y=r.Min(this.m_impulse.y,0));var w=-v-(this.m_impulse.y-b.y)*this.m_K.col2.x,S=0;S=0!=this.m_K.col1.x?w/this.m_K.col1.x+b.x:b.x,this.m_impulse.x=S,g.x=this.m_impulse.x-b.x,g.y=this.m_impulse.y-b.y,u=g.x*this.m_perp.x+g.y*this.m_axis.x,h=g.x*this.m_perp.y+g.y*this.m_axis.y,c=g.x*this.m_s1+g.y*this.m_a1,p=g.x*this.m_s2+g.y*this.m_a2,n.x-=this.m_invMassA*u,n.y-=this.m_invMassA*h,s-=this.m_invIA*c,a.x+=this.m_invMassB*u,a.y+=this.m_invMassB*h,l+=this.m_invIB*p}else{var C=0;C=0!=this.m_K.col1.x?-v/this.m_K.col1.x:0,this.m_impulse.x+=C,u=C*this.m_perp.x,h=C*this.m_perp.y,c=C*this.m_s1,p=C*this.m_s2,n.x-=this.m_invMassA*u,n.y-=this.m_invMassA*h,s-=this.m_invIA*c,a.x+=this.m_invMassB*u,a.y+=this.m_invMassB*h,l+=this.m_invIB*p}e.m_linearVelocity.SetV(n),e.m_angularVelocity=s,i.m_linearVelocity.SetV(a),i.m_angularVelocity=l},y.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var n,s=this.m_bodyA,a=this.m_bodyB,l=s.m_sweep.c,u=s.m_sweep.a,h=a.m_sweep.c,c=a.m_sweep.a,p=0,f=0,m=0,d=0,_=0,y=0,v=0,x=!1,b=0,g=e.FromAngle(u),w=e.FromAngle(c);n=g;var S=this.m_localAnchor1.x-this.m_localCenterA.x,C=this.m_localAnchor1.y-this.m_localCenterA.y;p=n.col1.x*S+n.col2.x*C,C=n.col1.y*S+n.col2.y*C,S=p,n=w;var T=this.m_localAnchor2.x-this.m_localCenterB.x,A=this.m_localAnchor2.y-this.m_localCenterB.y;p=n.col1.x*T+n.col2.x*A,A=n.col1.y*T+n.col2.y*A,T=p;var M=h.x+T-l.x-S,E=h.y+A-l.y-C;if(this.m_enableLimit){this.m_axis=r.MulMV(g,this.m_localXAxis1),this.m_a1=(M+S)*this.m_axis.y-(E+C)*this.m_axis.x,this.m_a2=T*this.m_axis.y-A*this.m_axis.x;var D=this.m_axis.x*M+this.m_axis.y*E;r.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(b=r.Clamp(D,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),y=r.Abs(D),x=!0):D<=this.m_lowerTranslation?(b=r.Clamp(D-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),y=this.m_lowerTranslation-D,x=!0):D>=this.m_upperTranslation&&(b=r.Clamp(D-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),y=D-this.m_upperTranslation,x=!0)}this.m_perp=r.MulMV(g,this.m_localYAxis1),this.m_s1=(M+S)*this.m_perp.y-(E+C)*this.m_perp.x,this.m_s2=T*this.m_perp.y-A*this.m_perp.x;var P=new o,I=this.m_perp.x*M+this.m_perp.y*E;if(y=r.Max(y,r.Abs(I)),v=0,x)f=this.m_invMassA,m=this.m_invMassB,d=this.m_invIA,_=this.m_invIB,this.m_K.col1.x=f+m+d*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=f+m+d*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_K.Solve(P,-I,-b);else{f=this.m_invMassA,m=this.m_invMassB,d=this.m_invIA,_=this.m_invIB;var O=f+m+d*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,R=0;R=0!=O?-I/O:0,P.x=R,P.y=0}var B=P.x*this.m_perp.x+P.y*this.m_axis.x,L=P.x*this.m_perp.y+P.y*this.m_axis.y,F=P.x*this.m_s1+P.y*this.m_a1,V=P.x*this.m_s2+P.y*this.m_a2;return l.x-=this.m_invMassA*B,l.y-=this.m_invMassA*L,u-=this.m_invIA*F,h.x+=this.m_invMassB*B,h.y+=this.m_invMassB*L,c+=this.m_invIB*V,s.m_sweep.a=u,a.m_sweep.a=c,s.SynchronizeTransform(),a.SynchronizeTransform(),y<=t.b2_linearSlop&&v<=t.b2_angularSlop},i.inherit(v,i.Dynamics.Joints.b2JointDef),v.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,v.b2LineJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},v.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},v.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n)},i.inherit(x,i.Dynamics.Joints.b2Joint),x.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,x.b2MouseJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new o,this.m_target=new o,this.m_impulse=new o,this.m_mass=new e,this.m_C=new o},x.prototype.GetAnchorA=function(){return this.m_target},x.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},x.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},x.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},x.prototype.GetTarget=function(){return this.m_target},x.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},x.prototype.GetMaxForce=function(){return this.m_maxForce},x.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},x.prototype.GetFrequency=function(){return this.m_frequencyHz},x.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},x.prototype.GetDampingRatio=function(){return this.m_dampingRatio},x.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},x.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,n=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*n.col1.x+i*n.col1.y,this.m_localAnchor.y=e*n.col2.x+i*n.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},x.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,i=e.GetMass(),n=2*Math.PI*this.m_frequencyHz,r=2*i*this.m_dampingRatio*n,o=i*n*n;this.m_gamma=t.dt*(r+t.dt*o),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*o*this.m_gamma;var s;s=e.m_xf.R;var a=this.m_localAnchor.x-e.m_sweep.localCenter.x,l=this.m_localAnchor.y-e.m_sweep.localCenter.y,u=s.col1.x*a+s.col2.x*l;l=s.col1.y*a+s.col2.y*l,a=u;var h=e.m_invMass,c=e.m_invI;this.K1.col1.x=h,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=h,this.K2.col1.x=c*l*l,this.K2.col2.x=-c*a*l,this.K2.col1.y=-c*a*l,this.K2.col2.y=c*a*a,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+a-this.m_target.x,this.m_C.y=e.m_sweep.c.y+l-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=h*this.m_impulse.x,e.m_linearVelocity.y+=h*this.m_impulse.y,e.m_angularVelocity+=c*(a*this.m_impulse.y-l*this.m_impulse.x)},x.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyB,n=0,r=0;e=i.m_xf.R;var o=this.m_localAnchor.x-i.m_sweep.localCenter.x,s=this.m_localAnchor.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*s,s=e.col1.y*o+e.col2.y*s,o=n;var a=i.m_linearVelocity.x+-i.m_angularVelocity*s,l=i.m_linearVelocity.y+i.m_angularVelocity*o;e=this.m_mass,n=a+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,r=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var u=-(e.col1.x*n+e.col2.x*r),h=-(e.col1.y*n+e.col2.y*r),c=this.m_impulse.x,p=this.m_impulse.y;this.m_impulse.x+=u,this.m_impulse.y+=h;var f=t.dt*this.m_maxForce;this.m_impulse.LengthSquared()>f*f&&this.m_impulse.Multiply(f/this.m_impulse.Length()),u=this.m_impulse.x-c,h=this.m_impulse.y-p,i.m_linearVelocity.x+=i.m_invMass*u,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(o*h-s*u)},x.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},i.inherit(b,i.Dynamics.Joints.b2JointDef),b.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,b.b2MouseJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new o},b.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},i.inherit(g,i.Dynamics.Joints.b2Joint),g.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,g.b2PrismaticJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new n,this.m_impulse=new s},g.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},g.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},g.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},g.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},g.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2),r=n.x-i.x,o=n.y-i.y,s=t.GetWorldVector(this.m_localXAxis1);return s.x*r+s.y*o},g.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*r;r=t.col1.y*n+t.col2.y*r,n=o,t=i.m_xf.R;var s=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*s+t.col2.x*a,a=t.col1.y*s+t.col2.y*a,s=o;var l=e.m_sweep.c.x+n,u=e.m_sweep.c.y+r,h=i.m_sweep.c.x+s,c=i.m_sweep.c.y+a,p=h-l,f=c-u,m=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,_=i.m_linearVelocity,y=e.m_angularVelocity,v=i.m_angularVelocity;return p*(-y*m.y)+f*(y*m.x)+(m.x*(_.x+-v*a-d.x- -y*r)+m.y*(_.y+v*s-d.y-y*n))},g.prototype.IsLimitEnabled=function(){return this.m_enableLimit},g.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},g.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},g.prototype.GetUpperLimit=function(){return this.m_upperTranslation},g.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},g.prototype.IsMotorEnabled=function(){return this.m_enableMotor},g.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},g.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},g.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},g.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},g.prototype.GetMotorForce=function(){return this.m_motorImpulse},g.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},g.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,o=this.m_bodyB,s=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(o.GetLocalCenter());var a=n.GetTransform();o.GetTransform();i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,u=this.m_localAnchor1.y-this.m_localCenterA.y;s=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=s,i=o.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,c=this.m_localAnchor2.y-this.m_localCenterB.y;s=i.col1.x*h+i.col2.x*c,c=i.col1.y*h+i.col2.y*c,h=s;var p=o.m_sweep.c.x+h-n.m_sweep.c.x-l,f=o.m_sweep.c.y+c-n.m_sweep.c.y-u;this.m_invMassA=n.m_invMass,this.m_invMassB=o.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=o.m_invI,this.m_axis.SetV(r.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(p+l)*this.m_axis.y-(f+u)*this.m_axis.x,this.m_a2=h*this.m_axis.y-c*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(r.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(p+l)*this.m_perp.y-(f+u)*this.m_perp.x,this.m_s2=h*this.m_perp.y-c*this.m_perp.x;var d=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,v=this.m_invIB;if(this.m_K.col1.x=d+_+y*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+v*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+v*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+v,this.m_K.col2.z=y*this.m_a1+v*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=d+_+y*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2,this.m_enableLimit){var x=this.m_axis.x*p+this.m_axis.y*f;r.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=m.e_equalLimits:x<=this.m_lowerTranslation?this.m_limitState!=m.e_atLowerLimit&&(this.m_limitState=m.e_atLowerLimit,this.m_impulse.z=0):x>=this.m_upperTranslation?this.m_limitState!=m.e_atUpperLimit&&(this.m_limitState=m.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=m.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,w=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,S=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*w,o.m_linearVelocity.x+=this.m_invMassB*b,o.m_linearVelocity.y+=this.m_invMassB*g,o.m_angularVelocity+=this.m_invIB*S}else this.m_impulse.SetZero(),this.m_motorImpulse=0},g.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=e.m_linearVelocity,a=e.m_angularVelocity,l=i.m_linearVelocity,u=i.m_angularVelocity,h=0,c=0,p=0,f=0;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var d=this.m_axis.x*(l.x-n.x)+this.m_axis.y*(l.y-n.y)+this.m_a2*u-this.m_a1*a,_=this.m_motorMass*(this.m_motorSpeed-d),y=this.m_motorImpulse,v=t.dt*this.m_maxMotorForce;this.m_motorImpulse=r.Clamp(this.m_motorImpulse+_,-v,v),_=this.m_motorImpulse-y,h=_*this.m_axis.x,c=_*this.m_axis.y,p=_*this.m_a1,f=_*this.m_a2,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*c,a-=this.m_invIA*p,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*c,u+=this.m_invIB*f}var x=this.m_perp.x*(l.x-n.x)+this.m_perp.y*(l.y-n.y)+this.m_s2*u-this.m_s1*a,b=u-a;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var g=this.m_axis.x*(l.x-n.x)+this.m_axis.y*(l.y-n.y)+this.m_a2*u-this.m_a1*a,w=this.m_impulse.Copy(),S=this.m_K.Solve33(new s,-x,-b,-g);this.m_impulse.Add(S),this.m_limitState==m.e_atLowerLimit?this.m_impulse.z=r.Max(this.m_impulse.z,0):this.m_limitState==m.e_atUpperLimit&&(this.m_impulse.z=r.Min(this.m_impulse.z,0));var C=-x-(this.m_impulse.z-w.z)*this.m_K.col3.x,T=-b-(this.m_impulse.z-w.z)*this.m_K.col3.y,A=this.m_K.Solve22(new o,C,T);A.x+=w.x,A.y+=w.y,this.m_impulse.x=A.x,this.m_impulse.y=A.y,S.x=this.m_impulse.x-w.x,S.y=this.m_impulse.y-w.y,S.z=this.m_impulse.z-w.z,h=S.x*this.m_perp.x+S.z*this.m_axis.x,c=S.x*this.m_perp.y+S.z*this.m_axis.y,p=S.x*this.m_s1+S.y+S.z*this.m_a1,f=S.x*this.m_s2+S.y+S.z*this.m_a2,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*c,a-=this.m_invIA*p,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*c,u+=this.m_invIB*f}else{var M=this.m_K.Solve22(new o,-x,-b);this.m_impulse.x+=M.x,this.m_impulse.y+=M.y,h=M.x*this.m_perp.x,c=M.x*this.m_perp.y,p=M.x*this.m_s1+M.y,f=M.x*this.m_s2+M.y,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*c,a-=this.m_invIA*p,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*c,u+=this.m_invIB*f}e.m_linearVelocity.SetV(n),e.m_angularVelocity=a,i.m_linearVelocity.SetV(l),i.m_angularVelocity=u},g.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var n,a=this.m_bodyA,l=this.m_bodyB,u=a.m_sweep.c,h=a.m_sweep.a,c=l.m_sweep.c,p=l.m_sweep.a,f=0,m=0,d=0,_=0,y=0,v=0,x=0,b=!1,g=0,w=e.FromAngle(h),S=e.FromAngle(p);n=w;var C=this.m_localAnchor1.x-this.m_localCenterA.x,T=this.m_localAnchor1.y-this.m_localCenterA.y;f=n.col1.x*C+n.col2.x*T,T=n.col1.y*C+n.col2.y*T,C=f,n=S;var A=this.m_localAnchor2.x-this.m_localCenterB.x,M=this.m_localAnchor2.y-this.m_localCenterB.y;f=n.col1.x*A+n.col2.x*M,M=n.col1.y*A+n.col2.y*M,A=f;var E=c.x+A-u.x-C,D=c.y+M-u.y-T;if(this.m_enableLimit){this.m_axis=r.MulMV(w,this.m_localXAxis1),this.m_a1=(E+C)*this.m_axis.y-(D+T)*this.m_axis.x,this.m_a2=A*this.m_axis.y-M*this.m_axis.x;var P=this.m_axis.x*E+this.m_axis.y*D;r.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(g=r.Clamp(P,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),v=r.Abs(P),b=!0):P<=this.m_lowerTranslation?(g=r.Clamp(P-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),v=this.m_lowerTranslation-P,b=!0):P>=this.m_upperTranslation&&(g=r.Clamp(P-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),v=P-this.m_upperTranslation,b=!0)}this.m_perp=r.MulMV(w,this.m_localYAxis1),this.m_s1=(E+C)*this.m_perp.y-(D+T)*this.m_perp.x,this.m_s2=A*this.m_perp.y-M*this.m_perp.x;var I=new s,O=this.m_perp.x*E+this.m_perp.y*D,R=p-h-this.m_refAngle;if(v=r.Max(v,r.Abs(O)),x=r.Abs(R),b)m=this.m_invMassA,d=this.m_invMassB,_=this.m_invIA,y=this.m_invIB,this.m_K.col1.x=m+d+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.col1.y=_*this.m_s1+y*this.m_s2,this.m_K.col1.z=_*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=_+y,this.m_K.col2.z=_*this.m_a1+y*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=m+d+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_K.Solve33(I,-O,-R,-g);else{m=this.m_invMassA,d=this.m_invMassB,_=this.m_invIA,y=this.m_invIB;var B=m+d+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,L=_*this.m_s1+y*this.m_s2,F=_+y;this.m_K.col1.Set(B,L,0),this.m_K.col2.Set(L,F,0);var V=this.m_K.Solve22(new o,-O,-R);I.x=V.x,I.y=V.y,I.z=0}var k=I.x*this.m_perp.x+I.z*this.m_axis.x,N=I.x*this.m_perp.y+I.z*this.m_axis.y,G=I.x*this.m_s1+I.y+I.z*this.m_a1,j=I.x*this.m_s2+I.y+I.z*this.m_a2;return u.x-=this.m_invMassA*k,u.y-=this.m_invMassA*N,h-=this.m_invIA*G,c.x+=this.m_invMassB*k,c.y+=this.m_invMassB*N,p+=this.m_invIB*j,a.m_sweep.a=h,l.m_sweep.a=p,a.SynchronizeTransform(),l.SynchronizeTransform(),v<=t.b2_linearSlop&&x<=t.b2_angularSlop},i.inherit(w,i.Dynamics.Joints.b2JointDef),w.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,w.b2PrismaticJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},w.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},w.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},i.inherit(S,i.Dynamics.Joints.b2Joint),S.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,S.b2PulleyJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u1=new o,this.m_u2=new o},S.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},S.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},S.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},S.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},S.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},S.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},S.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,n=t.x-e,r=t.y-i;return Math.sqrt(n*n+r*r)},S.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,n=t.x-e,r=t.y-i;return Math.sqrt(n*n+r*r)},S.prototype.GetRatio=function(){return this.m_ratio},S.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t);this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=r.Min(t.maxLengthA,this.m_constant-this.m_ratio*S.b2_minPulleyLength),this.m_maxLength2=r.Min(t.maxLengthB,(this.m_constant-S.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},S.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,r=this.m_bodyB;i=n.m_xf.R;var o=this.m_localAnchor1.x-n.m_sweep.localCenter.x,s=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=i.col1.x*o+i.col2.x*s;s=i.col1.y*o+i.col2.y*s,o=a,i=r.m_xf.R;var l=this.m_localAnchor2.x-r.m_sweep.localCenter.x,u=this.m_localAnchor2.y-r.m_sweep.localCenter.y;a=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=a;var h=n.m_sweep.c.x+o,c=n.m_sweep.c.y+s,p=r.m_sweep.c.x+l,f=r.m_sweep.c.y+u,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,_=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,y=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,v=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(h-d,c-_),this.m_u2.Set(p-y,f-v);var x=this.m_u1.Length(),b=this.m_u2.Length();x>t.b2_linearSlop?this.m_u1.Multiply(1/x):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero(),this.m_constant-x-this.m_ratio*b>0?(this.m_state=m.e_inactiveLimit,this.m_impulse=0):this.m_state=m.e_atUpperLimit,x<this.m_maxLength1?(this.m_limitState1=m.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=m.e_atUpperLimit,b<this.m_maxLength2?(this.m_limitState2=m.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=m.e_atUpperLimit;var g=o*this.m_u1.y-s*this.m_u1.x,w=l*this.m_u2.y-u*this.m_u2.x;if(this.m_limitMass1=n.m_invMass+n.m_invI*g*g,this.m_limitMass2=r.m_invMass+r.m_invI*w*w,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var S=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,C=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,T=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,A=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;n.m_linearVelocity.x+=n.m_invMass*S,n.m_linearVelocity.y+=n.m_invMass*C,n.m_angularVelocity+=n.m_invI*(o*C-s*S),r.m_linearVelocity.x+=r.m_invMass*T,r.m_linearVelocity.y+=r.m_invMass*A,r.m_angularVelocity+=r.m_invI*(l*A-u*T)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},S.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,s=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=e.col1.x*o+e.col2.x*s;s=e.col1.y*o+e.col2.y*s,o=a,e=n.m_xf.R;var l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,u=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=e.col1.x*l+e.col2.x*u,u=e.col1.y*l+e.col2.y*u,l=a;var h=0,c=0,p=0,f=0,d=0,_=0,y=0,v=0,x=0,b=0,g=0;this.m_state==m.e_atUpperLimit&&(h=i.m_linearVelocity.x+-i.m_angularVelocity*s,c=i.m_linearVelocity.y+i.m_angularVelocity*o,p=n.m_linearVelocity.x+-n.m_angularVelocity*u,f=n.m_linearVelocity.y+n.m_angularVelocity*l,x=-(this.m_u1.x*h+this.m_u1.y*c)-this.m_ratio*(this.m_u2.x*p+this.m_u2.y*f),b=this.m_pulleyMass*-x,g=this.m_impulse,this.m_impulse=r.Max(0,this.m_impulse+b),b=this.m_impulse-g,d=-b*this.m_u1.x,_=-b*this.m_u1.y,y=-this.m_ratio*b*this.m_u2.x,v=-this.m_ratio*b*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*d,i.m_linearVelocity.y+=i.m_invMass*_,i.m_angularVelocity+=i.m_invI*(o*_-s*d),n.m_linearVelocity.x+=n.m_invMass*y,n.m_linearVelocity.y+=n.m_invMass*v,n.m_angularVelocity+=n.m_invI*(l*v-u*y)),this.m_limitState1==m.e_atUpperLimit&&(h=i.m_linearVelocity.x+-i.m_angularVelocity*s,c=i.m_linearVelocity.y+i.m_angularVelocity*o,x=-(this.m_u1.x*h+this.m_u1.y*c),b=-this.m_limitMass1*x,g=this.m_limitImpulse1,this.m_limitImpulse1=r.Max(0,this.m_limitImpulse1+b),b=this.m_limitImpulse1-g,d=-b*this.m_u1.x,_=-b*this.m_u1.y,i.m_linearVelocity.x+=i.m_invMass*d,i.m_linearVelocity.y+=i.m_invMass*_,i.m_angularVelocity+=i.m_invI*(o*_-s*d)),this.m_limitState2==m.e_atUpperLimit&&(p=n.m_linearVelocity.x+-n.m_angularVelocity*u,f=n.m_linearVelocity.y+n.m_angularVelocity*l,x=-(this.m_u2.x*p+this.m_u2.y*f),b=-this.m_limitMass2*x,g=this.m_limitImpulse2,this.m_limitImpulse2=r.Max(0,this.m_limitImpulse2+b),b=this.m_limitImpulse2-g,y=-b*this.m_u2.x,v=-b*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*y,n.m_linearVelocity.y+=n.m_invMass*v,n.m_angularVelocity+=n.m_invI*(l*v-u*y))},S.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=this.m_bodyA,o=this.m_bodyB,s=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,a=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,l=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,u=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,h=0,c=0,p=0,f=0,d=0,_=0,y=0,v=0,x=0,b=0,g=0,w=0,S=0,C=0;return this.m_state==m.e_atUpperLimit&&(i=n.m_xf.R,h=this.m_localAnchor1.x-n.m_sweep.localCenter.x,c=this.m_localAnchor1.y-n.m_sweep.localCenter.y,S=i.col1.x*h+i.col2.x*c,c=i.col1.y*h+i.col2.y*c,h=S,i=o.m_xf.R,p=this.m_localAnchor2.x-o.m_sweep.localCenter.x,f=this.m_localAnchor2.y-o.m_sweep.localCenter.y,S=i.col1.x*p+i.col2.x*f,f=i.col1.y*p+i.col2.y*f,p=S,d=n.m_sweep.c.x+h,_=n.m_sweep.c.y+c,y=o.m_sweep.c.x+p,v=o.m_sweep.c.y+f,this.m_u1.Set(d-s,_-a),this.m_u2.Set(y-l,v-u),x=this.m_u1.Length(),b=this.m_u2.Length(),x>t.b2_linearSlop?this.m_u1.Multiply(1/x):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero(),g=this.m_constant-x-this.m_ratio*b,C=r.Max(C,-g),g=r.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_pulleyMass*g,d=-w*this.m_u1.x,_=-w*this.m_u1.y,y=-this.m_ratio*w*this.m_u2.x,v=-this.m_ratio*w*this.m_u2.y,n.m_sweep.c.x+=n.m_invMass*d,n.m_sweep.c.y+=n.m_invMass*_,n.m_sweep.a+=n.m_invI*(h*_-c*d),o.m_sweep.c.x+=o.m_invMass*y,o.m_sweep.c.y+=o.m_invMass*v,o.m_sweep.a+=o.m_invI*(p*v-f*y),n.SynchronizeTransform(),o.SynchronizeTransform()),this.m_limitState1==m.e_atUpperLimit&&(i=n.m_xf.R,h=this.m_localAnchor1.x-n.m_sweep.localCenter.x,c=this.m_localAnchor1.y-n.m_sweep.localCenter.y,S=i.col1.x*h+i.col2.x*c,c=i.col1.y*h+i.col2.y*c,h=S,d=n.m_sweep.c.x+h,_=n.m_sweep.c.y+c,this.m_u1.Set(d-s,_-a),x=this.m_u1.Length(),x>t.b2_linearSlop?(this.m_u1.x*=1/x,this.m_u1.y*=1/x):this.m_u1.SetZero(),g=this.m_maxLength1-x,C=r.Max(C,-g),g=r.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_limitMass1*g,d=-w*this.m_u1.x,_=-w*this.m_u1.y,n.m_sweep.c.x+=n.m_invMass*d,n.m_sweep.c.y+=n.m_invMass*_,n.m_sweep.a+=n.m_invI*(h*_-c*d),n.SynchronizeTransform()),this.m_limitState2==m.e_atUpperLimit&&(i=o.m_xf.R,p=this.m_localAnchor2.x-o.m_sweep.localCenter.x,f=this.m_localAnchor2.y-o.m_sweep.localCenter.y,S=i.col1.x*p+i.col2.x*f,f=i.col1.y*p+i.col2.y*f,p=S,y=o.m_sweep.c.x+p,v=o.m_sweep.c.y+f,this.m_u2.Set(y-l,v-u),b=this.m_u2.Length(),b>t.b2_linearSlop?(this.m_u2.x*=1/b,this.m_u2.y*=1/b):this.m_u2.SetZero(),g=this.m_maxLength2-b,C=r.Max(C,-g),g=r.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_limitMass2*g,y=-w*this.m_u2.x,v=-w*this.m_u2.y,o.m_sweep.c.x+=o.m_invMass*y,o.m_sweep.c.y+=o.m_invMass*v,o.m_sweep.a+=o.m_invI*(p*v-f*y),o.SynchronizeTransform()),C<t.b2_linearSlop},i.postDefs.push(function(){i.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),i.inherit(C,i.Dynamics.Joints.b2JointDef),C.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,C.b2PulleyJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new o,this.groundAnchorB=new o,this.localAnchorA=new o,this.localAnchorB=new o},C.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},C.prototype.Initialize=function(t,e,i,n,r,o,s){void 0===s&&(s=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(i),this.groundAnchorB.SetV(n),this.localAnchorA=this.bodyA.GetLocalPoint(r),this.localAnchorB=this.bodyB.GetLocalPoint(o);var a=r.x-i.x,l=r.y-i.y;this.lengthA=Math.sqrt(a*a+l*l);var u=o.x-n.x,h=o.y-n.y;this.lengthB=Math.sqrt(u*u+h*h),this.ratio=s;var c=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=c-this.ratio*S.b2_minPulleyLength,this.maxLengthB=(c-S.b2_minPulleyLength)/this.ratio},i.inherit(T,i.Dynamics.Joints.b2Joint),T.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,T.b2RevoluteJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new s,this.impulse2=new o,this.reduced=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_impulse=new s,this.m_mass=new n},T.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},T.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},T.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},T.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},T.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},T.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},T.prototype.IsLimitEnabled=function(){return this.m_enableLimit};T.prototype.EnableLimit=function(t){this.m_enableLimit=t},T.prototype.GetLowerLimit=function(){return this.m_lowerAngle},T.prototype.GetUpperLimit=function(){return this.m_upperAngle},T.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},T.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},T.prototype.EnableMotor=function(t){this.m_enableMotor=t},T.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},T.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},T.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},T.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},T.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit},T.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,o=this.m_bodyB,s=0;this.m_enableMotor||this.m_enableLimit,i=n.m_xf.R;var a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y;s=i.col1.x*a+i.col2.x*l,l=i.col1.y*a+i.col2.y*l,a=s,i=o.m_xf.R;var u=this.m_localAnchor2.x-o.m_sweep.localCenter.x,h=this.m_localAnchor2.y-o.m_sweep.localCenter.y;s=i.col1.x*u+i.col2.x*h,h=i.col1.y*u+i.col2.y*h,u=s;var c=n.m_invMass,p=o.m_invMass,f=n.m_invI,d=o.m_invI;if(this.m_mass.col1.x=c+p+l*l*f+h*h*d,this.m_mass.col2.x=-l*a*f-h*u*d,this.m_mass.col3.x=-l*f-h*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+p+a*a*f+u*u*d,this.m_mass.col3.y=a*f+u*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=f+d,this.m_motorMass=1/(f+d),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var _=o.m_sweep.a-n.m_sweep.a-this.m_referenceAngle;r.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=m.e_equalLimits:_<=this.m_lowerAngle?(this.m_limitState!=m.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=m.e_atLowerLimit):_>=this.m_upperAngle?(this.m_limitState!=m.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=m.e_atUpperLimit):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=m.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var y=this.m_impulse.x,v=this.m_impulse.y;n.m_linearVelocity.x-=c*y,n.m_linearVelocity.y-=c*v,n.m_angularVelocity-=f*(a*v-l*y+this.m_motorImpulse+this.m_impulse.z),o.m_linearVelocity.x+=p*y,o.m_linearVelocity.y+=p*v,o.m_angularVelocity+=d*(u*v-h*y+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},T.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB,o=0,s=0,a=0,l=0,u=0,h=i.m_linearVelocity,c=i.m_angularVelocity,p=n.m_linearVelocity,f=n.m_angularVelocity,d=i.m_invMass,_=n.m_invMass,y=i.m_invI,v=n.m_invI;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var x=f-c-this.m_motorSpeed,b=this.m_motorMass*-x,g=this.m_motorImpulse,w=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=r.Clamp(this.m_motorImpulse+b,-w,w),b=this.m_motorImpulse-g,c-=y*b,f+=v*b}if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){e=i.m_xf.R,s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y,o=e.col1.x*s+e.col2.x*a,a=e.col1.y*s+e.col2.y*a,s=o,e=n.m_xf.R,l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,u=this.m_localAnchor2.y-n.m_sweep.localCenter.y,o=e.col1.x*l+e.col2.x*u,u=e.col1.y*l+e.col2.y*u,l=o;var S=p.x+-f*u-h.x- -c*a,C=p.y+f*l-h.y-c*s,T=f-c;this.m_mass.Solve33(this.impulse3,-S,-C,-T),this.m_limitState==m.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==m.e_atLowerLimit?this.m_impulse.z+this.impulse3.z<0&&(this.m_mass.Solve22(this.reduced,-S,-C),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0):this.m_limitState==m.e_atUpperLimit&&this.m_impulse.z+this.impulse3.z>0&&(this.m_mass.Solve22(this.reduced,-S,-C),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0),h.x-=d*this.impulse3.x,h.y-=d*this.impulse3.y,c-=y*(s*this.impulse3.y-a*this.impulse3.x+this.impulse3.z),p.x+=_*this.impulse3.x,p.y+=_*this.impulse3.y,f+=v*(l*this.impulse3.y-u*this.impulse3.x+this.impulse3.z)}else{e=i.m_xf.R,s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y,o=e.col1.x*s+e.col2.x*a,a=e.col1.y*s+e.col2.y*a,s=o,e=n.m_xf.R,l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,u=this.m_localAnchor2.y-n.m_sweep.localCenter.y,o=e.col1.x*l+e.col2.x*u,u=e.col1.y*l+e.col2.y*u,l=o;var A=p.x+-f*u-h.x- -c*a,M=p.y+f*l-h.y-c*s;this.m_mass.Solve22(this.impulse2,-A,-M),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,h.x-=d*this.impulse2.x,h.y-=d*this.impulse2.y,c-=y*(s*this.impulse2.y-a*this.impulse2.x),p.x+=_*this.impulse2.x,p.y+=_*this.impulse2.y,f+=v*(l*this.impulse2.y-u*this.impulse2.x)}i.m_linearVelocity.SetV(h),i.m_angularVelocity=c,n.m_linearVelocity.SetV(p),n.m_angularVelocity=f},T.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,o=this.m_bodyA,s=this.m_bodyB,a=0,l=0,u=0,h=0,c=0;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var p=s.m_sweep.a-o.m_sweep.a-this.m_referenceAngle,f=0;this.m_limitState==m.e_equalLimits?(n=r.Clamp(p-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),f=-this.m_motorMass*n,a=r.Abs(n)):this.m_limitState==m.e_atLowerLimit?(n=p-this.m_lowerAngle,a=-n,n=r.Clamp(n+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),f=-this.m_motorMass*n):this.m_limitState==m.e_atUpperLimit&&(n=p-this.m_upperAngle,a=n,n=r.Clamp(n-t.b2_angularSlop,0,t.b2_maxAngularCorrection),f=-this.m_motorMass*n),o.m_sweep.a-=o.m_invI*f,s.m_sweep.a+=s.m_invI*f,o.SynchronizeTransform(),s.SynchronizeTransform()}i=o.m_xf.R;var d=this.m_localAnchor1.x-o.m_sweep.localCenter.x,_=this.m_localAnchor1.y-o.m_sweep.localCenter.y;u=i.col1.x*d+i.col2.x*_,_=i.col1.y*d+i.col2.y*_,d=u,i=s.m_xf.R;var y=this.m_localAnchor2.x-s.m_sweep.localCenter.x,v=this.m_localAnchor2.y-s.m_sweep.localCenter.y;u=i.col1.x*y+i.col2.x*v,v=i.col1.y*y+i.col2.y*v,y=u;var x=s.m_sweep.c.x+y-o.m_sweep.c.x-d,b=s.m_sweep.c.y+v-o.m_sweep.c.y-_,g=x*x+b*b,w=Math.sqrt(g);l=w;var S=o.m_invMass,C=s.m_invMass,A=o.m_invI,M=s.m_invI,E=10*t.b2_linearSlop;if(g>E*E){var D=S+C,P=1/D;h=P*-x,c=P*-b;o.m_sweep.c.x-=.5*S*h,o.m_sweep.c.y-=.5*S*c,s.m_sweep.c.x+=.5*C*h,s.m_sweep.c.y+=.5*C*c,x=s.m_sweep.c.x+y-o.m_sweep.c.x-d,b=s.m_sweep.c.y+v-o.m_sweep.c.y-_}return this.K1.col1.x=S+C,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=S+C,this.K2.col1.x=A*_*_,this.K2.col2.x=-A*d*_,this.K2.col1.y=-A*d*_,this.K2.col2.y=A*d*d,this.K3.col1.x=M*v*v,this.K3.col2.x=-M*y*v,this.K3.col1.y=-M*y*v,this.K3.col2.y=M*y*y,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(T.tImpulse,-x,-b),h=T.tImpulse.x,c=T.tImpulse.y,o.m_sweep.c.x-=o.m_invMass*h,o.m_sweep.c.y-=o.m_invMass*c,o.m_sweep.a-=o.m_invI*(d*c-_*h),s.m_sweep.c.x+=s.m_invMass*h,s.m_sweep.c.y+=s.m_invMass*c,s.m_sweep.a+=s.m_invI*(y*c-v*h),o.SynchronizeTransform(),s.SynchronizeTransform(),l<=t.b2_linearSlop&&a<=t.b2_angularSlop},i.postDefs.push(function(){i.Dynamics.Joints.b2RevoluteJoint.tImpulse=new o}),i.inherit(A,i.Dynamics.Joints.b2JointDef),A.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,A.b2RevoluteJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},A.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},A.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},i.inherit(M,i.Dynamics.Joints.b2Joint),M.prototype.__super=i.Dynamics.Joints.b2Joint.prototype,M.b2WeldJoint=function(){i.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_impulse=new s,this.m_mass=new n},M.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},M.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},M.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},M.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},M.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new n},M.prototype.InitVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,r=this.m_bodyB;e=n.m_xf.R;var o=this.m_localAnchorA.x-n.m_sweep.localCenter.x,s=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*s,s=e.col1.y*o+e.col2.y*s,o=i,e=r.m_xf.R;var a=this.m_localAnchorB.x-r.m_sweep.localCenter.x,l=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i;var u=n.m_invMass,h=r.m_invMass,c=n.m_invI,p=r.m_invI;this.m_mass.col1.x=u+h+s*s*c+l*l*p,this.m_mass.col2.x=-s*o*c-l*a*p,this.m_mass.col3.x=-s*c-l*p,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+h+o*o*c+a*a*p,this.m_mass.col3.y=o*c+a*p,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+p,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,n.m_linearVelocity.x-=u*this.m_impulse.x,n.m_linearVelocity.y-=u*this.m_impulse.y,n.m_angularVelocity-=c*(o*this.m_impulse.y-s*this.m_impulse.x+this.m_impulse.z),r.m_linearVelocity.x+=h*this.m_impulse.x,r.m_linearVelocity.y+=h*this.m_impulse.y,r.m_angularVelocity+=p*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},M.prototype.SolveVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,r=this.m_bodyB,o=n.m_linearVelocity,a=n.m_angularVelocity,l=r.m_linearVelocity,u=r.m_angularVelocity,h=n.m_invMass,c=r.m_invMass,p=n.m_invI,f=r.m_invI;e=n.m_xf.R;var m=this.m_localAnchorA.x-n.m_sweep.localCenter.x,d=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*m+e.col2.x*d,d=e.col1.y*m+e.col2.y*d,m=i,e=r.m_xf.R;var _=this.m_localAnchorB.x-r.m_sweep.localCenter.x,y=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*_+e.col2.x*y,y=e.col1.y*_+e.col2.y*y,_=i;var v=l.x-u*y-o.x+a*d,x=l.y+u*_-o.y-a*m,b=u-a,g=new s;this.m_mass.Solve33(g,-v,-x,-b),this.m_impulse.Add(g),o.x-=h*g.x,o.y-=h*g.y,a-=p*(m*g.y-d*g.x+g.z),l.x+=c*g.x,l.y+=c*g.y,u+=f*(_*g.y-y*g.x+g.z),n.m_angularVelocity=a,r.m_angularVelocity=u},M.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,o=this.m_bodyA,a=this.m_bodyB;i=o.m_xf.R;var l=this.m_localAnchorA.x-o.m_sweep.localCenter.x,u=this.m_localAnchorA.y-o.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*u,u=i.col1.y*l+i.col2.y*u,l=n,i=a.m_xf.R;var h=this.m_localAnchorB.x-a.m_sweep.localCenter.x,c=this.m_localAnchorB.y-a.m_sweep.localCenter.y;n=i.col1.x*h+i.col2.x*c,c=i.col1.y*h+i.col2.y*c,h=n;var p=o.m_invMass,f=a.m_invMass,m=o.m_invI,d=a.m_invI,_=a.m_sweep.c.x+h-o.m_sweep.c.x-l,y=a.m_sweep.c.y+c-o.m_sweep.c.y-u,v=a.m_sweep.a-o.m_sweep.a-this.m_referenceAngle,x=10*t.b2_linearSlop,b=Math.sqrt(_*_+y*y),g=r.Abs(v);b>x&&(m*=1,d*=1),this.m_mass.col1.x=p+f+u*u*m+c*c*d,this.m_mass.col2.x=-u*l*m-c*h*d,this.m_mass.col3.x=-u*m-c*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=p+f+l*l*m+h*h*d,this.m_mass.col3.y=l*m+h*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=m+d;var w=new s;return this.m_mass.Solve33(w,-_,-y,-v),o.m_sweep.c.x-=p*w.x,o.m_sweep.c.y-=p*w.y,o.m_sweep.a-=m*(l*w.y-u*w.x+w.z),a.m_sweep.c.x+=f*w.x,a.m_sweep.c.y+=f*w.y,a.m_sweep.a+=d*(h*w.y-c*w.x+w.z),o.SynchronizeTransform(),a.SynchronizeTransform(),b<=t.b2_linearSlop&&g<=t.b2_angularSlop},i.inherit(E,i.Dynamics.Joints.b2JointDef),E.prototype.__super=i.Dynamics.Joints.b2JointDef.prototype,E.b2WeldJointDef=function(){i.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},E.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_weldJoint,this.referenceAngle=0},E.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=i.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,i){if(e){var n=this.m_ctx,r=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.moveTo(t[0].x*r,t[0].y*r);for(var o=1;o<e;o++)n.lineTo(t[o].x*r,t[o].y*r);n.lineTo(t[0].x*r,t[0].y*r),n.closePath(),n.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,i){if(e){var n=this.m_ctx,r=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.fillStyle=this._color(i.color,this.m_fillAlpha),n.moveTo(t[0].x*r,t[0].y*r);for(var o=1;o<e;o++)n.lineTo(t[o].x*r,t[o].y*r);n.lineTo(t[0].x*r,t[0].y*r),n.closePath(),n.fill(),n.stroke()}},t.prototype.DrawCircle=function(t,e,i){if(e){var n=this.m_ctx,r=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.arc(t.x*r,t.y*r,e*r,0,2*Math.PI,!0),n.closePath(),n.stroke()}},t.prototype.DrawSolidCircle=function(t,e,i,n){if(e){var r=this.m_ctx,o=this.m_drawScale,s=t.x*o,a=t.y*o;r.moveTo(0,0),r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.fillStyle=this._color(n.color,this.m_fillAlpha),r.arc(s,a,e*o,0,2*Math.PI,!0),r.moveTo(s,a),r.lineTo((t.x+i.x*e)*o,(t.y+i.y*e)*o),r.closePath(),r.fill(),r.stroke()}},t.prototype.DrawSegment=function(t,e,i){var n=this.m_ctx,r=this.m_drawScale;n.strokeStyle=this._color(i.color,this.m_alpha),n.beginPath(),n.moveTo(t.x*r,t.y*r),n.lineTo(e.x*r,e.y*r),n.closePath(),n.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,i=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*i,(t.position.y+this.m_xformScale*t.R.col1.y)*i),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*i,(t.position.y+this.m_xformScale*t.R.col2.y)*i),e.closePath(),e.stroke()}}(),t.exports=i},function(t,e,i){i(165),t.exports=i(29).RegExp.escape},function(t,e,i){var n=i(4),r=i(77),o=i(5)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(157);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(1),r=i(27);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!=t)}},function(t,e,i){var n=i(41),r=i(64),o=i(54);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),l=o.f,u=0;a.length>u;)l.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,i){var n=i(41),r=i(18);t.exports=function(t,e){for(var i,o=r(t),s=n(o),a=s.length,l=0;a>l;)if(o[i=s[l++]]===e)return i}},function(t,e,i){"use strict";var n=i(163),r=i(60),o=i(14);t.exports=function(){for(var t=o(this),e=arguments.length,i=Array(e),s=0,a=n._,l=!1;e>s;)(i[s]=arguments[s++])===a&&(l=!0);return function(){var n,o=this,s=arguments.length,u=0,h=0;if(!l&&!s)return r(t,i,o);if(n=i.slice(),l)for(;e>u;u++)n[u]===a&&(n[u]=arguments[h++]);for(;s>h;)n.push(arguments[h++]);return r(t,n,o)}}},function(t,e,i){t.exports=i(2)},function(t,e){t.exports=function(t,e){var i=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,i)}}},function(t,e,i){var n=i(0),r=i(164)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e,i){var n=i(0);n(n.P,"Array",{copyWithin:i(109)}),i(47)("copyWithin")},function(t,e,i){"use strict";var n=i(0),r=i(25)(4);n(n.P+n.F*!i(23)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,i){var n=i(0);n(n.P,"Array",{fill:i(69)}),i(47)("fill")},function(t,e,i){"use strict";var n=i(0),r=i(25)(2);n(n.P+n.F*!i(23)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(25)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(47)(o)},function(t,e,i){"use strict";var n=i(0),r=i(25)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(47)("find")},function(t,e,i){"use strict";var n=i(0),r=i(25)(0),o=i(23)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(30),r=i(0),o=i(11),s=i(118),a=i(76),l=i(10),u=i(70),h=i(93);r(r.S+r.F*!i(62)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,c,p=o(t),f="function"==typeof this?this:Array,m=arguments.length,d=m>1?arguments[1]:void 0,_=void 0!==d,y=0,v=h(p);if(_&&(d=n(d,m>2?arguments[2]:void 0,2)),void 0==v||f==Array&&a(v))for(e=l(p.length),i=new f(e);e>y;y++)u(i,y,_?d(p[y],y):p[y]);else for(c=v.call(p),i=new f;!(r=c.next()).done;y++)u(i,y,_?s(c,d,[r.value,y],!0):r.value);return i.length=y,i}})},function(t,e,i){"use strict";var n=i(0),r=i(56)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!i(23)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,i){var n=i(0);n(n.S,"Array",{isArray:i(77)})},function(t,e,i){"use strict";var n=i(0),r=i(18),o=[].join;n(n.P+n.F*(i(53)!=Object||!i(23)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(0),r=i(18),o=i(35),s=i(10),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!i(23)(a)),"Array",{lastIndexOf:function(t){if(l)return a.apply(this,arguments)||0;var e=r(this),i=s(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){"use strict";var n=i(0),r=i(25)(1);n(n.P+n.F*!i(23)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(70);n(n.S+n.F*i(3)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)r(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(0),r=i(111);n(n.P+n.F*!i(23)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(0),r=i(111);n(n.P+n.F*!i(23)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(74),o=i(21),s=i(44),a=i(10),l=[].slice;n(n.P+n.F*i(3)(function(){r&&l.call(r)}),"Array",{slice:function(t,e){var i=a(this.length),n=o(this);if(e=void 0===e?i:e,"Array"==n)return l.call(this,t,e);for(var r=s(t,i),u=s(e,i),h=a(u-r),c=Array(h),p=0;p<h;p++)c[p]="String"==n?this.charAt(r+p):this[r+p];return c}})},function(t,e,i){"use strict";var n=i(0),r=i(25)(3);n(n.P+n.F*!i(23)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(14),o=i(11),s=i(3),a=[].sort,l=[1,2,3];n(n.P+n.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!i(23)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,i){i(43)("Array")},function(t,e,i){var n=i(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";var n=i(0),r=i(3),o=Date.prototype.getTime,s=function(t){return t>9?t:"0"+t};n(n.P+n.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(i>99?i:"0"+s(i))+"Z"}})},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(27);n(n.P+n.F*i(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),i=o(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(5)("toPrimitive"),r=Date.prototype;n in r||i(15)(r,n,i(159))},function(t,e,i){var n=Date.prototype,r=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(16)(n,"toString",function(){var t=o.call(this);return t===t?r.call(this):"Invalid Date"})},function(t,e,i){var n=i(0);n(n.P,"Function",{bind:i(112)})},function(t,e,i){"use strict";var n=i(4),r=i(20),o=i(5)("hasInstance"),s=Function.prototype;o in s||i(8).f(s,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(8).f,r=i(34),o=i(13),s=Function.prototype,a=Object.isExtensible||function(){return!0};"name"in s||i(7)&&n(s,"name",{configurable:!0,get:function(){try{var t=this,e=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,"name")||!a(t)||n(t,"name",r(5,e)),e}catch(t){return""}}})},function(t,e,i){var n=i(0),r=i(120),o=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e,i){function n(t){return isFinite(t=+t)&&0!=t?t<0?-n(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=i(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:n})},function(t,e,i){var n=i(0),r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(0),r=i(81);n(n.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(0),r=Math.exp;n(n.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,i){var n=i(0),r=i(80);n(n.S+n.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,i){var n=i(0),r=i(81),o=Math.pow,s=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),u=o(2,-126),h=function(t){return t+1/s-1/s};n(n.S,"Math",{fround:function(t){var e,i,n=Math.abs(t),o=r(t);return n<u?o*h(n/u/a)*u*a:(e=(1+a/s)*n,i=e-(e-n),i>l||i!=i?o*(1/0):o*i)}})},function(t,e,i){var n=i(0),r=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,o=0,s=0,a=arguments.length,l=0;s<a;)i=r(arguments[s++]),l<i?(n=l/i,o=o*n*n+1,l=i):i>0?(n=i/l,o+=n*n):o+=i;return l===1/0?1/0:l*Math.sqrt(o)}})},function(t,e,i){var n=i(0),r=Math.imul;n(n.S+n.F*i(3)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n;return 0|r*o+((65535&i>>>16)*o+r*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log1p:i(120)})},function(t,e,i){var n=i(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(0);n(n.S,"Math",{sign:i(81)})},function(t,e,i){var n=i(0),r=i(80),o=Math.exp;n(n.S+n.F*i(3)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(0),r=i(80),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(o(t)+o(-t))}})},function(t,e,i){var n=i(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){"use strict";var n=i(2),r=i(13),o=i(21),s=i(75),a=i(27),l=i(3),u=i(40).f,h=i(19).f,c=i(8).f,p=i(51).trim,f=n.Number,m=f,d=f.prototype,_="Number"==o(i(39)(d)),y="trim"in String.prototype,v=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():p(e,3);var i,n,r,o=e.charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,l=e.slice(2),u=0,h=l.length;u<h;u++)if((s=l.charCodeAt(u))<48||s>r)return NaN;return parseInt(l,n)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof f&&(_?l(function(){d.valueOf.call(i)}):"Number"!=o(i))?s(new m(v(e)),i,f):v(e)};for(var x,b=i(7)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),g=0;b.length>g;g++)r(m,x=b[g])&&!r(f,x)&&c(f,x,h(m,x));f.prototype=d,d.constructor=f,i(16)(n,"Number",f)}},function(t,e,i){var n=i(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(0),r=i(2).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isInteger:i(117)})},function(t,e,i){var n=i(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(0),r=i(117),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,i){var n=i(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(0),r=i(127);n(n.S+n.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,i){var n=i(0),r=i(128);n(n.S+n.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,i){"use strict";var n=i(0),r=i(35),o=i(108),s=i(88),a=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",c=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*u[i],u[i]=n%1e7,n=l(n/1e7)},p=function(t){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=l(i/t),i=i%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var i=String(u[t]);e=""===e?i:e+s.call("0",7-i.length)+i}return e},m=function(t,e,i){return 0===e?i:e%2==1?m(t,e-1,i*t):m(t*t,e/2,i)},d=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(3)(function(){a.call({})})),"Number",{toFixed:function(t){var e,i,n,a,l=o(this,h),u=r(t),_="",y="0";if(u<0||u>20)throw RangeError(h);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(_="-",l=-l),l>1e-21)if(e=d(l*m(2,69,1))-69,i=e<0?l*m(2,-e,1):l/m(2,e,1),i*=4503599627370496,(e=52-e)>0){for(c(0,i),n=u;n>=7;)c(1e7,0),n-=7;for(c(m(10,n,1),0),n=e-1;n>=23;)p(1<<23),n-=23;p(1<<n),c(1,1),p(2),y=f()}else c(0,i),c(1<<-e,0),y=f()+s.call("0",u);return u>0?(a=y.length,y=_+(a<=u?"0."+s.call("0",u-a)+y:y.slice(0,a-u)+"."+y.slice(a-u))):y=_+y,y}})},function(t,e,i){"use strict";var n=i(0),r=i(3),o=i(108),s=1..toPrecision;n(n.P+n.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,i){var n=i(0);n(n.S+n.F,"Object",{assign:i(121)})},function(t,e,i){var n=i(0);n(n.S,"Object",{create:i(39)})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(7),"Object",{defineProperties:i(122)})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(7),"Object",{defineProperty:i(8).f})},function(t,e,i){var n=i(4),r=i(33).onFreeze;i(26)("freeze",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(18),r=i(19).f;i(26)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){i(26)("getOwnPropertyNames",function(){return i(123).f})},function(t,e,i){var n=i(11),r=i(20);i(26)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(4);i(26)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){var n=i(4);i(26)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(4);i(26)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(0);n(n.S,"Object",{is:i(129)})},function(t,e,i){var n=i(11),r=i(41);i(26)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(4),r=i(33).onFreeze;i(26)("preventExtensions",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(4),r=i(33).onFreeze;i(26)("seal",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(0);n(n.S,"Object",{setPrototypeOf:i(83).set})},function(t,e,i){"use strict";var n=i(52),r={};r[i(5)("toStringTag")]="z",r+""!="[object z]"&&i(16)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){var n=i(0),r=i(127);n(n.G+n.F*(parseFloat!=r),{parseFloat:r})},function(t,e,i){var n=i(0),r=i(128);n(n.G+n.F*(parseInt!=r),{parseInt:r})},function(t,e,i){"use strict";var n,r,o,s=i(38),a=i(2),l=i(30),u=i(52),h=i(0),c=i(4),p=i(14),f=i(37),m=i(48),d=i(85),_=i(90).set,y=i(82)(),v=a.TypeError,x=a.process,b=a.Promise,x=a.process,g="process"==u(x),w=function(){},S=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[i(5)("species")]=function(t){t(w,w)};return(g||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),C=function(t,e){return t===e||t===b&&e===o},T=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},A=function(t){return C(b,t)?new M(t):new r(t)},M=r=function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw v("Bad Promise constructor");e=t,i=n}),this.resolve=p(e),this.reject=p(i)},E=function(t){try{t()}catch(t){return{error:t}}},D=function(t,e){if(!t._n){t._n=!0;var i=t._c;y(function(){for(var n=t._v,r=1==t._s,o=0;i.length>o;)!function(e){var i,o,s=r?e.ok:e.fail,a=e.resolve,l=e.reject,u=e.domain;try{s?(r||(2==t._h&&O(t),t._h=1),s===!0?i=n:(u&&u.enter(),i=s(n),u&&u.exit()),i===e.promise?l(v("Promise-chain cycle")):(o=T(i))?o.call(i,a,l):a(i)):l(n)}catch(t){l(t)}}(i[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){_.call(a,function(){var e,i,n,r=t._v;if(I(t)&&(e=E(function(){g?x.emit("unhandledRejection",r,t):(i=a.onunhandledrejection)?i({promise:t,reason:r}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=g||I(t)?2:1),t._a=void 0,e)throw e.error})},I=function(t){if(1==t._h)return!1;for(var e,i=t._a||t._c,n=0;i.length>n;)if(e=i[n++],e.fail||!I(e.promise))return!1;return!0},O=function(t){_.call(a,function(){var e;g?x.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},B=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw v("Promise can't be resolved itself");(e=T(t))?y(function(){var n={_w:i,_d:!1};try{e.call(t,l(B,n,1),l(R,n,1))}catch(t){R.call(n,t)}}):(i._v=t,i._s=1,D(i,!1))}catch(t){R.call({_w:i,_d:!1},t)}}};S||(b=function(t){f(this,b,"Promise","_h"),p(t),n.call(this);try{t(l(B,this,1),l(R,this,1))}catch(t){R.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=i(42)(b.prototype,{then:function(t,e){var i=A(d(this,b));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=g?x.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&D(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),M=function(){var t=new n;this.promise=t,this.resolve=l(B,t,1),this.reject=l(R,t,1)}),h(h.G+h.W+h.F*!S,{Promise:b}),i(50)(b,"Promise"),i(43)("Promise"),o=i(29).Promise,h(h.S+h.F*!S,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!S),"Promise",{resolve:function(t){if(t instanceof b&&C(t.constructor,this))return t;var e=A(this);return(0,e.resolve)(t),e.promise}}),h(h.S+h.F*!(S&&i(62)(function(t){b.all(t).catch(w)})),"Promise",{all:function(t){var e=this,i=A(e),n=i.resolve,r=i.reject,o=E(function(){var i=[],o=0,s=1;m(t,!1,function(t){var a=o++,l=!1;i.push(void 0),s++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--s||n(i))},r)}),--s||n(i)});return o&&r(o.error),i.promise},race:function(t){var e=this,i=A(e),n=i.reject,r=E(function(){m(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r&&n(r.error),i.promise}})},function(t,e,i){var n=i(0),r=i(14),o=i(1),s=(i(2).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(3)(function(){s(function(){})}),"Reflect",{apply:function(t,e,i){var n=r(t),l=o(i);return s?s(n,e,l):a.call(n,e,l)}})},function(t,e,i){var n=i(0),r=i(39),o=i(14),s=i(1),a=i(4),l=i(3),u=i(112),h=(i(2).Reflect||{}).construct,c=l(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!l(function(){h(function(){})});n(n.S+n.F*(c||p),"Reflect",{construct:function(t,e){o(t),s(e);var i=arguments.length<3?t:o(arguments[2]);if(p&&!c)return h(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var l=i.prototype,f=r(a(l)?l:Object.prototype),m=Function.apply.call(t,f,e);return a(m)?m:f}})},function(t,e,i){var n=i(8),r=i(0),o=i(1),s=i(27);r(r.S+r.F*i(3)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,i){o(t),e=s(e,!0),o(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),r=i(19).f,o=i(1);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=r(o(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){"use strict";var n=i(0),r=i(1),o=function(t){this._t=r(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(78)(o,"Object",function(){var t,e=this,i=e._k;do{if(e._i>=i.length)return{value:void 0,done:!0}}while(!((t=i[e._i++])in e._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,i){var n=i(19),r=i(0),o=i(1);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,i){var n=i(0),r=i(20),o=i(1);n(n.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,i){function n(t,e){var i,a,h=arguments.length<3?t:arguments[2];return u(t)===h?t[e]:(i=r.f(t,e))?s(i,"value")?i.value:void 0!==i.get?i.get.call(h):void 0:l(a=o(t))?n(a,e,h):void 0}var r=i(19),o=i(20),s=i(13),a=i(0),l=i(4),u=i(1);a(a.S,"Reflect",{get:n})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(0),r=i(1),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{ownKeys:i(126)})},function(t,e,i){var n=i(0),r=i(1),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),r=i(83);r&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){function n(t,e,i){var l,p,f=arguments.length<4?t:arguments[3],m=o.f(h(t),e);if(!m){if(c(p=s(t)))return n(p,e,i,f);m=u(0)}return a(m,"value")?!(m.writable===!1||!c(f))&&(l=o.f(f,e)||u(0),l.value=i,r.f(f,e,l),!0):void 0!==m.set&&(m.set.call(f,i),!0)}var r=i(8),o=i(19),s=i(20),a=i(13),l=i(0),u=i(34),h=i(1),c=i(4);l(l.S,"Reflect",{set:n})},function(t,e,i){var n=i(2),r=i(75),o=i(8).f,s=i(40).f,a=i(61),l=i(59),u=n.RegExp,h=u,c=u.prototype,p=/a/g,f=/a/g!==new u(/a/g);if(i(7)&&(!f||i(3)(function(){return p[i(5)("match")]=!1,/a/g!=u(/a/g)||u(p)==p||"/a/i"!=u(/a/g,"i")}))){u=function(t,e){var i=this instanceof u,n=a(t),o=void 0===e;return!i&&n&&t.constructor===u&&o?t:r(f?new h(n&&!o?t.source:t,e):h((n=t instanceof u)?t.source:t,n&&o?l.call(t):e),i?this:c,u)};for(var m=s(h),d=0;m.length>d;)!function(t){t in u||o(u,t,{configurable:!0,get:function(){return h[t]},set:function(e){h[t]=e}})}(m[d++]);c.constructor=u,u.prototype=c,i(16)(n,"RegExp",u)}i(43)("RegExp")},function(t,e,i){i(58)("match",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(58)("replace",2,function(t,e,i){return[function(n,r){"use strict";var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,i){i(58)("search",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(58)("split",2,function(t,e,n){"use strict";var r=i(61),o=n,s=[].push,a="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[a]||2!="ab".split(/(?:ab)*/)[a]||4!=".".split(/(.?)(.?)/)[a]||".".split(/()()/)[a]>1||"".split(/.?/)[a]){var l=void 0===/()??/.exec("")[1];n=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(i,t,e);var n,u,h,c,p,f=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,_=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,m+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",m));(u=y.exec(i))&&!((h=u.index+u[0][a])>d&&(f.push(i.slice(d,u.index)),!l&&u[a]>1&&u[0].replace(n,function(){for(p=1;p<arguments[a]-2;p++)void 0===arguments[p]&&(u[p]=void 0)}),u[a]>1&&u.index<i[a]&&s.apply(f,u.slice(1)),c=u[0][a],d=h,f[a]>=_));)y.lastIndex===u.index&&y.lastIndex++;return d===i[a]?!c&&y.test("")||f.push(""):f.push(i.slice(d)),f[a]>_?f.slice(0,_):f}}else"0".split(void 0,0)[a]&&(n=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(i,r){var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,i){"use strict";i(133);var n=i(1),r=i(59),o=i(7),s=/./.toString,a=function(t){i(16)(RegExp.prototype,"toString",t,!0)};i(3)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},function(t,e,i){"use strict";i(17)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,i){"use strict";i(17)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,i){"use strict";i(17)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,i){"use strict";i(17)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,i){"use strict";var n=i(0),r=i(86)(!1);n(n.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(10),o=i(87),s="".endsWith;n(n.P+n.F*i(73)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=r(e.length),a=void 0===i?n:Math.min(r(i),n),l=String(t);return s?s.call(e,l,a):e.slice(a-l.length,a)===l}})},function(t,e,i){"use strict";i(17)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,i){"use strict";i(17)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,i){"use strict";i(17)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,i){var n=i(0),r=i(44),o=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){"use strict";var n=i(0),r=i(87);n(n.P+n.F*i(73)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";i(17)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,i){"use strict";var n=i(86)(!0);i(79)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";i(17)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,i){var n=i(0),r=i(18),o=i(10);n(n.S,"String",{raw:function(t){for(var e=r(t.raw),i=o(e.length),n=arguments.length,s=[],a=0;i>a;)s.push(String(e[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,i){var n=i(0);n(n.P,"String",{repeat:i(88)})},function(t,e,i){"use strict";i(17)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,i){"use strict";var n=i(0),r=i(10),o=i(87),s="".startsWith;n(n.P+n.F*i(73)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";i(17)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,i){"use strict";i(17)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,i){"use strict";i(17)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,i){"use strict";i(51)("trim",function(t){return function(){return t(this,3)}})},function(t,e,i){"use strict";var n=i(2),r=i(13),o=i(7),s=i(0),a=i(16),l=i(33).KEY,u=i(3),h=i(65),c=i(50),p=i(45),f=i(5),m=i(131),d=i(92),_=i(161),y=i(160),v=i(77),x=i(1),b=i(18),g=i(27),w=i(34),S=i(39),C=i(123),T=i(19),A=i(8),M=i(41),E=T.f,D=A.f,P=C.f,I=n.Symbol,O=n.JSON,R=O&&O.stringify,B=f("_hidden"),L=f("toPrimitive"),F={}.propertyIsEnumerable,V=h("symbol-registry"),k=h("symbols"),N=h("op-symbols"),G=Object.prototype,j="function"==typeof I,U=n.QObject,J=!U||!U.prototype||!U.prototype.findChild,X=o&&u(function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=E(G,e);n&&delete G[e],D(t,e,i),n&&t!==G&&D(G,e,n)}:D,W=function(t){var e=k[t]=S(I.prototype);return e._k=t,e},z=j&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},H=function(t,e,i){return t===G&&H(N,e,i),x(t),e=g(e,!0),x(i),r(k,e)?(i.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),i=S(i,{enumerable:w(0,!1)})):(r(t,B)||D(t,B,w(1,{})),t[B][e]=!0),X(t,e,i)):D(t,e,i)},Y=function(t,e){x(t);for(var i,n=y(e=b(e)),r=0,o=n.length;o>r;)H(t,i=n[r++],e[i]);return t},q=function(t,e){return void 0===e?S(t):Y(S(t),e)},K=function(t){var e=F.call(this,t=g(t,!0));return!(this===G&&r(k,t)&&!r(N,t))&&(!(e||!r(this,t)||!r(k,t)||r(this,B)&&this[B][t])||e)},Z=function(t,e){if(t=b(t),e=g(e,!0),t!==G||!r(k,e)||r(N,e)){var i=E(t,e);return!i||!r(k,e)||r(t,B)&&t[B][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=P(b(t)),n=[],o=0;i.length>o;)r(k,e=i[o++])||e==B||e==l||n.push(e);return n},$=function(t){for(var e,i=t===G,n=P(i?N:b(t)),o=[],s=0;n.length>s;)!r(k,e=n[s++])||i&&!r(G,e)||o.push(k[e]);return o};j||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(i){this===G&&e.call(N,i),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),X(this,t,w(1,i))};return o&&J&&X(G,t,{configurable:!0,set:e}),W(t)},a(I.prototype,"toString",function(){return this._k}),T.f=Z,A.f=H,i(40).f=C.f=Q,i(54).f=K,i(64).f=$,o&&!i(38)&&a(G,"propertyIsEnumerable",K,!0),m.f=function(t){return W(f(t))}),s(s.G+s.W+s.F*!j,{Symbol:I});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)f(tt[et++]);for(var tt=M(f.store),et=0;tt.length>et;)d(tt[et++]);s(s.S+s.F*!j,"Symbol",{for:function(t){return r(V,t+="")?V[t]:V[t]=I(t)},keyFor:function(t){if(z(t))return _(V,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),s(s.S+s.F*!j,"Object",{create:q,defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),O&&s(s.S+s.F*(!j||u(function(){var t=I();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!z(t)){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);return e=n[1],"function"==typeof e&&(i=e),!i&&v(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!z(e))return e}),n[1]=e,R.apply(O,n)}}}),I.prototype[L]||i(15)(I.prototype,L,I.prototype.valueOf),c(I,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,i){"use strict";var n=i(0),r=i(66),o=i(91),s=i(1),a=i(44),l=i(10),u=i(4),h=i(2).ArrayBuffer,c=i(85),p=o.ArrayBuffer,f=o.DataView,m=r.ABV&&h.isView,d=p.prototype.slice,_=r.VIEW;n(n.G+n.W+n.F*(h!==p),{ArrayBuffer:p}),n(n.S+n.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return m&&m(t)||u(t)&&_ in t}}),n(n.P+n.U+n.F*i(3)(function(){return!new p(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(s(this),t);for(var i=s(this).byteLength,n=a(t,i),r=a(void 0===e?i:e,i),o=new(c(this,p))(l(r-n)),u=new f(this),h=new f(o),m=0;n<r;)h.setUint8(m++,u.getUint8(n++));return o}}),i(43)("ArrayBuffer")},function(t,e,i){var n=i(0);n(n.G+n.W+n.F*!i(66).ABV,{DataView:i(91).DataView})},function(t,e,i){i(32)("Float32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Float64",8,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Int16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Int32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Int8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Uint16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Uint32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(32)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){"use strict";var n=i(115);i(57)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n=i(0),r=i(56)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(47)("includes")},function(t,e,i){var n=i(0),r=i(82)(),o=i(2).process,s="process"==i(21)(o);n(n.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,i){var n=i(0),r=i(21);n(n.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,i){var n=i(0);n(n.P+n.R,"Map",{toJSON:i(114)("Map")})},function(t,e,i){var n=i(0);n(n.S,"Math",{iaddh:function(t,e,i,n){var r=t>>>0,o=e>>>0,s=i>>>0;return o+(n>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{imulh:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n,s=i>>16,a=n>>16,l=(s*o>>>0)+(r*o>>>16);return s*a+(l>>16)+((r*a>>>0)+(65535&l)>>16)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{isubh:function(t,e,i,n){var r=t>>>0,o=e>>>0,s=i>>>0;return o-(n>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{umulh:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n,s=i>>>16,a=n>>>16,l=(s*o>>>0)+(r*o>>>16);return s*a+(l>>>16)+((r*a>>>0)+(65535&l)>>>16)}})},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(14),s=i(8);i(7)&&n(n.P+i(63),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(14),s=i(8);i(7)&&n(n.P+i(63),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){var n=i(0),r=i(125)(!0);n(n.S,"Object",{entries:function(t){return r(t)}})},function(t,e,i){var n=i(0),r=i(126),o=i(18),s=i(19),a=i(70);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i=o(t),n=s.f,l=r(i),u={},h=0;l.length>h;)a(u,e=l[h++],n(i,e));return u}})},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(27),s=i(20),a=i(19).f;i(7)&&n(n.P+i(63),"Object",{__lookupGetter__:function(t){var e,i=r(this),n=o(t,!0);do{if(e=a(i,n))return e.get}while(i=s(i))}})},function(t,e,i){"use strict";var n=i(0),r=i(11),o=i(27),s=i(20),a=i(19).f;i(7)&&n(n.P+i(63),"Object",{__lookupSetter__:function(t){var e,i=r(this),n=o(t,!0);do{if(e=a(i,n))return e.set}while(i=s(i))}})},function(t,e,i){var n=i(0),r=i(125)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){"use strict";var n=i(0),r=i(2),o=i(29),s=i(82)(),a=i(5)("observable"),l=i(14),u=i(1),h=i(37),c=i(42),p=i(15),f=i(48),m=f.RETURN,d=function(t){return null==t?void 0:l(t)},_=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},v=function(t){y(t)||(t._o=void 0,_(t))},x=function(t,e){u(t),this._c=void 0,this._o=t,t=new b(this);try{var i=e(t),n=i;null!=i&&("function"==typeof i.unsubscribe?i=function(){n.unsubscribe()}:l(i),this._c=i)}catch(e){return void t.error(e)}y(this)&&_(this)};x.prototype=c({},{unsubscribe:function(){v(this)}});var b=function(t){this._s=t};b.prototype=c({},{next:function(t){var e=this._s;if(!y(e)){var i=e._o;try{var n=d(i.next);if(n)return n.call(i,t)}catch(t){try{v(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var i=e._o;e._o=void 0;try{var n=d(i.error);if(!n)throw t;t=n.call(i,t)}catch(t){try{_(e)}finally{throw t}}return _(e),t},complete:function(t){var e=this._s;if(!y(e)){var i=e._o;e._o=void 0;try{var n=d(i.complete);t=n?n.call(i,t):void 0}catch(t){try{_(e)}finally{throw t}}return _(e),t}}});var g=function(t){h(this,g,"Observable","_f")._f=l(t)};c(g.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(i,n){l(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i})})}}),c(g,{from:function(t){var e="function"==typeof this?this:g,i=d(u(t)[a]);if(i){var n=u(i.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var i=!1;return s(function(){if(!i){try{if(f(t,!1,function(t){if(e.next(t),i)return m})===m)return}catch(t){if(i)throw t;return void e.error(t)}e.complete()}}),function(){i=!0}})},of:function(){for(var t=0,e=arguments.length,i=Array(e);t<e;)i[t]=arguments[t++];return new("function"==typeof this?this:g)(function(t){var e=!1;return s(function(){if(!e){for(var n=0;n<i.length;++n)if(t.next(i[n]),e)return;t.complete()}}),function(){e=!0}})}}),p(g.prototype,a,function(){return this}),n(n.G,{Observable:g}),i(43)("Observable")},function(t,e,i){var n=i(31),r=i(1),o=n.key,s=n.set;n.exp({defineMetadata:function(t,e,i,n){s(t,e,r(i),o(n))}})},function(t,e,i){var n=i(31),r=i(1),o=n.key,s=n.map,a=n.store;n.exp({deleteMetadata:function(t,e){var i=arguments.length<3?void 0:o(arguments[2]),n=s(r(e),i,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var l=a.get(e);return l.delete(i),!!l.size||a.delete(e)}})},function(t,e,i){var n=i(134),r=i(110),o=i(31),s=i(1),a=i(20),l=o.keys,u=o.key,h=function(t,e){var i=l(t,e),o=a(t);if(null===o)return i;var s=h(o,e);return s.length?i.length?r(new n(i.concat(s))):s:i};o.exp({getMetadataKeys:function(t){return h(s(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,e,i){var n=i(31),r=i(1),o=i(20),s=n.has,a=n.get,l=n.key,u=function(t,e,i){if(s(t,e,i))return a(t,e,i);var n=o(e);return null!==n?u(t,n,i):void 0};n.exp({getMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:l(arguments[2]))}})},function(t,e,i){var n=i(31),r=i(1),o=n.keys,s=n.key;n.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,i){var n=i(31),r=i(1),o=n.get,s=n.key;n.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,i){var n=i(31),r=i(1),o=i(20),s=n.has,a=n.key,l=function(t,e,i){if(s(t,e,i))return!0;var n=o(e);return null!==n&&l(t,n,i)};n.exp({hasMetadata:function(t,e){return l(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,i){var n=i(31),r=i(1),o=n.has,s=n.key;n.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,i){var n=i(31),r=i(1),o=i(14),s=n.key,a=n.set;n.exp({metadata:function(t,e){return function(i,n){a(t,e,(void 0!==n?r:o)(i),s(n))}}})},function(t,e,i){var n=i(0);n(n.P+n.R,"Set",{toJSON:i(114)("Set")})},function(t,e,i){"use strict";var n=i(0),r=i(86)(!0);n(n.P,"String",{at:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(22),o=i(10),s=i(61),a=i(59),l=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};i(78)(u,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),i="flags"in l?String(t.flags):a.call(t),n=new RegExp(t.source,~i.indexOf("g")?i:"g"+i);return n.lastIndex=o(t.lastIndex),new u(n,e)}})},function(t,e,i){"use strict";var n=i(0),r=i(130);n(n.P,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(130);n(n.P,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){"use strict";i(51)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,i){"use strict";i(51)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,i){i(92)("asyncIterator")},function(t,e,i){i(92)("observable")},function(t,e,i){var n=i(0);n(n.S,"System",{global:i(2)})},function(t,e,i){for(var n=i(94),r=i(16),o=i(2),s=i(15),a=i(49),l=i(5),u=l("iterator"),h=l("toStringTag"),c=a.Array,p=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var m,d=p[f],_=o[d],y=_&&_.prototype;if(y){y[u]||s(y,u,c),y[h]||s(y,h,d),a[d]=c;for(m in n)y[m]||r(y,m,n[m],!0)}}},function(t,e,i){var n=i(0),r=i(90);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){var n=i(2),r=i(0),o=i(60),s=i(162),a=n.navigator,l=!!a&&/MSIE .\./.test(a.userAgent),u=function(t){return l?function(e,i){return t(o(s,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),i)}:t};r(r.G+r.B+r.F*l,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(t,e,i){i(285),i(224),i(226),i(225),i(228),i(230),i(235),i(229),i(227),i(237),i(236),i(232),i(233),i(231),i(223),i(234),i(238),i(239),i(191),i(193),i(192),i(241),i(240),i(211),i(221),i(222),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(205),i(206),i(207),i(208),i(209),i(210),i(272),i(277),i(284),i(275),i(267),i(268),i(273),i(278),i(280),i(263),i(264),i(265),i(266),i(269),i(270),i(271),i(274),i(276),i(279),i(281),i(282),i(283),i(186),i(188),i(187),i(190),i(189),i(175),i(173),i(179),i(176),i(182),i(184),i(172),i(178),i(169),i(183),i(167),i(181),i(180),i(174),i(177),i(166),i(168),i(171),i(170),i(185),i(94),i(257),i(262),i(133),i(258),i(259),i(260),i(261),i(242),i(132),i(134),i(135),i(297),i(286),i(287),i(292),i(295),i(296),i(290),i(293),i(291),i(294),i(288),i(289),i(243),i(244),i(245),i(246),i(247),i(250),i(248),i(249),i(251),i(252),i(253),i(254),i(256),i(255),i(298),i(324),i(327),i(326),i(328),i(329),i(325),i(330),i(331),i(309),i(312),i(308),i(306),i(307),i(310),i(311),i(301),i(323),i(332),i(300),i(302),i(304),i(303),i(305),i(314),i(315),i(317),i(316),i(319),i(318),i(320),i(321),i(322),i(299),i(313),i(335),i(334),i(333),t.exports=i(29)},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&i.rotl(t,8)|4278255360&i.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=i.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,n=0;i<t.length;i++,n+=8)e[n>>>5]|=t[i]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(t){for(var i=[],n=0;n<t.length;n+=3)for(var r=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?i.push(e.charAt(r>>>6*(3-o)&63)):i.push("=");return i.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,r=0;n<t.length;r=++n%4)0!=r&&i.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(n))>>>6-2*r);return i}};t.exports=i}()},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n=e&&e.length,o=n?e[0]*i:t.length,a=r(t,0,o,i,!0),l=[];if(!a)return l;var u,h,p,f,m,d,_;if(n&&(a=c(t,e,a,i)),t.length>80*i){u=p=t[0],h=f=t[1];for(var y=i;y<o;y+=i)m=t[y],d=t[y+1],m<u&&(u=m),d<h&&(h=d),m>p&&(p=m),d>f&&(f=d);_=Math.max(p-u,f-h)}return s(a,l,i,u,h,_),l}function r(t,e,i,n,r){var o,s;if(r===I(t,e,i,n)>0)for(o=e;o<i;o+=n)s=E(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=E(o,t[o],t[o+1],s);return s&&w(s,s.next)&&(D(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(D(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,r,c,p){if(t){!p&&c&&d(t,n,r,c);for(var f,m,_=t;t.prev!==t.next;)if(f=t.prev,m=t.next,c?l(t,n,r,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(m.i/i),D(t),t=m.next,_=m.next;else if((t=m)===_){p?1===p?(t=u(t,e,i),s(t,e,i,n,r,c,2)):2===p&&h(t,e,i,n,r,c):s(o(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(g(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(x(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,o=t,s=t.next;if(g(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=y(a,l,e,i,n),p=y(u,h,e,i,n),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&x(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&x(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!w(r,o)&&S(r,n,n.next,o)&&T(r,o)&&T(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),D(n),D(n.next),n=t=o),n=n.next}while(n!==t);return n}function h(t,e,i,n,r,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&b(l,u)){var h=M(l,u);return l=o(l,l.next),h=o(h,h.next),s(l,e,i,n,r,a),void s(h,e,i,n,r,a)}u=u.next}l=l.next}while(l!==t)}function c(t,e,i,n){var s,a,l,u,h,c=[];for(s=0,a=e.length;s<a;s++)l=e[s]*n,u=s<a-1?e[s+1]*n:t.length,h=r(t,l,u,n,!1),h===h.next&&(h.steiner=!0),c.push(v(h));for(c.sort(p),s=0;s<c.length;s++)f(c[s],i),i=o(i,i.next);return i}function p(t,e){return t.x-e.x}function f(t,e){if(e=m(t,e)){var i=M(e,t);o(i,i.next)}}function m(t,e){var i,n=e,r=t.x,o=t.y,s=-(1/0);do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i.prev;var l,u=i,h=i.x,c=i.y,p=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=h&&x(o<c?r:s,o,h,c,o<c?s:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<p||l===p&&n.x>i.x)&&T(n,t)&&(i=n,p=l),n=n.next;return i}function d(t,e,i,n){var r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,_(r)}function _(t){var e,i,n,r,o,s,a,l,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0===a?(r=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,a--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(s>1);return t}function y(t,e,i,n,r){return t=32767*(t-i)/r,e=32767*(e-n)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function x(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!C(t,e)&&T(t,e)&&T(e,t)&&A(t,e)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,i,n){return!!(w(t,e)&&w(i,n)||w(t,n)&&w(i,e))||g(t,e,i)>0!=g(t,e,n)>0&&g(i,n,t)>0!=g(i,n,e)>0}function C(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&S(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function T(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function A(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function M(t,e){var i=new P(t.i,t.x,t.y),n=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function E(t,e,i,n){var r=new P(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function D(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=n,n.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(I(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*i,h=a<l-1?e[a+1]*i:t.length;s-=Math.abs(I(t,u,h,i))}var c=0;for(a=0;a<n.length;a+=3){var p=n[a]*i,f=n[a+1]*i,m=n[a+2]*i;c+=Math.abs((t[p]-t[m])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[m+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){var n;!function(r,o){void 0!==(n=function(){return r.FMath=o()}.call(e,i,e,t))&&(t.exports=n)}(this,function(){function t(i){this.params=t._assign(null,t.DEFAULT_PARAMS,i),t._setDefaultValues(this.params),this.cosTable=new Float32Array(this.params.nbCos),this.cosFactor=this.params.nbCos/e,t._fillCache(this.cosTable,this.cosFactor,Math.cos),this.sinTable=new Float32Array(this.params.nbSin),this.sinFactor=this.params.nbSin/e,t._fillCache(this.sinTable,this.sinFactor,Math.sin),this.atanTable=new Float32Array(this.params.nbAtan),this.atanFactor=this.params.nbAtan/(this.params.maxAtan-this.params.minAtan),t._fillAtanCache(this.atanTable,this.atanFactor,this.params.minAtan)}var e=2*Math.PI;return t.DEFAULT_PARAMS={resolution:360,minAtan:-40,maxAtan:40},t.prototype.cos=function(t){return t%=e,t<0&&(t+=e),this.cosTable[t*this.cosFactor|0]},t.prototype.sin=function(t){return t%=e,t<0&&(t+=e),this.sinTable[t*this.sinFactor|0]},t.prototype.atan=function(t){var e=(t-this.params.minAtan)*this.atanFactor|0;return e<0?-Math.PI/2:e>=this.params.nbAtan?Math.PI/2:this.atanTable[e]},t._setDefaultValues=function(t){for(var e=["nbSin","nbCos","nbAtan"],i=e.length-1;i>=0;i--){var n=e[i];t[n]=t[n]||t.resolution}},t._fillAtanCache=function(t,e,i){for(var n=0;n<t.length;n++){var r=i+n/e;t[n]=Math.atan(r)}},t._fillCache=function(t,e,i){for(var n=t.length,r=0;r<n;r++)t[r]=i(r/e)},t._assign=function(t,e,i,n){return[].reduce.call(arguments,function(t,e){e=e||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t||{})},t})},function(t,e){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}t.exports=function(t){return null!=t&&(i(t)||n(t)||!!t._isBuffer)}},function(t,e,i){!function(){var e=i(337),n=i(107).utf8,r=i(340),o=i(107).bin,s=function(t,i){t.constructor==String?t=i&&"binary"===i.encoding?o.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var a=e.bytesToWords(t),l=8*t.length,u=1732584193,h=-271733879,c=-1732584194,p=271733878,f=0;f<a.length;f++)a[f]=16711935&(a[f]<<8|a[f]>>>24)|4278255360&(a[f]<<24|a[f]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;for(var m=s._ff,d=s._gg,_=s._hh,y=s._ii,f=0;f<a.length;f+=16){var v=u,x=h,b=c,g=p;u=m(u,h,c,p,a[f+0],7,-680876936),p=m(p,u,h,c,a[f+1],12,-389564586),c=m(c,p,u,h,a[f+2],17,606105819),h=m(h,c,p,u,a[f+3],22,-1044525330),u=m(u,h,c,p,a[f+4],7,-176418897),p=m(p,u,h,c,a[f+5],12,1200080426),c=m(c,p,u,h,a[f+6],17,-1473231341),h=m(h,c,p,u,a[f+7],22,-45705983),u=m(u,h,c,p,a[f+8],7,1770035416),p=m(p,u,h,c,a[f+9],12,-1958414417),c=m(c,p,u,h,a[f+10],17,-42063),h=m(h,c,p,u,a[f+11],22,-1990404162),u=m(u,h,c,p,a[f+12],7,1804603682),p=m(p,u,h,c,a[f+13],12,-40341101),c=m(c,p,u,h,a[f+14],17,-1502002290),h=m(h,c,p,u,a[f+15],22,1236535329),u=d(u,h,c,p,a[f+1],5,-165796510),p=d(p,u,h,c,a[f+6],9,-1069501632),c=d(c,p,u,h,a[f+11],14,643717713),h=d(h,c,p,u,a[f+0],20,-373897302),u=d(u,h,c,p,a[f+5],5,-701558691),p=d(p,u,h,c,a[f+10],9,38016083),c=d(c,p,u,h,a[f+15],14,-660478335),h=d(h,c,p,u,a[f+4],20,-405537848),u=d(u,h,c,p,a[f+9],5,568446438),p=d(p,u,h,c,a[f+14],9,-1019803690),c=d(c,p,u,h,a[f+3],14,-187363961),h=d(h,c,p,u,a[f+8],20,1163531501),u=d(u,h,c,p,a[f+13],5,-1444681467),p=d(p,u,h,c,a[f+2],9,-51403784),c=d(c,p,u,h,a[f+7],14,1735328473),h=d(h,c,p,u,a[f+12],20,-1926607734),u=_(u,h,c,p,a[f+5],4,-378558),p=_(p,u,h,c,a[f+8],11,-2022574463),c=_(c,p,u,h,a[f+11],16,1839030562),h=_(h,c,p,u,a[f+14],23,-35309556),u=_(u,h,c,p,a[f+1],4,-1530992060),p=_(p,u,h,c,a[f+4],11,1272893353),c=_(c,p,u,h,a[f+7],16,-155497632),h=_(h,c,p,u,a[f+10],23,-1094730640),u=_(u,h,c,p,a[f+13],4,681279174),p=_(p,u,h,c,a[f+0],11,-358537222),c=_(c,p,u,h,a[f+3],16,-722521979),h=_(h,c,p,u,a[f+6],23,76029189),u=_(u,h,c,p,a[f+9],4,-640364487),p=_(p,u,h,c,a[f+12],11,-421815835),c=_(c,p,u,h,a[f+15],16,530742520),h=_(h,c,p,u,a[f+2],23,-995338651),u=y(u,h,c,p,a[f+0],6,-198630844),p=y(p,u,h,c,a[f+7],10,1126891415),c=y(c,p,u,h,a[f+14],15,-1416354905),h=y(h,c,p,u,a[f+5],21,-57434055),u=y(u,h,c,p,a[f+12],6,1700485571),p=y(p,u,h,c,a[f+3],10,-1894986606),c=y(c,p,u,h,a[f+10],15,-1051523),h=y(h,c,p,u,a[f+1],21,-2054922799),u=y(u,h,c,p,a[f+8],6,1873313359),p=y(p,u,h,c,a[f+15],10,-30611744),c=y(c,p,u,h,a[f+6],15,-1560198380),h=y(h,c,p,u,a[f+13],21,1309151649),u=y(u,h,c,p,a[f+4],6,-145523070),p=y(p,u,h,c,a[f+11],10,-1120210379),c=y(c,p,u,h,a[f+2],15,718787259),h=y(h,c,p,u,a[f+9],21,-343485551),u=u+v>>>0,h=h+x>>>0,c=c+b>>>0,p=p+g>>>0}return e.endian([u,h,c,p])};s._ff=function(t,e,i,n,r,o,s){var a=t+(e&i|~e&n)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},s._gg=function(t,e,i,n,r,o,s){var a=t+(e&n|i&~n)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},s._hh=function(t,e,i,n,r,o,s){var a=t+(e^i^n)+(r>>>0)+s;return(a<<o|a>>>32-o)+e},s._ii=function(t,e,i,n,r,o,s){var a=t+(i^(e|~n))+(r>>>0)+s;return(a<<o|a>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,i){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=e.wordsToBytes(s(t,i));return i&&i.asBytes?n:i&&i.asString?o.bytesToString(n):e.bytesToHex(n)}}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,e.default=a,t.exports=e.default},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[i.key[o]]=n[o]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},function(t,e){var i=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var n=!1;i.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var o=new i(t);return o.uploadData(e,n,r),o},t.exports=i},function(t,e){var i=function(t,e,i){var n;if(i){var r=i.tempAttribState,o=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==r[n]&&(o[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}};t.exports=i},function(t,e){var i=function(t,e,i,r){var o=n(t,t.VERTEX_SHADER,e),s=n(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),r)for(var l in r)t.bindAttribLocation(a,r[l],l);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a},n=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};t.exports=i},function(t,e){var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},n=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=i},function(t,e,i){var n=i(139),r=i(351),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var l=t.getActiveAttrib(e,a),u=n(t,l.type);i[l.name]={type:u,size:r(u),location:t.getAttribLocation(e,l.name),pointer:s}}return i},s=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};t.exports=o},function(t,e,i){var n=i(139),r=i(347),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),l=a.name.replace(/\[.*?\]/,""),u=n(t,a.type);i[l]={type:u,size:a.size,location:t.getUniformLocation(e,l),value:r(u,a.size)}}return i};t.exports=o},function(t,e){var i=function(t,e){var i={data:{}};i.gl=t;for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a],u=l.split("."),h=u[u.length-1],c=o(u,i),p=e[l];c.data[h]=p,c.gl=t,Object.defineProperty(c,h,{get:n(h),set:r(h,p)})}return i},n=function(t){var e=s.replace("%%",t);return new Function(e)},r=function(t,e){var i,n=a.replace(/%%/g,t);return i=1===e.size?l[e.type]:u[e.type],i&&(n+="\nthis.gl."+i+";"),new Function("value",n)},o=function(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i},s=["return this.data.%%.value;"].join("\n"),a=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},u={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};t.exports=i},function(t,e){var i=function(t){return n[t]},n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},function(t,e){var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=i},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,i=arguments[2];return!arguments[3]&&s.isWebGLSupported()?new h.default(t,e,i):new l.default(t,e,i)}e.__esModule=!0,e.autoDetectRenderer=r;var o=i(12),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),a=i(97),l=n(a),u=i(104),h=n(u)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(55),u=n(l),h=i(9),c=i(28),p=n(c),f=i(357),m=n(f),d=i(356),_=n(d),y=i(140),v=n(y),x=i(24),b=function(t){function e(){r(this,e);var i=o(this,t.call(this)),n=p.default.TRANSFORM_MODE===h.TRANSFORM_MODE.STATIC?m.default:_.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new v.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return s(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new x.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new x.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(u.default);e.default=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(24),l=i(141),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.Point(0,0),i.scale=new a.Point(1,1),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new a.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return o(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(24),l=i(141),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.ObservablePoint(i.onChange,i,0,0),i.scale=new a.ObservablePoint(i.onChange,i,1,1),i.pivot=new a.ObservablePoint(i.onChange,i,0,0),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return o(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,i,r,o,s,a,l,u){n(this,t),this.lineWidth=e,this.nativeLines=l,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=o,this.fillAlpha=s,this._fillTint=o,this.fill=a,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t<0?-1:t>0?1:0}e.__esModule=!0;var r=i(142),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=n(s[t]*s[i]+l[t]*a[i]),p=n(a[t]*s[i]+u[t]*a[i]),f=n(s[t]*l[i]+l[t]*u[i]),m=n(a[t]*l[i]+u[t]*u[i]),d=0;d<16;d++)if(s[d]===r&&a[d]===p&&l[d]===f&&u[d]===m){e.push(d);break}}for(var _=0;_<16;_++){var y=new o.default;y.set(s[_],a[_],l[_],u[_],0,0),h.push(y)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return l[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][p.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=h[p.inv(e)];r.tx=i,r.ty=n,t.append(r)}};e.default=p},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=r,this._y=o,this.cb=e,this.scope=i}return t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(12),u=i(24),h=i(9),c=i(28),p=n(c),f=i(96),m=n(f),d=i(147),_=n(d),y=i(55),v=n(y),x=new u.Matrix,b=function(t){function e(i,n,s,a){r(this,e);var c=o(this,t.call(this));if((0,l.sayHello)(i),a)for(var f in p.default.RENDER_OPTIONS)void 0===a[f]&&(a[f]=p.default.RENDER_OPTIONS[f]);else a=p.default.RENDER_OPTIONS;return c.type=h.RENDERER_TYPE.UNKNOWN,c.screen=new u.Rectangle(0,0,n||800,s||600),c.view=a.view||document.createElement("canvas"),c.resolution=a.resolution||p.default.RESOLUTION,c.transparent=a.transparent,c.autoResize=a.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=a.preserveDrawingBuffer,c.clearBeforeRender=a.clearBeforeRender,c.roundPixels=a.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=a.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new m.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return s(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i){var n=t.getLocalBounds(),r=_.default.create(0|n.width,0|n.height,e,i);return x.tx=-n.x,x.ty=-n.y,this.render(t,r,!1,x,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,l.hex2string)(t),(0,l.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(v.default);e.default=b},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(28),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e,i,r){n(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function r(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var o=r.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(423),a=n(s),l=i(12),u=i(9),h=i(28),c=n(h),p={},f=function(){function t(e,i,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.blendMode=u.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value;this.glShaders={},p[this.vertexSrc+this.fragmentSrc]||(p[this.vertexSrc+this.fragmentSrc]=(0,l.uid)()),this.glShaderKey=p[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.RESOLUTION,this.enabled=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},o(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(364),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=i(24),u=(i(46),function(t){function e(i){n(this,e);var o=new l.Matrix,s=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,s.maskSprite=i,s.maskMatrix=o,s}return o(e,t),e.prototype.apply=function(t,e,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,i)},e}(a.default));e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(36),s=n(o),a=i(149),l=n(a),u=function(){function t(e,i){r(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,l.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t?(0,u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=r(t[e]);return t}return r(t)}function s(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(9),u=i(12),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:l.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},c=function(){function t(e){n(this,t),this.styleID=0,Object.assign(this,h,e)}return t.prototype.clone=function(){var e={};for(var i in h)e[i]=this[i];return new t(e)},t.prototype.reset=function(){Object.assign(this,h)},a(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){s(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(99),l=n(a),u=i(28),h=n(u),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];r(this,e);var l=o(this,t.call(this,null,s));return l.resolution=a||h.default.RESOLUTION,l.width=i,l.height=n,l.realWidth=l.width*l.resolution,l.realHeight=l.height*l.resolution,l.scaleMode=void 0!==s?s:h.default.SCALE_MODE,l.hasLoaded=!0,l._glRenderTargets={},l._canvasRenderTarget=null,l.valid=!1,l}return s(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(l.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(359),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(){function t(){n(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var s=t.width/2/n,a=t.height/2/r,l=t.x/n+s,u=t.y/r+a;i=o.default.add(i,o.default.NW),this.x0=l+s*o.default.uX(i),this.y0=u+a*o.default.uY(i),i=o.default.add(i,2),this.x1=l+s*o.default.uX(i),this.y1=u+a*o.default.uY(i),i=o.default.add(i,2),this.x2=l+s*o.default.uX(i),this.y2=u+a*o.default.uY(i),i=o.default.add(i,2),this.x3=l+s*o.default.uX(i),this.y3=u+a*o.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(99),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=i(12),c=i(148),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),f=function(t){function e(i,o){if(n(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var s=r(this,t.call(this,i,o));return s.width=i.videoWidth,s.height=i.videoHeight,s._autoUpdate=!0,s._isAutoUpdating=!1,s.autoPlay=!0,s.update=s.update.bind(s),s._onCanPlay=s._onCanPlay.bind(s),i.addEventListener("play",s._onPlayStart.bind(s)),i.addEventListener("pause",s._onPlayStop.bind(s)),s.hasLoaded=!1,s.__loaded=!1,s._isSourceReady()?s._onCanPlay():(i.addEventListener("canplay",s._onCanPlay),i.addEventListener("canplaythrough",s._onCanPlay)),s}return o(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(p.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(p.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&p.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete h.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,h.uid)());var n=h.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),h.BaseTextureCache[t._pixiId]=n),n},e.fromUrl=function(t,i){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)n.appendChild(s(t[r].src||t[r],t[r].mime));else n.appendChild(s(t.src||t,t.mime));return n.load(),e.fromVideo(n,i)},a(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(p.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(p.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),e}(u.default);e.default=f,f.fromUrls=f.fromUrl},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(142),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=new s.default,l=function(){function t(e,i){n(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.update=function(t){var e=this._texture;if(e&&e.valid&&(t||this._lastTextureID!==e._updateID)){this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(a.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(a));var o=e.baseTexture,s=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;s[0]=(e._frame.x+l+u)/o.width,s[1]=(e._frame.y+l+u)/o.height,s[2]=(e._frame.x+e._frame.width-l+u)/o.width,s[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight}},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(375),c=n(h),p=i(374),f=n(p),m=i(376),d=n(m),_=function(t){function e(i,n,s,a){r(this,e),a=a||5;var l=(0,c.default)(a,!0),h=(0,f.default)(a),p=o(this,t.call(this,l,h));return p.resolution=s||u.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return s(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,o=(0,d.default)(r);this.vertexSrc=(0,c.default)(o,!0),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var s=t.getRenderTarget(!0),a=e,l=s,u=0;u<this.passes-1;u++){t.applyFilter(this,a,l,!0);var h=l;l=a,a=h}t.applyFilter(this,a,i,n),t.returnRenderTarget(s)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(375),c=n(h),p=i(374),f=n(p),m=i(376),d=n(m),_=function(t){function e(i,n,s,a){r(this,e),a=a||5;var l=(0,c.default)(a,!1),h=(0,f.default)(a),p=o(this,t.call(this,l,h));return p.resolution=s||u.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return s(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,o=(0,d.default)(r);this.vertexSrc=(0,c.default)(o,!1),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var s=t.getRenderTarget(!0),a=e,l=s,u=0;u<this.passes-1;u++){t.applyFilter(this,a,l,!0);var h=l;l=a,a=h}t.applyFilter(this,a,i,n),t.returnRenderTarget(s)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=_},function(t,e,i){"use strict";function n(t){for(var e=r[t],i=e.length,n=o,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",l=void 0,u=0;u<t;u++){var h=a.replace("%index%",u);l=u,u>=i&&(l=t-u-1),h=h.replace("%value%",e[l]),s+=h,s+="\n"}return n=n.replace("%blur%",s),n=n.replace("%size%",t)}e.__esModule=!0,e.default=n;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";function n(t,e){var i=Math.ceil(t/2),n=r,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(i-1)+".0"),o+=l,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}e.__esModule=!0,e.default=n;var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(459);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var o=i(460);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var s=i(458);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var a=i(456);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var l=i(372);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return n(l).default}});var u=i(373);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return n(u).default}});var h=i(457);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(h).default}});var c=i(461);Object.defineProperty(e,"VoidFilter",{enumerable:!0,get:function(){return n(c).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(6),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=function(){function t(){n(this,t),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(378);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var o=i(464);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var s=i(380);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}})},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";function n(t,e){t.bitmapFont=l.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=n,e.default=function(){return function(t,e){if(!t.data||t.type!==a.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var i=t.isDataUrl?"":o.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,""))),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var r=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(s.utils.TextureCache[r])n(t,s.utils.TextureCache[r]),e();else{var l={crossOrigin:t.crossOrigin,loadType:a.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",r,l,function(i){n(t,i.texture),e()})}}};var r=i(46),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=i(6),a=i(101),l=i(150)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(466);Object.defineProperty(e,"Loader",{enumerable:!0,get:function(){return n(r).default}});var o=i(381);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return o.parse}});var s=i(383);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return n(s).default}});var a=i(384);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return n(a).default}});var l=i(101);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return l.Resource}})},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var i=void 0,r=t.name+"_image";if(!t.data||t.type!==n.Resource.TYPE.JSON||!t.data.frames||this.resources[r])return void e();var a={crossOrigin:t.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};i=t.isDataUrl?t.data.meta.image:o.default.dirname(t.url.replace(this.baseUrl,""))+"/"+t.data.meta.image,this.add(r,i,a,function(i){var n=new s.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}};var n=i(101),r=i(46),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(6)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var n=i(101),r=i(68),o=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(100),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(i,o,s){n(this,e);var l=r(this,t.call(this,i));return l._ready=!0,l.verticesX=o||10,l.verticesY=s||10,l.drawMode=a.default.DRAW_MODES.TRIANGLES,l.refresh(),l}return o(e,t),e.prototype.refresh=function(){for(var t=this.verticesX*this.verticesY,e=[],i=[],n=[],r=[],o=this.texture,s=this.verticesX-1,a=this.verticesY-1,l=o.width/s,u=o.height/a,h=0;h<t;h++)if(o._uvs){var c=h%this.verticesX,p=h/this.verticesX|0;e.push(c*l,p*u),n.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(c/(this.verticesX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(p/(this.verticesY-1)))}else n.push(0);for(var f=s*a,m=0;m<f;m++){var d=m%s,_=m/s|0,y=_*this.verticesX+d,v=_*this.verticesX+d+1,x=(_+1)*this.verticesX+d,b=(_+1)*this.verticesX+d+1;r.push(y,v,x),r.push(v,b,x)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(i),this.indices=new Uint16Array(r),this.indexDirty=!0},e.prototype._onTextureUpdate=function(){a.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(a.default);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(100);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var o=i(470);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=i(469);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=i(385);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return n(a).default}});var l=i(467);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return n(l).default}});var u=i(468);Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return n(u).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(471);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var o=i(473);Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(481);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var o=i(479);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(o).default}});var s=i(151);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var a=i(389);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var l=i(480);Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return n(l).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=r},function(t,e,i){(function(e,i){!function(e){"use strict";function n(t,e,i,n){var r=e&&e.prototype instanceof o?e:o,s=Object.create(r.prototype),a=new m(n||[]);return s._invoke=h(t,i,a),s}function r(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(i,n,o,s){var a=r(t[i],t,n);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&x.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(u).then(function(t){l.value=t,o(l)},s)}s(a.arg)}function n(t,i){function n(){return new Promise(function(n,r){e(t,i,n,r)})}return o=o?o.then(n,n):n()}"object"==typeof i&&i.domain&&(e=i.domain.bind(e));var o;this._invoke=n}function h(t,e,i){var n=T;return function(o,s){if(n===M)throw new Error("Generator is already running");if(n===E){if("throw"===o)throw s;return _()}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var l=c(a,i);if(l){if(l===D)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===T)throw n=E,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=M;var u=r(t,e,i);if("normal"===u.type){if(n=i.done?E:A,u.arg===D)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=E,i.method="throw",i.arg=u.arg)}}}function c(t,e){var i=t.iterator[e.method];if(i===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,c(t,e),"throw"===e.method))return D;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var n=r(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,D;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,D):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,D)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function m(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function d(t){if(t){var e=t[g];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(x.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=y,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:y,done:!0}}var y,v=Object.prototype,x=v.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},g=b.iterator||"@@iterator",w=b.toStringTag||"@@toStringTag",S="object"==typeof t,C=e.regeneratorRuntime;if(C)return void(S&&(t.exports=C));C=e.regeneratorRuntime=S?t.exports:{},C.wrap=n;var T="suspendedStart",A="suspendedYield",M="executing",E="completed",D={},P={};P[g]=function(){return this};var I=Object.getPrototypeOf,O=I&&I(I(d([])));O&&O!==v&&x.call(O,g)&&(P=O);var R=a.prototype=o.prototype=Object.create(P);s.prototype=R.constructor=a,a.constructor=s,a[w]=s.displayName="GeneratorFunction",C.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(R),t},C.awrap=function(t){return{__await:t}},l(u.prototype),C.AsyncIterator=u,C.async=function(t,e,i,r){var o=new u(n(t,e,i,r));return C.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},l(R),R[w]="Generator",R.toString=function(){return"[object Generator]"},C.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},C.values=d,m.prototype={constructor:m,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&x.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return o.type="throw",o.arg=t,i.next=e,n&&(i.method="next",i.arg=y),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=x.call(r,"catchLoc"),a=x.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&x.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,D):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),D},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),f(i),D}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;f(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:d(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=y),D}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,i(67),i(102))},function(t,e,i){"use strict";function n(){}function r(t,e,i){var n=0,r=t.length;!function o(s){if(s||n===r)return void(i&&i(s));e(t[n++],o)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function s(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){return a.drain()},1);var r={data:t,callback:"function"==typeof i?i:n};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}function r(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){s=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,o(r(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}e.__esModule=!0,e.eachSeries=r,e.queue=s},function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];switch(i-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=r.charAt(o[a])}return e}e.__esModule=!0,e.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(){var e=i(462),o=i(153).Level,s=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:480;n(this,t),this.screenSize=i,this.pixi=new e.Application(window.innerWidth,window.innerHeight,{autoResize:!1,roundPixels:!0,clearBeforeRender:!1,resolution:1}),this.camera=new e.Container,this.pixi.stage.addChild(this.camera),this.level=new o,this.level.onUpdateHero=this._onUpdateHero.bind(this),this.level.onCreateHero=this._onCreateHero.bind(this),this.level.onRemoveHero=this._onRemoveHero.bind(this),document.body.appendChild(this.pixi.view),window.addEventListener("resize",this.onResize.bind(this),!0),this.onResize(),this.pixi.start()}return r(t,[{key:"cameraToHero",value:function(t){this.camera.x=Math.floor(-t.sprite.x+window.innerWidth/2/this.scale),this.camera.y=Math.floor(-t.sprite.y+window.innerHeight/2/this.scale)}},{key:"onUpdateHero",value:function(t){}},{key:"_onUpdateHero",value:function(t){this.onUpdateHero(t),t.sprite&&(t.sprite.x=t.x*this.level.accuracy,t.sprite.y=t.y*this.level.accuracy)}},{key:"onCreateHero",value:function(t){t.sprite=e.Sprite.fromImage("bunny.png"),t.sprite.anchor.set(.5),t.sprite.texture.baseTexture.scaleMode=e.SCALE_MODES.NEAREST}},{key:"_onCreateHero",value:function(t){t.sprite||(this.onCreateHero(t),t.sprite&&(t.sprite.x=t.x*this.level.accuracy,t.sprite.y=t.y*this.level.accuracy,(this.layers?this.layers.heros:this.camera).addChild(t.sprite)))}},{key:"onRemoveHero",value:function(t){}},{key:"_onRemoveHero",value:function(t){this.onRemoveHero(t),t.sprite&&t.sprite.parent&&t.sprite.parent.removeChild(t.sprite)}},{key:"onResize",value:function(){this.scale=this.getScale(),this.pixi.renderer.resize(window.innerWidth,window.innerHeight),this.pixi.stage.scale.set(this.scale)}},{key:"getScale",value:function(){return+(Math.sqrt(window.innerWidth*window.innerHeight)/this.screenSize).toFixed(2)}},{key:"getTexture",value:function(t){if(!this.textureCache[t]){var i=this.level.tileset.tilewidth,n=this.level.tileset.imagewidth/this.level.tileset.tilewidth,r=(t-1)%n*i,o=Math.floor((t-1)/n)*i;this.textureCache[t]=new e.Texture(this.tileset,new e.Rectangle(r,o,i,i)),this.textureCache[t].baseTexture.scaleMode=e.SCALE_MODES.NEAREST}return this.textureCache[t]}},{key:"createSprite",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.SCALE_MODES.NEAREST,n=void 0;return n=isFinite(t)?new e.Sprite(this.getTexture(parseInt(t,10))):e.Sprite.fromFrame(t),n.texture.baseTexture.scaleMode=i,n}},{key:"addBlock",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.layers.blocks,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.SCALE_MODES.NEAREST,s=this.createSprite(n,o);s.width=s.height=this.level.tileset.tilewidth,s.x=Math.floor(this.level.tileset.tilewidth*t),s.y=Math.floor(this.level.tileset.tilewidth*i),s.anchor.set(.5),r.addChild(s)}},{key:"addBlocks",value:function(){for(var t=0;t<this.level.height;t++)for(var e=0;e<this.level.width;e++){var i=this.level.blocks[e+":"+t];if(i&&Array.isArray(i))for(var n=0;n<i.length;n++)parseInt(i[n],10)&&this.addBlock(e,t,i[n])}}},{key:"createLevel",value:function(t){this.textureCache={},this.layers={blocks:new e.Container,heros:new e.Container},this.tileset=e.Texture.fromImage(t.tilesets[0].image,!1,e.SCALE_MODES.NEAREST),this.camera.addChild(this.layers.blocks),this.camera.addChild(this.layers.heros),this.level.fromTiled(t),this.addBlocks()}},{key:"_onMouseMove",value:function(t){t.stopPropagation();var e=t.touches?t.touches[0]:t;this.mouse={x:e.clientX,y:e.clientY},this.onMouseMove&&this.onMouseMove()}},{key:"_onMouseClick",value:function(t){this._onMouseMove(t),this.onMouseClick&&this.onMouseClick()}},{key:"useMouse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.addEventListener("touchmove",this._onMouseMove.bind(this),!1),window.addEventListener("touchstart",this._onMouseClick.bind(this),!1),window.addEventListener("mousemove",this._onMouseMove.bind(this),!1),window.addEventListener("mousedown",this._onMouseClick.bind(this),!1),t&&this.disableContextMenu()}},{key:"disableContextMenu",value:function(){document.body.addEventListener("contextmenu",function(t){return t.preventDefault()},!1)}},{key:"hero",get:function(){return this.level.heros[this.id]}}]),t}();t.exports=s}()},function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,l=n(t),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var h in i)o.call(i,h)&&(l[h]=i[h]);if(r){a=r(i);for(var c=0;c<a.length;c++)s.call(i,a[c])&&(l[a[c]]=i[a[c]])}}return l}},function(t,e){var i=new ArrayBuffer(0),n=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=n},function(t,e,i){var n=i(344),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,o){var s=n.fromData(t,null,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},r.createFloat32=function(t,e,i,o){var s=new n.fromData(t,o,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},t.exports=r},function(t,e,i){var n=i(346),r=i(348),o=i(349),s=i(352),a=i(350),l=function(t,e,i,l,u){this.gl=t,l&&(e=s(e,l),i=s(i,l)),this.program=n(t,e,i,u),this.attributes=r(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};l.prototype.bind=function(){this.gl.useProgram(this.program)},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=l},function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=i(345);n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e){var i=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};t.exports=i},function(t,e,i){t.exports={compileProgram:i(346),defaultValue:i(347),extractAttributes:i(348),extractUniforms:i(349),generateUniformAccessObject:i(350),setPrecision:i(352),mapSize:i(351),mapType:i(139)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(6),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),a=i(138),l=n(a),u=i(353),h=n(u);s.utils.mixins.delayMixin(s.DisplayObject.prototype,h.default);var c=100,p=0,f=0,m=2,d=function(){function t(e){r(this,t),!l.default.tablet&&!l.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=c+"px",i.style.height=c+"px",i.style.position="absolute",i.style.top=p+"px",i.style.left=f+"px",i.style.zIndex=m,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var o=this.children[r];if(o.renderId!==this.renderId)o._accessibleActive=!1,s.utils.removeItems(this.children,r,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,l=o.worldTransform;o.hitArea?(n.style.left=(l.tx+a.x*l.a)*e+"px",n.style.top=(l.ty+a.y*l.d)*i+"px",n.style.width=a.width*l.a*e+"px",n.style.height=a.height*l.d*i+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=c+"px",e.style.height=c+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=m,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=d,s.WebGLRenderer.registerPlugin("accessibility",d),s.CanvasRenderer.registerPlugin("accessibility",d)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(353);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var o=i(401);Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(354),s=i(96),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=i(148),u=function(){function t(e,i,r,s){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,t),this.renderer=(0,o.autoDetectRenderer)(e,i,r,s),this.stage=new a.default,this._ticker=null,this.ticker=u?l.shared:new l.Ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){this.stop(),this.ticker=null,this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(96),l=n(a),u=i(147),h=n(u),c=i(68),p=n(c),f=i(358),m=n(f),d=i(145),_=n(d),y=i(24),v=i(12),x=i(9),b=i(140),g=n(b),w=i(406),S=n(w),C=i(97),T=n(C),A=void 0,M=new y.Matrix,E=new y.Point,D=new Float32Array(4),P=new Float32Array(4),I=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var n=o(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=x.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new g.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n}return s(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var n=new y.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new y.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=this.currentPath.shape.points,o=0,s=0;0===r.length&&this.moveTo(0,0);for(var a=r[r.length-2],l=r[r.length-1],u=1;u<=20;++u){var h=u/20;o=a+(t-a)*h,s=l+(e-l)*h,r.push(o+(t+(i-t)*h-o)*h,s+(e+(n-e)*h-s)*h)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,n,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],l=s[s.length-1];return s.length-=2,(0,S.default)(a,l,t,e,i,n,r,o,s),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],l=a-e,u=s-t,h=n-e,c=i-t,p=Math.abs(l*c-u*h);if(p<1e-8||0===r)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=l*l+u*u,m=h*h+c*c,d=l*h+u*c,_=r*Math.sqrt(f)/p,y=r*Math.sqrt(m)/p,v=_*d/f,x=y*d/m,b=_*c+y*u,g=_*h+y*l,w=u*(y+v),S=l*(y+v),C=c*(_+x),T=h*(_+x),A=Math.atan2(S-g,w-b),M=Math.atan2(T-g,C-b);this.arc(b+t,g+e,r,A,M,u*h>c*l)}return this.dirty++,this},e.prototype.arc=function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===r)return this;!o&&r<=n?r+=2*Math.PI:o&&n<=r&&(n+=2*Math.PI);var s=r-n,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var l=t+Math.cos(n)*i,u=e+Math.sin(n)*i,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===l&&h[h.length-1]===u||h.push(l,u):(this.moveTo(l,u),h=this.currentPath.shape.points);for(var c=s/(2*a),p=2*c,f=Math.cos(c),m=Math.sin(c),d=a-1,_=d%1/d,y=0;y<=d;++y){var v=y+_*y,x=c+n+p*v,b=Math.cos(x),g=-Math.sin(x);h.push((f*b+m*g)*i+t,(f*-g+m*b)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new y.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new y.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new y.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new y.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof y.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new y.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===x.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new _.default(new p.default(p.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var n=D,r=P;(0,v.hex2rgb)(this.graphicsData[0].fillColor,n),(0,v.hex2rgb)(this.tint,r),n[0]*=r[0],n[1]*=r[1],n[2]*=r[2],i.tint=(0,v.rgb2hex)(n)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i.texture._frame.width=e.width,i.texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,E);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(E.x,E.y)))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),i=1/0,n=-(1/0);if(this.graphicsData.length)for(var r=0,o=0,s=0,a=0,l=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],c=h.type,p=h.lineWidth;if(r=h.shape,c===x.SHAPES.RECT||c===x.SHAPES.RREC)o=r.x-p/2,s=r.y-p/2,a=r.width+p,l=r.height+p,t=o<t?o:t,e=o+a>e?o+a:e,i=s<i?s:i,n=s+l>n?s+l:n;else if(c===x.SHAPES.CIRC)o=r.x,s=r.y,a=r.radius+p/2,l=r.radius+p/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,i=s-l<i?s-l:i,n=s+l>n?s+l:n;else if(c===x.SHAPES.ELIP)o=r.x,s=r.y,a=r.width+p/2,l=r.height+p/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,i=s-l<i?s-l:i,n=s+l>n?s+l:n;else for(var f=r.points,m=0,d=0,_=0,y=0,v=0,b=0,g=0,w=0,S=0;S+2<f.length;S+=2)o=f[S],s=f[S+1],m=f[S+2],d=f[S+3],_=Math.abs(m-o),y=Math.abs(d-s),l=p,(a=Math.sqrt(_*_+y*y))<1e-9||(v=(l/a*y+_)/2,b=(l/a*_+y)/2,g=(m+o)/2,w=(d+s)/2,t=g-v<t?g-v:t,e=g+v>e?g+v:e,i=w-b<i?w-b:i,n=w+b>n?w+b:n)}else t=0,e=0,i=0,n=0;var C=this.boundsPadding;this._localBounds.minX=t-C,this._localBounds.maxX=e+2*C,this._localBounds.minY=i-C,this._localBounds.maxY=n+2*C},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new m.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===x.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=h.default.create(i.width,i.height,t,e);A||(A=new T.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(M),M.invert(),M.tx-=i.x,M.ty-=i.y,A.render(this,n,!0,M);var r=p.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t);return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webgl)for(var r=0;r<this._webgl[n].data.length;++r)this._webgl[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(l.default);e.default=I,I._SPRITE_TEXTURE=null},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(97),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(9),a=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var l=t.graphicsData[a],u=l.shape,h=l._fillTint,c=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===s.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var p=0;p<l.holes.length;p++)this.renderPolygon(l.holes[p].points,!0,i);l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(l.type===s.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(l.type===s.SHAPES.ELIP){var f=2*u.width,m=2*u.height,d=u.x-f/2,_=u.y-m/2;i.beginPath();var y=f/2*.5522848,v=m/2*.5522848,x=d+f,b=_+m,g=d+f/2,w=_+m/2;i.moveTo(d,w),i.bezierCurveTo(d,w-v,g-y,_,g,_),i.bezierCurveTo(g+y,_,x,w-v,x,w),i.bezierCurveTo(x,w+v,g+y,b,g,b),i.bezierCurveTo(g-y,b,d,w+v,d,w),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RREC){var S=u.x,C=u.y,T=u.width,A=u.height,M=u.radius,E=Math.min(T,A)/2|0;M=M>E?E:M,i.beginPath(),i.moveTo(S,C+M),i.lineTo(S,C+A-M),i.quadraticCurveTo(S,C+A,S+M,C+A),i.lineTo(S+T-M,C+A),i.quadraticCurveTo(S+T,C+A,S+T,C+A-M),i.lineTo(S+T,C+M),i.quadraticCurveTo(S+T,C,S+T-M,C),i.lineTo(S+M,C),i.quadraticCurveTo(S,C,S,C+M),i.closePath(),(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var o=t.graphicsData[r],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=a,o.default.registerPlugin("graphics",a)},function(t,e,i){"use strict";function n(t,e,i,n,r,o,s,a){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,h=0,c=0,p=0,f=0;l.push(t,e);for(var m=1,d=0;m<=20;++m)d=m/20,u=1-d,h=u*u,c=h*u,p=d*d,f=p*d,l.push(c*t+3*h*d*i+3*u*p*r+f*s,c*e+3*h*d*n+3*u*p*o+f*a);return l}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(12),l=i(9),u=i(105),h=n(u),c=i(104),p=n(c),f=i(408),m=n(f),d=i(409),_=n(d),y=i(411),v=n(y),x=i(412),b=n(x),g=i(413),w=n(g),S=i(410),C=n(S),T=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new _.default(this.gl)},e.prototype.destroy=function(){h.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,l=r.data.length;s<l;s++){n=r.data[s];var u=n.shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,a.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),t.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,o=i.lastIndex;o<t.graphicsData.length;o++){var s=t.graphicsData[o];r=this.getWebGLData(i,0),s.type===l.SHAPES.POLY&&(0,v.default)(s,r),s.type===l.SHAPES.RECT?(0,b.default)(s,r):s.type===l.SHAPES.CIRC||s.type===l.SHAPES.ELIP?(0,C.default)(s,r):s.type===l.SHAPES.RREC&&(0,w.default)(s,r),i.lastIndex++}this.renderer.bindVao(null);for(var a=0;a<i.data.length;a++)r=i.data[a],r.dirty&&r.upload()},e.prototype.getWebGLData=function(t,e){var i=t.data[t.data.length-1];return(!i||i.points.length>32e4)&&(i=this.graphicsDataPool.pop()||new m.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),i.reset(e),t.data.push(i)),i.dirty=!0,i},e}(h.default);e.default=T,p.default.registerPlugin("graphics",T)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(36),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(){function t(e,i,r){n(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new o.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(95),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return o(e,t),e}(a.default);e.default=l},function(t,e,i){"use strict";function n(t,e){var i=t.shape,n=i.x,r=i.y,l=void 0,u=void 0;if(t.type===s.SHAPES.CIRC?(l=i.radius,u=i.radius):(l=i.width,u=i.height),0!==l&&0!==u){var h=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height)),c=2*Math.PI/h;if(t.fill){var p=(0,a.hex2rgb)(t.fillColor),f=t.fillAlpha,m=p[0]*f,d=p[1]*f,_=p[2]*f,y=e.points,v=e.indices,x=y.length/6;v.push(x);for(var b=0;b<h+1;b++)y.push(n,r,m,d,_,f),y.push(n+Math.sin(c*b)*l,r+Math.cos(c*b)*u,m,d,_,f),v.push(x++,x++);v.push(x-1)}if(t.lineWidth){var g=t.points;t.points=[];for(var w=0;w<h+1;w++)t.points.push(n+Math.sin(c*w)*l,r+Math.cos(c*w)*u);(0,o.default)(t,e),t.points=g}}}e.__esModule=!0,e.default=n;var r=i(103),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(9),a=i(12)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.points=t.shape.points.slice();var i=t.points;if(t.fill&&i.length>=6){for(var n=[],r=t.holes,o=0;o<r.length;o++){var l=r[o];n.push(i.length/2),i=i.concat(l.points)}var h=e.points,c=e.indices,p=i.length/2,f=(0,a.hex2rgb)(t.fillColor),m=t.fillAlpha,d=f[0]*m,_=f[1]*m,y=f[2]*m,v=(0,u.default)(i,n,2);if(!v)return;for(var x=h.length/6,b=0;b<v.length;b+=3)c.push(v[b]+x),c.push(v[b]+x),c.push(v[b+1]+x),c.push(v[b+2]+x),c.push(v[b+2]+x);for(var g=0;g<p;g++)h.push(i[2*g],i[2*g+1],d,_,y,m)}t.lineWidth>0&&(0,s.default)(t,e)}e.__esModule=!0,e.default=r;var o=i(103),s=n(o),a=i(12),l=i(338),u=n(l)},function(t,e,i){"use strict";function n(t,e){var i=t.shape,n=i.x,r=i.y,a=i.width,l=i.height;if(t.fill){var u=(0,s.hex2rgb)(t.fillColor),h=t.fillAlpha,c=u[0]*h,p=u[1]*h,f=u[2]*h,m=e.points,d=e.indices,_=m.length/6;m.push(n,r),m.push(c,p,f,h),m.push(n+a,r),m.push(c,p,f,h),m.push(n,r+l),m.push(c,p,f,h),m.push(n+a,r+l),m.push(c,p,f,h),d.push(_,_,_+1,_+2,_+3,_+3)}if(t.lineWidth){var y=t.points;t.points=[n,r,n+a,r,n+a,r+l,n,r+l,n,r],(0,o.default)(t,e),t.points=y}}e.__esModule=!0,e.default=n;var r=i(103),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(12)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i=t.shape,n=i.x,r=i.y,o=i.width,a=i.height,u=i.radius,p=[];if(p.push(n,r+u),s(n,r+a-u,n,r+a,n+u,r+a,p),s(n+o-u,r+a,n+o,r+a,n+o,r+a-u,p),s(n+o,r+u,n+o,r,n+o-u,r,p),s(n+u,r,n,r,n,r+u+1e-10,p),t.fill){for(var f=(0,c.hex2rgb)(t.fillColor),m=t.fillAlpha,d=f[0]*m,_=f[1]*m,y=f[2]*m,v=e.points,x=e.indices,b=v.length/6,g=(0,l.default)(p,null,2),w=0,S=g.length;w<S;w+=3)x.push(g[w]+b),x.push(g[w]+b),x.push(g[w+1]+b),x.push(g[w+2]+b),x.push(g[w+2]+b);for(var C=0,T=p.length;C<T;C++)v.push(p[C],p[++C],d,_,y,m)}if(t.lineWidth){var A=t.points;t.points=p,(0,h.default)(t,e),t.points=A}}function o(t,e,i){return t+(e-t)*i}function s(t,e,i,n,r,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=a,u=0,h=0,c=0,p=0,f=0,m=0,d=0,_=0;d<=20;++d)_=d/20,u=o(t,i,_),h=o(e,n,_),c=o(i,r,_),p=o(n,s,_),f=o(u,c,_),m=o(h,p,_),l.push(f,m);return l}e.__esModule=!0,e.default=r;var a=i(338),l=n(a),u=i(103),h=n(u),c=i(12)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(144),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(9),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=i,this.radius=r,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=i},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(144),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(9),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=o,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(143),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i(9),a=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(n(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof o.default){for(var a=[],l=0,u=i.length;l<u;l++)a.push(i[l].x,i[l].y);i=a}this.closed=!0,this.points=i,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,o=n-1;r<n;o=r++){var s=this.points[2*r],a=this.points[2*r+1],l=this.points[2*o],u=this.points[2*o+1];a>e!=u>e&&t<(e-a)/(u-a)*(l-s)+s&&(i=!i)}return i},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(9),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=o,this.height=s,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(n=e-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(9),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var u=2*s.width,h=2*s.height,c=s.x-u/2,p=s.y-h/2,f=u/2*.5522848,m=h/2*.5522848,d=c+u,_=p+h,y=c+u/2,v=p+h/2;e.moveTo(c,v),e.bezierCurveTo(c,v-m,y-f,p,y,p),e.bezierCurveTo(y+f,p,d,v-m,d,v),e.bezierCurveTo(d,v+m,y+f,_,y,_),e.bezierCurveTo(y-f,_,c,v+m,c,v),e.closePath()}else if(o.type===r.SHAPES.RREC){var x=s.x,b=s.y,g=s.width,w=s.height,S=s.radius,C=Math.min(g,w)/2|0;S=S>C?C:S,e.moveTo(x,b+S),e.lineTo(x,b+w-S),e.quadraticCurveTo(x,b+w,x+S,b+w),e.lineTo(x+g-S,b+w),e.quadraticCurveTo(x+g,b+w,x+g,b+w-S),e.lineTo(x+g,b+S),e.quadraticCurveTo(x+g,b,x+g-S,b),e.lineTo(x+S,b),e.quadraticCurveTo(x,b,x,b+S),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over"),t}e.__esModule=!0,e.default=n;var r=i(9),o=i(363),s=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(9),o=i(28),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(36),o=i(9),s=i(106),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=i(12),u=function(){function t(e){n(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var l=0;l<s.length;++l)if(s[l]===t){e=l;break}}s[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(n){var h=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);h.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=h,u=h.texture}else u=new r.GLTexture(this.gl,null,null,null,null),u.bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var i=this._managedTextures.indexOf(t);i!==-1&&(0,l.removeItems)(this._managedTextures,i,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(429),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(){function t(e){n(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){t!==this.activeState[4]&&(this.activeState[4]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=s},function(t,e,i){"use strict";function n(t,e,i){var n=r(t),o=r(e);return Object.assign(n,o)}function r(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<r.length;o++){var s=r[o].trim();if(s.indexOf("uniform")>-1){var l=s.split(" "),u=l[1],h=l[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(e)||(i[h]={value:a(u,c),name:h,type:u})}}return i}e.__esModule=!0,e.default=n;var o=i(36),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=s.default.shader.defaultValue},function(t,e,i){"use strict";function n(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n}function r(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,o=i.height/e.height;return n.scale(r,o),n}function o(t,e,i,n){var r=n.worldTransform.copy(s.Matrix.TEMP_MATRIX),o=n._texture.baseTexture,a=t.identity(),l=i.height/i.width;a.translate(e.x/i.width,e.y/i.height),a.scale(1,l);var u=i.width/o.width,h=i.height/o.height;return r.tx/=o.width*u,r.ty/=o.width*u,r.invert(),a.prepend(r),a.scale(1,1/l),a.scale(u,h),a.translate(n.anchor.x,n.anchor.y),a}e.__esModule=!0,e.calculateScreenSpaceMatrix=n,e.calculateNormalizedScreenSpaceMatrix=r,e.calculateSpriteMatrix=o;var s=i(24)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=i(98),l=n(a),u=i(106),h=n(u),c=i(366),p=n(c),f=i(24),m=i(95),d=n(m),_=i(424),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(_),v=i(137),x=n(v),b=function t(){s(this,t),this.renderTarget=null,this.sourceFrame=new f.Rectangle,this.destinationFrame=new f.Rectangle,this.filters=[],this.target=null,this.resolution=1},g=function(t){function e(i){s(this,e);var n=r(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new p.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return o(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new b;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new b);var s=e[0].resolution,a=0|e[0].padding,l=t.filterArea||t.getBounds(!0),u=o.sourceFrame,h=o.destinationFrame;u.x=(l.x*s|0)/s,u.y=(l.y*s|0)/s,u.width=(l.width*s|0)/s,u.height=(l.height*s|0)/s,n.stack[0].renderTarget.transform||u.fit(n.stack[0].destinationFrame),u.pad(a),h.width=u.width,h.height=u.height;var c=this.getPotRenderTarget(i.gl,u.width,u.height,s);o.target=t,o.filters=e,o.resolution=s,o.renderTarget=c,c.setFrame(h,u),i.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,r,o,!0,i);var a=r;r=o,o=a}n[s].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(o)}0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,o=r.gl,s=t.glShaders[r.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new d.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s):s=t.glShaders[r.CONTEXT_UID]=new d.default(this.gl,t.vertexSrc,t.fragmentSrc),r.bindVao(null),this.quad.initVao(s)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(o.disable(o.SCISSOR_TEST),r.clear(),o.enable(o.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),r.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var l in i)if("sampler2D"===i[l].type&&0!==n[l]){if(n[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,r);else{t.uniforms[l]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[l].texture.bind()}r++}else if("mat3"===i[l].type)void 0!==n[l].a?t.uniforms[l]=n[l].toArray(!0):t.uniforms[l]=n[l];else if("vec2"===i[l].type)if(void 0!==n[l].x){var h=t.uniforms[l]||new Float32Array(2);h[0]=n[l].x,h[1]=n[l].y,t.uniforms[l]=h}else t.uniforms[l]=n[l];else"float"===i[l].type?t.uniforms.data[l].value!==i[l]&&(t.uniforms[l]=n[l]):t.uniforms[l]=n[l]},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return y.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){e=x.default.nextPow2(e*n),i=x.default.nextPow2(i*n);var r=(65535&e)<<16|65535&i;this.pool[r]||(this.pool[r]=[]);var o=this.pool[r].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new h.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=i/n,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,i=t.size.height*t.resolution,n=(65535&e)<<16|65535&i;this.pool[n].push(t)},e}(l.default);e.default=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(98),l=n(a),u=i(365),h=n(u),c=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return s(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(l.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(98),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.stencilMaskStack=null,o}return o(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),i.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,i.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,i=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(i),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){a.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(a.default);e.default=l},function(t,e,i){"use strict";function n(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=s.default.createContext(n)}for(var o=e.createShader(e.FRAGMENT_SHADER);;){var l=a.replace(/%forloop%/gi,r(t));if(e.shaderSource(o,l),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function r(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}e.__esModule=!0,e.default=n;var o=i(36),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e}e.__esModule=!0,e.default=n;var r=i(9)},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e.default=n;var r=i(9)},function(t,e,i){"use strict";function n(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(97),s=n(o),a=i(9),l=i(24),u=i(146),h=n(u),c=new l.Matrix,p=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,o=t.transform.worldTransform,s=0,u=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var p=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==p&&(i.context[i.smoothProperty]=p),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,l.GroupD8.matrixAppendRotationInv(o,e.rotate,s,u),s=0,u=0),s-=n/2,u-=r/2,i.roundPixels?(i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution|0,o.ty*i.resolution|0),s|=0,u|=0):i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution,o.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*f,r*f,s*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,n*f,r*f,s*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=p,s.default.registerPlugin("sprite",p)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(105),l=n(a),u=i(104),h=n(u),c=i(149),p=n(c),f=i(435),m=n(f),d=i(428),_=n(d),y=i(433),v=n(y),x=i(28),b=n(x),g=i(36),w=n(g),S=i(137),C=n(S),T=0,A=0,M=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=b.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var s=1;s<=C.default.nextPow2(n.size);s*=2)n.buffers.push(new v.default(4*s*n.vertByteSize));n.indices=(0,p.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,_.default)(this.MAX_TEXTURES,t));var e=this.shader=(0,m.default)(t,this.MAX_TEXTURES);this.indexBuffer=w.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var i=0;i<this.vaoMax;i++)this.vertexBuffers[i]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[i]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[i],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[i],e.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[i],e.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12),e.attributes.aTextureId&&this.vaos[i].addAttribute(this.vertexBuffers[i],e.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=C.default.nextPow2(this.currentIndex),n=C.default.log2(i),r=this.buffers[n],o=this.sprites,s=this.groups,a=r.float32View,l=r.uint32View,u=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,p=0,f=void 0,m=void 0,d=1,_=0,y=s[0],v=void 0,x=void 0,g=o[0].blendMode;y.textureCount=0,y.start=0,y.blend=g,T++;var S=void 0;for(S=0;S<e;++S)u[S]=h[S],u[S]._virtalBoundId=S;for(S=0;S<this.currentIndex;++S){var M=o[S];if(f=M._texture.baseTexture,g!==M.blendMode&&(g=M.blendMode,m=null,_=e,T++),m!==f&&(m=f,f._enabled!==T)){if(_===e&&(T++,y.size=S-y.start,_=0,y=s[d++],y.blend=g,y.textureCount=0,y.start=S),f.touched=c,f._virtalBoundId===-1)for(var E=0;E<e;++E){var D=(E+A)%e,P=u[D];if(P._enabled!==T){A++,P._virtalBoundId=-1,f._virtalBoundId=D,u[D]=f;break}}f._enabled=T,y.textureCount++,y.ids[_]=f._virtalBoundId,y.textures[_++]=f}if(v=M.vertexData,x=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var I=this.renderer.resolution;a[p]=(v[0]*I|0)/I,a[p+1]=(v[1]*I|0)/I,a[p+5]=(v[2]*I|0)/I,a[p+6]=(v[3]*I|0)/I,a[p+10]=(v[4]*I|0)/I,a[p+11]=(v[5]*I|0)/I,a[p+15]=(v[6]*I|0)/I,a[p+16]=(v[7]*I|0)/I}else a[p]=v[0],a[p+1]=v[1],a[p+5]=v[2],a[p+6]=v[3],a[p+10]=v[4],a[p+11]=v[5],a[p+15]=v[6],a[p+16]=v[7];l[p+2]=x[0],l[p+7]=x[1],l[p+12]=x[2],l[p+17]=x[3],l[p+3]=l[p+8]=l[p+13]=l[p+18]=M._tintRGB+(255*Math.min(M.worldAlpha,1)<<24),a[p+4]=a[p+9]=a[p+14]=a[p+19]=f._virtalBoundId,p+=20}for(y.size=S-y.start,b.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12),this.shader.attributes.aTextureId&&this.vaos[this.vertexCount].addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++),S=0;S<e;++S)h[S]._virtalBoundId=-1;for(S=0;S<d;++S){for(var O=s[S],R=O.textureCount,B=0;B<R;B++)m=O.textures[B],h[O.ids[B]]!==m&&this.renderer.bindTexture(m,O.ids[B],!0),m._virtalBoundId=-1;this.renderer.state.setBlendMode(O.blend),t.drawElements(t.TRIANGLES,6*O.size,t.UNSIGNED_SHORT,6*O.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),b.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(l.default);e.default=M,h.default.registerPlugin("sprite",M)},function(t,e,i){"use strict";function n(t,e){var i=a;i=i.replace(/%count%/gi,e),i=i.replace(/%forloop%/gi,r(e));for(var n=new s.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",i),o=[],l=0;l<e;l++)o[l]=l;return n.bind(),n.uniforms.uSamplers=o,n}function r(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=n;var o=i(95),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=(i(46),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(145),u=n(l),h=i(68),c=n(h),p=i(24),f=i(12),m=i(9),d=i(28),_=n(d),y=i(367),v=n(y),x=i(444),b=n(x),g={texture:!0,children:!1,baseTexture:!0},w=function(t){function e(i,n,s){r(this,e),s=s||document.createElement("canvas"),s.width=3,s.height=3;var a=c.default.fromCanvas(s);a.orig=new p.Rectangle,a.trim=new p.Rectangle;var l=o(this,t.call(this,a));return l.canvas=s,l.context=l.canvas.getContext("2d"),l.resolution=_.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=i,l.style=n,l.localStyleID=-1,l}return s(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=e.getFontStyle(i),this.context.font=this._font;for(var n=i.wordWrap?this.wordWrap(this._text):this._text,r=n.split(/(?:\r\n|\r|\n)/),o=new Array(r.length),s=0,a=e.calculateFontProperties(this._font),l=0;l<r.length;l++){var u=this.context.measureText(r[l]).width+(r[l].length-1)*i.letterSpacing;o[l]=u,s=Math.max(s,u)}var h=s+i.strokeThickness;i.dropShadow&&(h+=i.dropShadowDistance),this.canvas.width=Math.ceil((h+2*i.padding)*this.resolution);var c=i.lineHeight||a.fontSize+i.strokeThickness,p=Math.max(c,a.fontSize+i.strokeThickness)+(r.length-1)*c;i.dropShadow&&(p+=i.dropShadowDistance),this.canvas.height=Math.ceil((p+2*i.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=i.stroke,this.context.lineWidth=i.strokeThickness,this.context.textBaseline=i.textBaseline,this.context.lineJoin=i.lineJoin,this.context.miterLimit=i.miterLimit;var f=void 0,m=void 0;if(i.dropShadow){this.context.shadowBlur=i.dropShadowBlur,this.context.globalAlpha=i.dropShadowAlpha,i.dropShadowBlur>0?this.context.shadowColor=i.dropShadowColor:this.context.fillStyle=i.dropShadowColor;for(var d=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,_=Math.sin(i.dropShadowAngle)*i.dropShadowDistance,y=0;y<r.length;y++)f=i.strokeThickness/2,m=i.strokeThickness/2+y*c+a.ascent,"right"===i.align?f+=s-o[y]:"center"===i.align&&(f+=(s-o[y])/2),i.fill&&(this.drawLetterSpacing(r[y],f+d+i.padding,m+_+i.padding),i.stroke&&i.strokeThickness&&(this.context.strokeStyle=i.dropShadowColor,this.drawLetterSpacing(r[y],f+d+i.padding,m+_+i.padding,!0),this.context.strokeStyle=i.stroke))}this.context.shadowBlur=0,this.context.globalAlpha=1,this.context.fillStyle=this._generateFillStyle(i,r);for(var v=0;v<r.length;v++)f=i.strokeThickness/2,m=i.strokeThickness/2+v*c+a.ascent,"right"===i.align?f+=s-o[v]:"center"===i.align&&(f+=(s-o[v])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(r[v],f+i.padding,m+i.padding,!0),i.fill&&this.drawLetterSpacing(r[v],f+i.padding,m+i.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,o=r.letterSpacing;if(0===o)return void(n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var s=String.prototype.split.call(t,""),a=e,l=0,u="";l<t.length;)u=s[l++],n?this.context.strokeText(u,a,i):this.context.fillText(u,a,i),a+=this.context.measureText(u).width+o},e.prototype.updateTexture=function(){if(this._style.trim){var t=(0,b.default)(this.canvas);this.canvas.width=t.width,this.canvas.height=t.height,this.context.putImageData(t.data,0,0)}var e=this._texture,i=this._style;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.realWidth=this.canvas.width,e.baseTexture.realHeight=this.canvas.height,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.trim.width=e._frame.width=this.canvas.width/this.resolution,e.trim.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=-i.padding,e.trim.y=-i.padding,e.orig.width=e._frame.width-2*i.padding,e.orig.height=e._frame.height-2*i.padding,this._onTextureUpdate(),e.baseTexture.emit("update",e.baseTexture),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.wordWrap=function(t){for(var e="",i=this._style,n=t.split("\n"),r=i.wordWrapWidth,o=0;o<n.length;o++){for(var s=r,a=n[o].split(" "),l=0;l<a.length;l++){var u=this.context.measureText(a[l]).width;if(i.breakWords&&u>r)for(var h=a[l].split(""),c=0;c<h.length;c++){var p=this.context.measureText(h[c]).width;p>s?(e+="\n"+h[c],s=r-p):(0===c&&(e+=" "),e+=h[c],s-=p)}else{var f=u+this.context.measureText(" ").width;0===l||f>s?(l>0&&(e+="\n"),e+=a[l],s=r-u):(s-=f,e+=" "+a[l])}}o<n.length-1&&(e+="\n")}return e},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var h=l.length+1,c=1;c<h;++c)u.push(c/h);if(l.unshift(t.fill[0]),u.unshift(0),l.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===m.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),n=(l.length+1)*e.length,r=0;for(var p=0;p<e.length;p++){r+=1;for(var f=0;f<l.length;f++)o=u[f]?u[f]/e.length+p/e.length:r/n,i.addColorStop(o,l[f]),r++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),n=l.length+1,r=1;for(var d=0;d<l.length;d++)o=u[d]?u[d]:r/n,i.addColorStop(o,l[d]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},g,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},e.getFontStyle=function(t){(t=t||{})instanceof v.default||(t=new v.default(t));var e="number"==typeof t.fontSize?t.fontSize+"px":t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(var n=i.length-1;n>=0;n--){var r=i[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),i[n]=r}return t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+i.join(",")},e.calculateFontProperties=function(t){if(e.fontPropertiesCache[t])return e.fontPropertiesCache[t];var i={},n=e.fontPropertiesCanvas,r=e.fontPropertiesContext;r.font=t;var o=Math.ceil(r.measureText("|MÉq").width),s=Math.ceil(r.measureText("M").width),a=2*s;s=1.4*s|0,n.width=o,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,o,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,s);var l=r.getImageData(0,0,o,a).data,u=l.length,h=4*o,c=0,p=0,f=!1;for(c=0;c<s;++c){for(var m=0;m<h;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p+=h}for(i.ascent=s-c,p=u-h,f=!1,c=a;c>s;--c){for(var d=0;d<h;d+=4)if(255!==l[p+d]){f=!0;break}if(f)break;p-=h}return i.descent=c-s,i.fontSize=i.ascent+i.descent,e.fontPropertiesCache[t]=i,i},a(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof v.default?this._style=t:this._style=new v.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(u.default);e.default=w,w.fontPropertiesCache={},w.fontPropertiesCanvas=document.createElement("canvas"),w.fontPropertiesContext=w.fontPropertiesCanvas.getContext("2d")},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(6),s=i(12),a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],a=this._frames[r].frame;if(a){var l=null,u=null,h=new o.Rectangle(0,0,this._frames[r].sourceSize.w/this.resolution,this._frames[r].sourceSize.h/this.resolution);l=this._frames[r].rotated?new o.Rectangle(a.x/this.resolution,a.y/this.resolution,a.h/this.resolution,a.w/this.resolution):new o.Rectangle(a.x/this.resolution,a.y/this.resolution,a.w/this.resolution,a.h/this.resolution),this._frames[r].trimmed&&(u=new o.Rectangle(this._frames[r].spriteSourceSize.x/this.resolution,this._frames[r].spriteSourceSize.y/this.resolution,a.w/this.resolution,a.h/this.resolution)),this.textures[r]=new o.Texture(this.baseTexture,l,h,u,this._frames[r].rotated?2:0),s.TextureCache[r]=this.textures[r]}i++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(28),a=n(s),l=i(55),u=n(l),h="tick",c=function(){function t(){var e=this;r(this,t),this._emitter=new u.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/a.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(h,!0)&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(h,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){return this._emitter.on(h,t,e),this._startIfPossible(),this},t.prototype.addOnce=function(t,e){return this._emitter.once(h,t,e),this._startIfPossible(),this},t.prototype.remove=function(t,e){return this._emitter.off(h,t,e),this._emitter.listeners(h,!0)||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;t>this.lastTime?(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*a.default.TARGET_FPMS*this.speed,this._emitter.emit(h,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=c},function(t,e,i){"use strict";function n(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t,t=o.default.parse(s.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e.default=n;var r=i(488),o=function(t){return t&&t.__esModule?t:{default:t}}(r),s=void 0},function(t,e,i){"use strict";function n(t){return o.default.tablet||o.default.phone?4:t}e.__esModule=!0,e.default=n;var r=i(138),o=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}function r(t,e){s.push(t,e)}function o(){for(var t=0;t<s.length;t+=2)n(s[t],s[t+1]);s.length=0}e.__esModule=!0,e.mixin=n,e.delayMixin=r,e.performMixins=o;var s=[]},function(t,e,i){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){n(t)}}},function(t,e,i){"use strict";function n(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i),o=r.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=void 0,u=void 0,h=void 0;for(l=0;l<s;l+=4)0!==o[l+3]&&(u=l/4%e,h=~~(l/4/e),null===a.top&&(a.top=h),null===a.left?a.left=u:u<a.left&&(a.left=u),null===a.right?a.right=u+1:a.right<u&&(a.right=u+1),null===a.bottom?a.bottom=h:a.bottom<h&&(a.bottom=h));return e=a.right-a.left,i=a.bottom-a.top+1,{height:i,width:e,data:n.getImageData(a.left,a.top,e,i)}}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e)))}var o=i(6),s=n(o),a=i(386),l=n(a),u=i(387),h=n(u),c=i(150),p=n(c),f=i(377),m=n(f),d=i(388),_=n(d),y=i(382),v=n(y),x=i(379),b=n(x);s.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},s.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(s,{Stage:{enumerable:!0,get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),s.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),s.Container}},Strip:{enumerable:!0,get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),l.Mesh}},Rope:{enumerable:!0,get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),l.Rope}},ParticleContainer:{enumerable:!0,get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),h.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),p.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),p.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),p.BitmapText}},blendModes:{enumerable:!0,get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),s.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),s.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),s.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),s.utils.TextureCache}},math:{enumerable:!0,get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),s}},AbstractFilter:{enumerable:!0,get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.Filter}},TransformManual:{enumerable:!0,get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),s.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS},set:function(t){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION},set:function(t){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION=t}},RESOLUTION:{enumerable:!0,get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION},set:function(t){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES},set:function(t){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE},set:function(t){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES},set:function(t){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{enumerable:!0,get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX},set:function(t){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),s.settings.RENDER_OPTIONS}}});for(var g=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],w=0;w<g.length;w++)!function(t){var e=g[t];Object.defineProperty(s[e.parent],"DEFAULT",{enumerable:!0,get:function(){return r("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),s.settings[e.target]},set:function(t){r("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),s.settings[e.target]=t}})}(w);Object.defineProperties(s.settings,{PRECISION:{enumerable:!0,get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT},set:function(t){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT=t}}}),Object.defineProperties(p,{MovieClip:{enumerable:!0,get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),p.AnimatedSprite}}}),s.DisplayObject.prototype.generateTexture=function(t,e,i){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},s.Graphics.prototype.generateTexture=function(t,e){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},s.RenderTexture.prototype.render=function(t,e,i,n){this.legacyRenderer.render(t,this,i,e,!n),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},s.RenderTexture.prototype.getImage=function(t){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},s.RenderTexture.prototype.getBase64=function(t){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},s.RenderTexture.prototype.getCanvas=function(t){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},s.RenderTexture.prototype.getPixels=function(t){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},s.Sprite.prototype.setTexture=function(t){this.texture=t,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},p.BitmapText.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},s.Text.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},s.Text.prototype.setStyle=function(t){this.style=t,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},s.Text.prototype.determineFontProperties=function(t){return r("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);"),s.Text.calculateFontProperties(t)},Object.defineProperties(s.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){i=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var o=0;o<i;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var s=i+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),s.Texture.prototype.setFrame=function(t){this.frame=t,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Object.defineProperties(m,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),s.SpriteMaskFilter}}}),s.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),s.utils.uid()},s.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),s.CanvasTinter.canUseMultiply};var S=!0;Object.defineProperty(s.utils,"_saidHello",{set:function(t){t&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),S=t},get:function(){return S}}),Object.defineProperty(_.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(_.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperties(v.Resource.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===v.Loader.Resource.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===v.Loader.Resource.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===v.Loader.Resource.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===v.Loader.Resource.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===v.Loader.Resource.TYPE.VIDEO}}}),Object.defineProperties(v.Loader.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}}),Object.defineProperty(b.interactiveTarget,"defaultCursor",{set:function(t){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor},enumerable:!0}),Object.defineProperty(b.InteractionManager,"defaultCursorStyle",{set:function(t){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(b.InteractionManager,"currentCursorStyle",{set:function(t){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(6),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=new o.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0;t&&(a=t instanceof o.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(i=e.rootContext,r=s,r.width=this.renderer.width,r.height=this.renderer.height);var l=r.width*n,u=r.height*n,h=new o.CanvasRenderTarget(l,u),c=i.getImageData(r.x*n,r.y*n,l,u);return h.context.putImageData(c,0,0),h.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0;return t&&(a=t instanceof o.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,n=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(i=e.rootContext,r=s,r.width=e.width,r.height=e.height),i.getImageData(0,0,r.width*n,r.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=a,o.CanvasRenderer.registerPlugin("extract",a)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(448);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var o=i(446);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(6),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=new o.Rectangle,a=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=!1,l=void 0;t&&(l=t instanceof o.RenderTexture?t:this.renderer.generateTexture(t)),l?(i=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=l.frame,a=!1):(i=this.renderer.rootRenderTarget,n=i.resolution,a=!0,r=s,r.width=i.size.width,r.height=i.size.height);var u=r.width*n,h=r.height*n,c=new o.CanvasRenderTarget(u,h);if(i){e.bindRenderTarget(i);var p=new Uint8Array(4*u*h),f=e.gl;f.readPixels(r.x*n,r.y*n,u,h,f.RGBA,f.UNSIGNED_BYTE,p);var m=c.context.getImageData(0,0,u,h);m.data.set(p),c.context.putImageData(m,0,0),a&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-h))}return c.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,a=void 0;t&&(a=t instanceof o.RenderTexture?t:this.renderer.generateTexture(t)),a?(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=a.frame):(i=this.renderer.rootRenderTarget,n=i.resolution,r=s,r.width=i.size.width,r.height=i.size.height);var l=r.width*n,u=r.height*n,h=new Uint8Array(4*l*u);if(i){e.bindRenderTarget(i);var c=e.gl;c.readPixels(r.x*n,r.y*n,l,u,c.RGBA,c.UNSIGNED_BYTE,h)}return h},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=a,o.WebGLRenderer.registerPlugin("extract",a)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=function(t){function e(i,o){n(this,e);var s=r(this,t.call(this,i[0]instanceof l.Texture?i[0]:i[0].texture));return s._textures=null,s._durations=null,s.textures=i,s._autoUpdate=o!==!1,s.animationSpeed=1,s.loop=!0,s.onComplete=null,s.onFrameChange=null,s._currentTime=0,s.playing=!1,s}return o(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.ticker.shared.add(this.update,this))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&this.updateTexture()},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(l.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(l.Texture.fromImage(t[n]));return new e(i)},s(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof l.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(l.Sprite);e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=i(360),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var s=r(this,t.call(this));return s._textWidth=0,s._textHeight=0,s._glyphs=[],s._font={tint:void 0!==o.tint?o.tint:16777215,align:o.align||"left",name:null,size:0},s.font=o.font,s._text=i,s.maxWidth=0,s.maxLineHeight=0,s._anchor=new h.default(function(){s.dirty=!0},s,0,0),s.dirty=!1,s.updateText(),s}return o(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new l.Point,r=[],o=[],s=null,a=0,u=0,h=0,c=-1,p=0,f=0,m=0;m<this.text.length;m++){var d=this.text.charCodeAt(m);if(/(\s)/.test(this.text.charAt(m))&&(c=m,p=a),/(?:\r\n|\r|\n)/.test(this.text.charAt(m)))o.push(a),u=Math.max(u,a),h++,n.x=0,n.y+=t.lineHeight,s=null;else if(c!==-1&&this.maxWidth>0&&n.x*i>this.maxWidth)l.utils.removeItems(r,c,m-c),m=c,c=-1,o.push(p),u=Math.max(u,p),h++,n.x=0,n.y+=t.lineHeight,s=null;else{var _=t.chars[d];_&&(s&&_.kerning[s]&&(n.x+=_.kerning[s]),r.push({texture:_.texture,line:h,charCode:d,position:new l.Point(n.x+_.xOffset,n.y+_.yOffset)}),a=n.x+(_.texture.width+_.xOffset),n.x+=_.xAdvance,f=Math.max(f,_.yOffset+_.texture.height),s=d)}}o.push(a),u=Math.max(u,a);for(var y=[],v=0;v<=h;v++){var x=0;"right"===this._font.align?x=u-o[v]:"center"===this._font.align&&(x=(u-o[v])/2),y.push(x)}for(var b=r.length,g=this.tint,w=0;w<b;w++){var S=this._glyphs[w];S?S.texture=r[w].texture:(S=new l.Sprite(r[w].texture),this._glyphs.push(S)),S.position.x=(r[w].position.x+y[r[w].line])*i,S.position.y=r[w].position.y*i,S.scale.x=S.scale.y=i,S.tint=g,S.parent||this.addChild(S)}for(var C=b;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=u*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var T=0;T<b;T++)this._glyphs[T].x-=this._textWidth*this.anchor.x,this._glyphs[T].y-=this._textHeight*this.anchor.y;this.maxLineHeight=f*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0];n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10),n.chars={};for(var s=t.getElementsByTagName("char"),a=0;a<s.length;a++){var u=s[a],h=parseInt(u.getAttribute("id"),10),c=new l.Rectangle(parseInt(u.getAttribute("x"),10)+i.frame.x,parseInt(u.getAttribute("y"),10)+i.frame.y,parseInt(u.getAttribute("width"),10),parseInt(u.getAttribute("height"),10));n.chars[h]={xOffset:parseInt(u.getAttribute("xoffset"),10),yOffset:parseInt(u.getAttribute("yoffset"),10),xAdvance:parseInt(u.getAttribute("xadvance"),10),kerning:{},texture:new l.Texture(i.baseTexture,c)}}for(var p=t.getElementsByTagName("kerning"),f=0;f<p.length;f++){var m=p[f],d=parseInt(m.getAttribute("first"),10),_=parseInt(m.getAttribute("second"),10),y=parseInt(m.getAttribute("amount"),10);n.chars[_]&&(n.chars[_].kerning[d]=y)}return e.fonts[n.font]=n,n},s(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(l.Container);e.default=c,c.fonts={}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(146),c=n(h),p=i(371),f=n(p),m=new u.Point,d=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;r(this,e);var a=o(this,t.call(this,i));return a.tileTransform=new u.TransformStatic,a._width=n,a._height=s,a._canvasPattern=null,a.uvTransform=i.transform||new f.default(i),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return s(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,r=t.resolution,o=e.baseTexture,s=e.baseTexture.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width,l=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var h=new u.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=c.default.getTintedTexture(this,this.tint)),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/s,this.tileScale.y/s);var p=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(a,l),i.fillRect(-a+p,-l+f,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(i.translate(a+p,l+f),i.fillRect(-a,-l,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._width,i=this._height,n=-e*this.anchor._x;if(m.x>n&&m.x<n+e){var r=-i*this.anchor._y;if(m.y>r&&m.y<r+i)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(u.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var r=u.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r,o){return new e(u.Texture.fromImage(t,r,o),i,n)},a(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(u.Sprite);e.default=d},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(6),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=o.DisplayObject,a=new o.Matrix;s.prototype._cacheAsBitmap=!1,s.prototype._cacheData=!1;var l=function t(){n(this,t),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(s.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new l),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),s.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},s.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;i.pad(n)}var r=t._activeRenderTarget,s=t.filterManager.filterStack,l=o.RenderTexture.create(0|i.width,0|i.height),u=a;u.tx=-i.x,u.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,l,!0,u,!0),t.bindRenderTarget(r),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var h=new o.Sprite(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(i.x/i.width),h.anchor.y=-(i.y/i.height),h.alpha=e,h._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=h.containsPoint.bind(h)}},s.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},s.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context,r=o.RenderTexture.create(0|e.width,0|e.height),s=a;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,s,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var l=new o.Sprite(r);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l._bounds=this._bounds,l.alpha=i,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=l,this.containsPoint=l.containsPoint.bind(l)}},s.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},s.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},s.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},s.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";var n=i(6),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var n=i(6),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(6),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),l=i(9),u=(i(46),new a.Matrix),h=new Float32Array(4),c=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.shader=null,o.simpleShader=null,o.quad=null,o}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new a.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=i.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.upload();var r=t._texture,o=r.baseTexture,s=t.tileTransform.localTransform,c=t.uvTransform,p=o.isPowerOfTwo&&r.frame.width===o.width&&r.frame.height===o.height;p&&(o._glTextures[e.CONTEXT_UID]?p=o.wrapMode!==l.WRAP_MODES.CLAMP:o.wrapMode===l.WRAP_MODES.CLAMP&&(o.wrapMode=l.WRAP_MODES.REPEAT));var f=p?this.simpleShader:this.shader;e.bindShader(f);var m=r.width,d=r.height,_=t._width,y=t._height;u.set(s.a*m/_,s.b*m/y,s.c*d/_,s.d*d/y,s.tx/_,s.ty/y),u.invert(),p?u.append(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=u.toArray(!0);var v=h;a.utils.hex2rgb(t.tint,v),v[3]=t.worldAlpha,f.uniforms.uColor=v,f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(r),e.setBlendMode(t.blendMode),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(a.ObjectRenderer);e.default=c,a.WebGLRenderer.registerPlugin("tilingSprite",c)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(372),c=n(h),p=i(373),f=n(p),m=function(t){function e(i,n,s,a){r(this,e);var l=o(this,t.call(this));return l.blurXFilter=new c.default(i,n,s,a),l.blurYFilter=new f.default(i,n,s,a),l.padding=0,l.resolution=s||u.settings.RESOLUTION,l.quality=n||4,l.blur=i||8,l}return s(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},a(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(u.Filter);e.default=m},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=(i(46),function(t){function e(){n(this,e);var i=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n    vec4 result;\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    // Premultiply alpha again.\n    result.rgb *= result.a;\n\n    gl_FragColor = result;\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i}return o(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=Math.sqrt,o=1/3,s=r(o),a=i+(1-i)*o,l=o*(1-i)-s*n,u=o*(1-i)+s*n,h=o*(1-i)+s*n,c=i+o*(1-i),p=o*(1-i)-s*n,f=o*(1-i)-s*n,m=o*(1-i)+s*n,d=i+o*(1-i),_=[a,l,u,0,0,h,c,p,0,0,f,m,d,0,0,0,0,0,1,0];this._loadMatrix(_,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=(i-1)*-.5,r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;var o=(i>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,l=(n>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,l,u,h,e,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},s(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}]),e}(l.Filter));e.default=u,u.prototype.grayscale=u.prototype.greyscale},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=(i(46),function(t){function e(i,o){n(this,e);var s=new l.Matrix;i.renderable=!1;var a=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=i,a.maskMatrix=s,a.uniforms.mapSampler=i.texture,a.uniforms.filterMatrix=s,a.uniforms.scale={x:1,y:1},null!==o&&void 0!==o||(o=20),a.scale=new l.Point(o,o),a}return o(e,t),e.prototype.apply=function(t,e,i){var n=1/i.destinationFrame.width*(i.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,i)},s(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(l.Filter));e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(6),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),l=(i(46),function(t){function e(){return n(this,e),r(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return o(e,t),e}(a.Filter));e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=(i(46),function(t){function e(){n(this,e);var i=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return i.noise=.5,i}return o(e,t),s(e,[{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}]),e}(l.Filter));e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(6),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),l=(i(46),function(t){function e(){n(this,e);var i=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return i.glShaderKey="void",i}return o(e,t),e}(a.Filter));e.default=l},function(t,e,i){"use strict";(function(t){function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var r=i(477);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var o=i(445);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=i(6);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var a=i(402),l=n(a),u=i(447),h=n(u),c=i(150),p=n(c),f=i(377),m=n(f),d=i(379),_=n(d),y=i(382),v=n(y),x=i(386),b=n(x),g=i(387),w=n(g),S=i(388),C=n(S);s.utils.mixins.performMixins(),e.accessibility=l,e.extract=h,e.extras=p,e.filters=m,e.interaction=_,e.loaders=v,e.mesh=b,e.particles=w,e.prepare=C;var T=v&&v.Loader?new v.Loader:null;e.loader=T,t.PIXI=e}).call(e,i(67))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(378),c=n(h),p=i(463),f=n(p),m=i(465),d=n(m),_=i(55),y=n(_),v=i(380),x=n(v);u.utils.mixins.delayMixin(u.DisplayObject.prototype,x.default);var b="MOUSE",g=function(t){function e(i,n){r(this,e);var s=o(this,t.call(this));return n=n||{},s.renderer=i,s.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,s.interactionFrequency=n.interactionFrequency||10,s.mouse=new c.default,s.mouse.identifier=b,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[b]=s.mouse,s.interactionDataPool=[],s.eventData=new f.default,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.mouseOverRenderer=!1,s.supportsTouchEvents="ontouchstart"in window,s.supportsPointerEvents=!!window.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s._tempPoint=new u.Point,s.resolution=1,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return s(e,t),e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0))),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":a(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var o=t.data.global;r=e.interactive||r;var s=0,a=r;if(e.hitArea?a=!1:n&&e._mask&&(e._mask.containsPoint(o)||(n=!1)),e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var h=l[u],c=this.processInteractive(t,h,i,n,a);if(c){if(!h.parent)continue;a=!1,2===c?(n=!1,s=2):0===s&&(s=1)}}return r&&(n&&2!==s&&(e.hitArea?(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=e.interactive?2:1)):e.containsPoint&&e.containsPoint(o)&&(s=e.interactive?2:1)),e.interactive&&(s&&!t.target&&(t.target=e),i(t,e,!!s))),s},e.prototype.onPointerDown=function(t){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType){var a=2===r.button||3===r.which;this.emit(a?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data.originalEvent,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new d.default(r)),this.dispatchEvent(e,"pointerdown",t),"touchstart"===n.type||"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mousedown"===n.type||"mouse"===n.pointerType){var o=2===n.button||3===n.which;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,o=0;o<r;o++){var s=n[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,i,!0),this.emit(e?"pointercancel":"pointerup",l),"mouse"===s.pointerType){var u=2===s.button||3===s.which;this.emit(u?"rightup":"mouseup",l)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend",l),this.releaseInteractionDataForPointerId(s.pointerId,a))}},e.prototype.onPointerCancel=function(t){this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data.originalEvent,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touchcancel"!==i.type&&"touch"!==i.pointerType||this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data.originalEvent,r=t.data.identifier,o=e.trackedPointers[r],s="touchend"===n.type||"touch"===n.pointerType;if(0===n.type.indexOf("mouse")||"mouse"===n.pointerType){var a=2===n.button||3===n.which,l=d.default.FLAGS,u=a?l.RIGHT_DOWN:l.LEFT_DOWN,h=void 0!==o&&o.flags&u;i?(this.dispatchEvent(e,a?"rightup":"mouseup",t),h&&this.dispatchEvent(e,a?"rightclick":"click",t)):h&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),o&&(a?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"===r.pointerType&&this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)},e.prototype.processPointerMove=function(t,e,i){var n=t.data.originalEvent,r="touchmove"===n.type||"touch"===n.pointerType,o="mousemove"===n.type||"mouse"===n.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){var e=this.normalizeToPointerData(t),i=e[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===i.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data.originalEvent,r=t.data.identifier,o="mouseover"===n.type||"mouseout"===n.type||"mouse"===n.pointerType,s=e.trackedPointers[r];i&&!s&&(s=e.trackedPointers[r]=new d.default(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),i=e[0],n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"===i.pointerType&&this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId;if(e===b||"mouse"===t.pointerType)return this.mouse;if(this.activeInteractionData[e])return this.activeInteractionData[e];var i=this.interactionDataPool.pop()||new c.default;return i.identifier=e,this.activeInteractionData[e]=i,i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t._reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.rotation&&(r.rotation=r.rotationAngle||0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=b),void 0===t.pressure&&(t.pressure=.5),void 0===t.rotation&&(t.rotation=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(y.default);e.default=g,u.WebGLRenderer.registerPlugin("interaction",g),u.CanvasRenderer.registerPlugin("interaction",g)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=o,o.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(101),l=n(a),u=i(487),h=i(55),c=n(h),p=i(384),f=n(p),m=i(383),d=n(m),_=i(381),y=n(_),v=function(t){function e(i,n){r(this,e);var s=o(this,t.call(this,i,n));c.default.call(s);for(var a=0;a<e._pixiMiddleware.length;++a)s.use(e._pixiMiddleware[a]());return s.onStart.add(function(t){return s.emit("start",t)}),s.onProgress.add(function(t,e){return s.emit("progress",t,e)}),s.onError.add(function(t,e,i){return s.emit("error",t,e,i)}),s.onLoad.add(function(t,e){return s.emit("load",t,e)}),s.onComplete.add(function(t,e){return s.emit("complete",t,e)}),s}return s(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e}(l.default);e.default=v;for(var x in c.default.prototype)v.prototype[x]=c.default.prototype[x];v._pixiMiddleware=[u.blobMiddlewareFactory,f.default,d.default,y.default];var b=l.default.Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(385),l=function(t){return t&&t.__esModule?t:{default:t}}(a),u=10,h=function(t){function e(i,o,s,a,l){n(this,e);var h=r(this,t.call(this,i,4,4)),c=h.uvs;return c[6]=c[14]=c[22]=c[30]=1,c[25]=c[27]=c[29]=c[31]=1,h._origWidth=i.width,h._origHeight=i.height,h._uvw=1/h._origWidth,h._uvh=1/h._origHeight,h.width=i.width,h.height=i.height,c[2]=c[10]=c[18]=c[26]=h._uvw*o,c[4]=c[12]=c[20]=c[28]=1-h._uvw*a,c[9]=c[11]=c[13]=c[15]=h._uvh*s,c[17]=c[19]=c[21]=c[23]=1-h._uvh*l,h.leftWidth=void 0!==o?o:u,h.rightWidth=void 0!==a?a:u,h.topHeight=void 0!==s?s:u,h.bottomHeight=void 0!==l?l:u,h}return o(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,o=r.source,s=r.width,a=r.height;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,n,r,o,s,a){var l=this.uvs,u=this.vertices,h=(l[s]-l[r])*i,c=(l[a]-l[o])*n,p=u[s]-u[r],f=u[a]-u[o];h<1&&(h=1),c<1&&(c=1),p<1&&(p=1),f<1&&(f=1),t.drawImage(e,l[r]*i,l[o]*n,h,c,u[r],u[o],p,f)},s(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,i=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,i[2]=i[10]=i[18]=i[26]=t,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,i=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,i[4]=i[12]=i[20]=i[28]=this._width-t,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,i=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,i[9]=i[11]=i[13]=i[15]=t,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,i=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,i[17]=i[19]=i[21]=i[23]=this._height-t,this.dirty=!0}}]),e}(l.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(100),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=function(t){function e(i,o){n(this,e);var s=r(this,t.call(this,i));return s.points=o,s.vertices=new Float32Array(4*o.length),s.uvs=new Float32Array(4*o.length),s.colors=new Float32Array(2*o.length),s.indices=new Uint16Array(2*o.length),s._ready=!0,s.refresh(),s}return o(e,t),e.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors,r=this._texture._uvs,o=new u.Point(r.x0,r.y0),s=new u.Point(r.x2-r.x0,Number(r.y2-r.y0));e[0]=0+o.x,e[1]=0+o.y,e[2]=0+o.x,e[3]=s.y+o.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var a=t.length,l=1;l<a;l++){var h=4*l,c=l/(a-1);e[h]=c*s.x+o.x,e[h+1]=0+o.y,e[h+2]=c*s.x+o.x,e[h+3]=s.y+o.y,h=2*l,n[h]=1,n[h+1]=1,h=2*l,i[h]=h,i[h+1]=h+1}this.dirty++,this.indexDirty++}},e.prototype._onTextureUpdate=function(){t.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],i=void 0,n=0,r=0,o=this.vertices,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;i=a<t.length-1?t[a+1]:l,r=-(i.x-e.x),n=i.y-e.y;var h=10*(1-a/(s-1));h>1&&(h=1);var c=Math.sqrt(n*n+r*r),p=this._texture.height/2;n/=c,r/=c,n*=p,r*=p,o[u]=l.x+n,o[u+1]=l.y+r,o[u+2]=l.x-n,o[u+3]=l.y-r,e=l}this.containerUpdateTransform()}},e}(a.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(6),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=i(100),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(t.blendMode),t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,r,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var l=a.baseTexture,u=l.source,h=l.width,c=l.height,p=o[e]*l.width,f=o[i]*l.width,m=o[n]*l.width,d=o[e+1]*l.height,_=o[i+1]*l.height,y=o[n+1]*l.height,v=s[e],x=s[i],b=s[n],g=s[e+1],w=s[i+1],S=s[n+1];if(t.canvasPadding>0){var C=t.canvasPadding/t.worldTransform.a,T=t.canvasPadding/t.worldTransform.d,A=(v+x+b)/3,M=(g+w+S)/3,E=v-A,D=g-M,P=Math.sqrt(E*E+D*D);v=A+E/P*(P+C),g=M+D/P*(P+T),E=x-A,D=w-M,P=Math.sqrt(E*E+D*D),x=A+E/P*(P+C),w=M+D/P*(P+T),E=b-A,D=S-M,P=Math.sqrt(E*E+D*D),b=A+E/P*(P+C),S=M+D/P*(P+T)}r.save(),r.beginPath(),r.moveTo(v,g),r.lineTo(x,w),r.lineTo(b,S),r.closePath(),r.clip();var I=p*_+d*m+f*y-_*m-d*f-p*y,O=v*_+d*b+x*y-_*b-d*x-v*y,R=p*x+v*m+f*b-x*m-v*f-p*b,B=p*_*b+d*x*m+v*f*y-v*_*m-d*f*b-p*x*y,L=g*_+d*S+w*y-_*S-d*w-g*y,F=p*w+g*m+f*S-w*m-g*f-p*S,V=p*_*S+d*w*m+g*f*y-g*_*m-d*f*S-p*w*y;r.transform(O/I,L/I,R/I,F/I,B/I,V/I),r.drawImage(u,0,0,h*l.resolution,c*l.resolution,0,0,h,c),r.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var o=2*r,s=i[o],a=i[o+1],l=i[o+2],u=i[o+3],h=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(l,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=l,o.CanvasRenderer.registerPlugin("mesh",l)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=i(36),h=n(u),c=i(100),p=n(c),f=(i(46),function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.shader=null,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new l.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var r=t._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),r={shader:this.shader,vertexBuffer:h.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:h.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:h.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty},r.vao=new h.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),t.dirty!==r.dirty&&(r.dirty=t.dirty,r.uvBuffer.upload(t.uvs)),t.indexDirty!==r.indexDirty&&(r.indexDirty=t.indexDirty,r.indexBuffer.upload(t.indices)),r.vertexBuffer.upload(t.vertices),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(t.blendMode),r.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),r.shader.uniforms.alpha=t.worldAlpha,r.shader.uniforms.tint=t.tintRgb;var o=t.drawMode===p.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(o,t.indices.length,0)}},e}(l.ObjectRenderer));e.default=f,l.WebGLRenderer.registerPlugin("mesh",f)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(6),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,o=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;n(this,e);var l=r(this,t.call(this));return s>16384&&(s=16384),s>i&&(s=i),l._properties=[!1,!0,!1,!1,!1],l._maxSize=i,l._batchSize=s,l._glBuffers={},l._bufferToUpdate=0,l.interactiveChildren=!1,l.blendMode=a.BLEND_MODES.NORMAL,l.roundPixels=!0,l.baseTexture=null,l.setProperties(o),l}return o(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,o=0,s=0,a=0,l=t.blendModes[this.blendMode];l!==e.globalCompositeOperation&&(e.globalCompositeOperation=l),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible){var c=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,a=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var p=h.worldTransform;t.roundPixels?e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution|0,p.ty*t.resolution|0):e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution,p.ty*t.resolution),r=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,s=c.width,a=c.height}var f=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,c.x*f,c.y*f,c.width*f,c.height*f,r*f,o*f,s*f,a*f)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null},e}(a.Container);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(36),s=n(o),a=i(149),l=n(a),u=function(){function t(e,i,n,o){r(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var a=i[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,offset:a.offset},n[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,l.default)(this.size),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=s.default.GLBuffer.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var r=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=s.default.GLBuffer.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var u=0;u<this.dynamicProperties.length;++u){var h=this.dynamicProperties[u];this.vao.addAttribute(this.dynamicBuffer,h.attribute,t.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var p=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),u=i(474),h=n(u),c=i(472),p=n(c),f=function(t){function e(i){r(this,e);var n=o(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new l.Matrix,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new h.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,o=e.length;if(0!==o){o>i&&(o=i);var s=t._glBuffers[r.CONTEXT_UID];s||(s=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var a=r.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var u=e[0]._texture.baseTexture;this.shader.uniforms.uSampler=r.bindTexture(u);for(var h=0,c=0;h<o;h+=n,c+=1){var p=o-h;p>n&&(p=n);var f=s[c];f.uploadDynamic(e,h,p),t._bufferToUpdate===c&&(f.uploadStatic(e,h,p),t._bufferToUpdate=c+1),r.bindVao(f.vao),f.vao.draw(a.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,o=t._properties,s=0;s<n;s+=r)i.push(new p.default(e,this.properties,o,r));return i},e.prototype.uploadVertices=function(t,e,i,n,r,o){for(var s=0,a=0,l=0,u=0,h=0;h<i;++h){var c=t[e+h],p=c._texture,f=c.scale.x,m=c.scale.y,d=p.trim,_=p.orig;d?(a=d.x-c.anchor.x*_.width,s=a+d.width,u=d.y-c.anchor.y*_.height,l=u+d.height):(s=_.width*(1-c.anchor.x),a=_.width*-c.anchor.x,l=_.height*(1-c.anchor.y),u=_.height*-c.anchor.y),n[o]=a*f,n[o+1]=u*m,n[o+r]=s*f,n[o+r+1]=u*m,n[o+2*r]=s*f,n[o+2*r+1]=l*m,n[o+3*r]=a*f,n[o+3*r+1]=l*m,o+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+r]=a.x,n[o+r+1]=a.y,n[o+2*r]=a.x,n[o+2*r+1]=a.y,n[o+3*r]=a.x,n[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+r]=a.x1,n[o+r+1]=a.y1,n[o+2*r]=a.x2,n[o+2*r+1]=a.y2,n[o+3*r]=a.x3,n[o+3*r+1]=a.y3,o+=4*r):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+2*r]=0,n[o+2*r+1]=0,n[o+3*r]=0,n[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadAlpha=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].alpha;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(l.ObjectRenderer);e.default=f,l.WebGLRenderer.registerPlugin("particle",f)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(95),a=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return o(e,t),e}(a.default);e.default=l},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";var n=i(394),r=function(t){return t&&t.__esModule?t:{default:t}}(n);Object.assign||(Object.assign=r.default)},function(t,e,i){"use strict";i(476),i(478),i(475),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var o=n[r];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,i(67))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(e instanceof u.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),r=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,r,0,0,t.canvas.width,t.canvas.height),!0}return!1}function a(t,e){if(t instanceof u.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof u.Texture){var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}e.__esModule=!0;var l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),h=i(151),c=function(t){return t&&t.__esModule?t:{default:t}}(h),p=16,f=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.uploadHookHelper=o,o.canvas=document.createElement("canvas"),o.canvas.width=p,o.canvas.height=p,o.ctx=o.canvas.getContext("2d"),o.register(a,s),o}return o(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(c.default);e.default=f,u.CanvasRenderer.registerPlugin("prepare",f)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return e instanceof c.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function a(t,e){return e instanceof c.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function l(t,e){if(t instanceof c.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof c.Texture){var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}function u(t,e){return t instanceof c.Graphics&&(e.push(t),!0)}e.__esModule=!0;var h=i(6),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),p=i(151),f=function(t){return t&&t.__esModule?t:{default:t}}(p),m=function(t){function e(i){n(this,e);var o=r(this,t.call(this,i));return o.uploadHookHelper=o.renderer,o.register(l,s).register(u,a),o}return o(e,t),e}(f.default);e.default=m,c.WebGLRenderer.registerPlugin("prepare",m)},function(t,e,i){(function(t,n){var r;!function(o){function s(t){throw new RangeError(O[t])}function a(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function l(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(I,"."),n+a(t.split("."),e).join(".")}function u(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:g}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,i){var n=0;for(t=i?B(t/T):t>>1,t+=B(t/e);t>R*S>>1;n+=g)t=B(t/R);return B(n+(R+1)*t/(t+C))}function m(t){var e,i,n,r,o,a,l,u,p,m,d=[],_=t.length,y=0,v=M,x=A;for(i=t.lastIndexOf(E),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&s("not-basic"),d.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<_;){for(o=y,a=1,l=g;r>=_&&s("invalid-input"),u=c(t.charCodeAt(r++)),(u>=g||u>B((b-y)/a))&&s("overflow"),y+=u*a,p=l<=x?w:l>=x+S?S:l-x,!(u<p);l+=g)m=g-p,a>B(b/m)&&s("overflow"),a*=m;e=d.length+1,x=f(y-o,e,0==o),B(y/e)>b-v&&s("overflow"),v+=B(y/e),y%=e,d.splice(y++,0,v)}return h(d)}function d(t){var e,i,n,r,o,a,l,h,c,m,d,_,y,v,x,C=[];for(t=u(t),_=t.length,e=M,i=0,o=A,a=0;a<_;++a)(d=t[a])<128&&C.push(L(d));for(n=r=C.length,r&&C.push(E);n<_;){for(l=b,a=0;a<_;++a)(d=t[a])>=e&&d<l&&(l=d);for(y=n+1,l-e>B((b-i)/y)&&s("overflow"),i+=(l-e)*y,e=l,a=0;a<_;++a)if(d=t[a],d<e&&++i>b&&s("overflow"),d==e){for(h=i,c=g;m=c<=o?w:c>=o+S?S:c-o,!(h<m);c+=g)x=h-m,v=g-m,C.push(L(p(m+x%v,0))),h=B(x/v);C.push(L(p(h,0))),o=f(i,y,n==r),i=0,++n}++i,++e}return C.join("")}function _(t){return l(t,function(t){return D.test(t)?m(t.slice(4).toLowerCase()):t})}function y(t){return l(t,function(t){return P.test(t)?"xn--"+d(t):t})}var v=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof n&&n);v.global!==v&&v.window!==v&&v.self;var x,b=2147483647,g=36,w=1,S=26,C=38,T=700,A=72,M=128,E="-",D=/^xn--/,P=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=g-w,B=Math.floor,L=String.fromCharCode;x={version:"1.4.1",ucs2:{decode:u,encode:h},decode:m,encode:d,toASCII:y,toUnicode:_},void 0!==(r=function(){return x}.call(e,i,e,t))&&(t.exports=r)}()}).call(e,i(490)(t),i(67))},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var u=0;u<l;++u){var h,c,p,f,m=t[u].replace(/\+/g,"%20"),d=m.indexOf(i);d>=0?(h=m.substr(0,d),c=m.substr(d+1)):(h=m,c=""),p=decodeURIComponent(h),f=decodeURIComponent(c),n(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";e.decode=e.parse=i(483),e.encode=e.stringify=i(484)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i(342),a=n(s),l=i(343),u=n(l),h=i(391),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),p=i(152),f=n(p),m=/(#[\w-]+)?$/,d=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=c.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===(void 0===t?"undefined":o(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new f.default(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],l=0;l<s.children.length;++l)s.children[l].isComplete||a.push(s.children[l]);var u=s.progressChunk*(a.length+1),h=u/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var c=0;c<a.length;++c)a[c].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},t.prototype._prepareUrl=function(t){var e=(0,u.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=m.exec(i)[0];i=i.substr(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,c.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())})},t.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,t._dequeue(),this._resourcesParsing.push(t),c.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&(e.progress=100,e._onComplete())})},t}();e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===a.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=function(){var i=h.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=a.default.TYPE.IMAGE,t.data.onload=function(){h.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0}}();if("object"===(void 0===i?"undefined":o(i)))return i.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+u.default.encodeBinary(t.xhr.responseText),t.type=a.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.blobMiddlewareFactory=r;var s=i(152),a=n(s),l=i(392),u=n(l),h=window.URL||window.webkitURL},function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&u.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return u.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var l=i(482),u=i(489);e.parse=r,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=n;var h=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(f),d=["'"].concat(m),_=["%","/","?",";","#"].concat(d),y=["/","?","#"],v={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=i(485);n.prototype.parse=function(t,e,i){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(r);o[0]=o[0].replace(/\\/g,"/"),t=o.join(r);var s=t;if(s=s.trim(),!i&&1===t.split("#").length){var a=p.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=h.exec(s);if(c){c=c[0];var f=c.toLowerCase();this.protocol=f,s=s.substr(c.length)}if(i||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===s.substr(0,2);!m||c&&x[c]||(s=s.substr(2),this.slashes=!0)}if(!x[c]&&(m||c&&!b[c])){for(var w=-1,S=0;S<y.length;S++){var C=s.indexOf(y[S]);C!==-1&&(w===-1||C<w)&&(w=C)}var T,A;A=w===-1?s.lastIndexOf("@"):s.lastIndexOf("@",w),A!==-1&&(T=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(T)),w=-1;for(var S=0;S<_.length;S++){var C=s.indexOf(_[S]);C!==-1&&(w===-1||C<w)&&(w=C)}w===-1&&(w=s.length),this.host=s.slice(0,w),s=s.slice(w),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var E=this.hostname.split(/\./),S=0,D=E.length;S<D;S++){var P=E[S];if(P&&!P.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var I="",O=0,R=P.length;O<R;O++)P.charCodeAt(O)>127?I+="x":I+=P[O];if(!I.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var B=E.slice(0,S),L=E.slice(S+1),F=P.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);F&&(B.push(F[1]),L.unshift(F[2])),L.length&&(s="/"+L.join(".")+s),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=l.toASCII(this.hostname));var V=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+V,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!v[f])for(var S=0,D=d.length;S<D;S++){var N=d[S];if(s.indexOf(N)!==-1){var G=encodeURIComponent(N);G===N&&(G=escape(N)),s=s.split(N).join(G)}}var j=s.indexOf("#");j!==-1&&(this.hash=s.substr(j),s=s.slice(0,j));var U=s.indexOf("?");if(U!==-1?(this.search=s.substr(U),this.query=s.substr(U+1),e&&(this.query=g.parse(this.query)),s=s.slice(0,U)):e&&(this.search="",this.query={}),s&&(this.pathname=s),b[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",J=this.search||"";this.path=V+J}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=g.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var h=a[l];"protocol"!==h&&(i[h]=t[h])}return b[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!b[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var f=c[p];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||x[t.protocol])i.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),i.pathname=m.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var d=i.pathname||"",_=i.search||"";i.path=d+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=v||y||i.host&&t.pathname,w=g,S=i.pathname&&i.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],C=i.protocol&&!b[i.protocol];if(C&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),g=g&&(""===m[0]||""===S[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=m;else if(m.length)S||(S=[]),S.pop(),S=S.concat(m),i.search=t.search,i.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(C){i.hostname=i.host=S.shift();var T=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return i.search=t.search,i.query=t.query,u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=S.slice(-1)[0],M=(i.host||t.host||S.length>1)&&("."===A||".."===A)||""===A,E=0,D=S.length;D>=0;D--)A=S[D],"."===A?S.splice(D,1):".."===A?(S.splice(D,1),E++):E&&(S.splice(D,1),E--);if(!g&&!w)for(;E--;E)S.unshift("..");!g||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),M&&"/"!==S.join("/").substr(-1)&&S.push("");var P=""===S[0]||S[0]&&"/"===S[0].charAt(0);if(C){i.hostname=i.host=P?"":S.length?S.shift():"";var T=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");T&&(i.auth=T.shift(),i.host=i.hostname=T.shift())}return g=g||i.host&&S.length,g&&!P&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(393),l=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"onCreateHero",value:function(t){t.sprite=PIXI.Sprite.fromImage("bunny.png"),t.sprite.anchor.set(.5)}}]),e}(a);"undefined"!=typeof Worker?window.server||(window.server=!0,window.server=new Worker("../dist/example/testserver.js"),window.server.onmessage=function(t){view.level.fromArray(t.data)}):document.body.innerHTML="Sorry! No Web Worker support.",window.view=new l},,function(t,e,i){i(136),t.exports=i(491)}]);